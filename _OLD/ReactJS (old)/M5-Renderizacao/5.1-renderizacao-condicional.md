# Renderiza√ß√£o Condicional no React: Controlando o Que √© Exibido

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

Renderiza√ß√£o Condicional √© o processo de **decidir dinamicamente qual UI renderizar** com base em condi√ß√µes, estado ou dados da aplica√ß√£o. Representa a aplica√ß√£o de **l√≥gica de controle de fluxo** (if/else, tern√°rios, operadores l√≥gicos) dentro de componentes React para determinar quais elementos JSX ser√£o retornados e, consequentemente, exibidos na tela. √â o mecanismo que torna interfaces **din√¢micas e responsivas** ao estado da aplica√ß√£o.

Conceitualmente, renderiza√ß√£o condicional transforma componentes de estruturas est√°ticas em **fun√ß√µes que retornam diferentes UIs** dependendo de inputs. √â a implementa√ß√£o de **branching logic** no contexto declarativo do React, onde ao inv√©s de manipular DOM imperativamente ("se X, adicione elemento"), voc√™ declara ("se X, renderize elemento Y").

### Contexto Hist√≥rico e Motiva√ß√£o

**Evolu√ß√£o da renderiza√ß√£o condicional:**

**2013 - Funda√ß√µes:** React nasceu com JSX, mas renderiza√ß√£o condicional inicialmente confundia desenvolvedores vindos de templates tradicionais (Handlebars, Angular 1.x) que tinham diretivas expl√≠citas (`ng-if`, `{{#if}}`). React n√£o tinha diretivas - usava JavaScript puro.

**Motiva√ß√£o original:**
- **JavaScript nativo**: Ao inv√©s de aprender sintaxe de template, use if/else/tern√°rios que voc√™ j√° conhece
- **Flexibilidade**: Qualquer l√≥gica JavaScript v√°lida funciona
- **Poder**: N√£o limitado a diretivas pr√©-definidas

**2015-2017: Padr√µes emergem**
Comunidade identificou idiomas comuns:
- **Operador `&&`**: Para renderiza√ß√£o condicional simples
- **Tern√°rio**: Para escolha entre duas alternativas
- **Early return**: Para simplificar componentes complexos
- **Null/undefined**: Para "n√£o renderizar nada"

**2018-hoje: Refinamentos**
- **Nullish coalescing (`??`)**: Alternativa mais segura ao `||`
- **Optional chaining (`?.`)**: Acesso seguro a propriedades aninhadas
- **Pattern matching (futuro)**: TC39 proposal para JavaScript pode influenciar padr√µes

### Problema Fundamental que Resolve

**Sem renderiza√ß√£o condicional:**

**Problema 1 - UIs est√°ticas:**
Como mostrar spinner durante carregamento? Componente sempre renderiza o mesmo.

**Problema 2 - Estados m√∫ltiplos:**
Formul√°rio tem estados: vazio, preenchendo, validando, erro, sucesso. Como exibir UI correta para cada?

**Problema 3 - Permiss√µes:**
Como ocultar bot√µes "Admin" de usu√°rios normais? Renderizar sempre e esconder com CSS? Inseguro e ineficiente.

**Renderiza√ß√£o condicional resolve:**

```javascript
// Loading state
{isLoading ? <Spinner /> : <Content />}

// Estados do formul√°rio
{formState === 'error' && <ErrorMessage />}
{formState === 'success' && <SuccessMessage />}

// Permiss√µes
{user.isAdmin && <AdminPanel />}
```

**Benef√≠cios:**
1. **UIs din√¢micas**: Interface se adapta ao estado
2. **Otimiza√ß√£o**: N√£o renderiza o que n√£o √© necess√°rio
3. **Seguran√ßa**: Dados sens√≠veis n√£o v√£o ao DOM se usu√°rio n√£o autorizado
4. **UX**: Feedback apropriado para cada situa√ß√£o

### Import√¢ncia no Ecossistema

Renderiza√ß√£o condicional √© **absolutamente fundamental** no React:

- **Ubiquidade**: Todo app n√£o-trivial usa renderiza√ß√£o condicional
- **Padr√£o de design**: Loading states, empty states, error states s√£o universais
- **Performance**: N√£o renderizar = menos trabalho para React e DOM
- **Arquitetura**: Estados da aplica√ß√£o mapeiam diretamente para UI

---

## üìã Sum√°rio Conceitual

### Aspectos Te√≥ricos Centrais

1. **Branching declarativo**: L√≥gica de controle em contexto declarativo
2. **Retorno condicional**: Componentes retornam diferentes elementos baseados em condi√ß√µes
3. **Null como "n√£o renderizar"**: `null`, `undefined`, `false` n√£o renderizam nada
4. **Composi√ß√£o de condi√ß√µes**: M√∫ltiplas condi√ß√µes podem ser combinadas
5. **Performance**: Renderiza√ß√£o condicional afeta what React processa

### Pilares Fundamentais

- **If/Else tradicional**: L√≥gica imperativa com early returns
- **Operador Tern√°rio**: Escolha bin√°ria inline
- **Operador &&**: Renderiza√ß√£o condicional de um elemento
- **Operador ||**: Fallback/valor padr√£o
- **Switch/Case**: M√∫ltiplas condi√ß√µes mutuamente exclusivas
- **Null rendering**: Retornar null para n√£o renderizar nada

### Vis√£o Geral das Nuances

- **Falsy values**: `0` e `""` s√£o renderizados (n√£o s√£o null/undefined)
- **Short-circuit evaluation**: `&&` e `||` avaliam at√© primeira verdade
- **Performance**: Condi√ß√µes complexas podem ser custosas
- **Legibilidade**: Trade-off entre concis√£o e clareza
- **Keys em condicionais**: Branches diferentes podem precisar keys

---

## üß† Fundamentos Te√≥ricos

### Renderiza√ß√£o como Fun√ß√£o do Estado

**Conceito central:** UI = f(state)

Interface √© **fun√ß√£o pura** do estado da aplica√ß√£o:

```javascript
function UI(state) {
  if (state.loading) {
    return <Spinner />;
  }

  if (state.error) {
    return <ErrorMessage error={state.error} />;
  }

  return <Content data={state.data} />;
}
```

**Implica√ß√µes:**
- Mesmo estado ‚Üí sempre mesma UI
- Mudan√ßa de estado ‚Üí mudan√ßa de UI (re-render)
- Previs√≠vel e test√°vel

### JSX √© JavaScript

**Fundamento:** JSX n√£o √© linguagem de template, √© **syntax sugar para JavaScript**.

```javascript
// JSX
<div>Hello</div>

// Compila para
React.createElement('div', null, 'Hello')
```

**Consequ√™ncia:** Qualquer express√£o JavaScript v√°lida funciona em JSX:

```javascript
<div>
  {/* Tern√°rio */}
  {isLoggedIn ? <Dashboard /> : <Login />}

  {/* Fun√ß√£o */}
  {getGreeting(user)}

  {/* IIFE */}
  {(() => {
    if (x > 10) return <A />;
    return <B />;
  })()}
</div>
```

### Valores que React Renderiza vs Ignora

**React renderiza:**
- Strings: `"texto"`
- Numbers: `42`, `0` (‚ö†Ô∏è zero √© renderizado!)
- Elementos React: `<div>`, `<Component />`
- Arrays de elementos: `[<div key="1" />, <div key="2" />]`

**React ignora (n√£o renderiza nada):**
- `null`
- `undefined`
- `false`
- `true`

**Implica√ß√£o crucial:**

```javascript
// ‚ö†Ô∏è CUIDADO - 0 √© renderizado!
{items.length && <List items={items} />}
// Se items.length === 0, renderiza "0" na tela!

// ‚úÖ Correto - converte para boolean
{items.length > 0 && <List items={items} />}
{Boolean(items.length) && <List items={items} />}
{!!items.length && <List items={items} />}
```

---

## üîç An√°lise Conceitual Profunda

### 5.1.1 T√©cnicas de Renderiza√ß√£o Condicional

#### If/Else com Early Return

**Padr√£o:** Tratar casos especiais primeiro, retornar cedo. Deixa "happy path" no final.

```javascript
function UserProfile({ user, isLoading, error }) {
  // Early return para loading
  if (isLoading) {
    return (
      <div className="loading">
        <Spinner />
        <p>Carregando perfil...</p>
      </div>
    );
  }

  // Early return para erro
  if (error) {
    return (
      <div className="error">
        <ErrorIcon />
        <p>Erro ao carregar: {error.message}</p>
        <button onClick={retry}>Tentar novamente</button>
      </div>
    );
  }

  // Early return se usu√°rio n√£o existe
  if (!user) {
    return (
      <div className="empty">
        <p>Usu√°rio n√£o encontrado</p>
      </div>
    );
  }

  // Happy path - renderiza√ß√£o principal
  return (
    <div className="profile">
      <img src={user.avatar} alt={user.name} />
      <h1>{user.name}</h1>
      <p>{user.bio}</p>
      <ContactInfo email={user.email} phone={user.phone} />
    </div>
  );
}
```

**An√°lise:**
- **Legibilidade**: F√°cil seguir l√≥gica (casos especiais ‚Üí caso normal)
- **Guard clauses**: Early returns funcionam como guardas
- **Flat structure**: Evita aninhamento profundo de condicionais
- **Manuten√ß√£o**: Adicionar novo caso especial = adicionar early return

**Quando usar:** Componentes com m√∫ltiplos estados mutuamente exclusivos.

#### Operador Tern√°rio (Conditional/Ternary Operator)

**Sintaxe:** `condi√ß√£o ? seVerdadeiro : seFalso`

**Uso b√°sico:**

```javascript
function Greeting({ isLoggedIn }) {
  return (
    <div>
      {isLoggedIn ? (
        <h1>Bem-vindo de volta!</h1>
      ) : (
        <h1>Por favor, fa√ßa login.</h1>
      )}
    </div>
  );
}
```

**Inline em JSX:**

```javascript
function Message({ type }) {
  return (
    <div className={type === 'error' ? 'alert-error' : 'alert-info'}>
      {type === 'error' ? '‚ùå Erro' : '‚ÑπÔ∏è Informa√ß√£o'}
    </div>
  );
}
```

**Tern√°rios aninhados (use com cuidado):**

```javascript
function StatusBadge({ status }) {
  return (
    <span>
      {status === 'active' ? (
        'üü¢ Ativo'
      ) : status === 'inactive' ? (
        '‚ö´ Inativo'
      ) : status === 'pending' ? (
        'üü° Pendente'
      ) : (
        '‚ùì Desconhecido'
      )}
    </span>
  );
}
```

**‚ö†Ô∏è Problema com aninhamento:** Dif√≠cil de ler. Alternativas:

```javascript
// Melhor: Extrair para fun√ß√£o
function getStatusIcon(status) {
  switch (status) {
    case 'active': return 'üü¢ Ativo';
    case 'inactive': return '‚ö´ Inativo';
    case 'pending': return 'üü° Pendente';
    default: return '‚ùì Desconhecido';
  }
}

function StatusBadge({ status }) {
  return <span>{getStatusIcon(status)}</span>;
}

// Ou: Objeto de mapeamento
const STATUS_ICONS = {
  active: 'üü¢ Ativo',
  inactive: '‚ö´ Inativo',
  pending: 'üü° Pendente',
};

function StatusBadge({ status }) {
  return <span>{STATUS_ICONS[status] || '‚ùì Desconhecido'}</span>;
}
```

**Quando usar tern√°rio:**
- Escolha bin√°ria simples (2 op√ß√µes)
- Inline em JSX quando conciso
- **Evitar:** M√∫ltiplas condi√ß√µes aninhadas

#### Operador && (Logical AND)

**Sintaxe:** `condi√ß√£o && <Elemento />`

**Conceito:** JavaScript avalia express√µes da esquerda para direita. Se esquerda √© falsy, retorna esquerda (sem avaliar direita). Se esquerda √© truthy, retorna direita.

```javascript
true && 'resultado'    // ‚Üí 'resultado'
false && 'resultado'   // ‚Üí false
null && 'resultado'    // ‚Üí null
0 && 'resultado'       // ‚Üí 0
```

**Uso em React:**

```javascript
function Notifications({ hasNotifications, count }) {
  return (
    <div>
      <h1>Painel</h1>
      {/* Renderiza badge apenas se houver notifica√ß√µes */}
      {hasNotifications && (
        <span className="badge">{count} novas</span>
      )}
    </div>
  );
}
```

**M√∫ltiplas condi√ß√µes:**

```javascript
function AdminPanel({ user }) {
  return (
    <div>
      {/* Renderiza apenas se usu√°rio existe E √© admin */}
      {user && user.isAdmin && (
        <div className="admin-panel">
          <h2>Painel Administrativo</h2>
          <AdminControls />
        </div>
      )}
    </div>
  );
}
```

**‚ö†Ô∏è Armadilha com valores falsy:**

```javascript
// ‚ùå ERRADO - renderiza "0" se lista vazia
{items.length && <List items={items} />}

// ‚úÖ CORRETO - converte para boolean
{items.length > 0 && <List items={items} />}
{!!items.length && <List items={items} />}

// ‚ùå ERRADO - renderiza string vazia
{searchTerm && <Results term={searchTerm} />}

// ‚úÖ CORRETO - verifica explicitamente
{searchTerm.length > 0 && <Results term={searchTerm} />}
```

**Quando usar `&&`:**
- Renderiza√ß√£o condicional de **um √∫nico elemento**
- Condi√ß√£o clara e simples
- Certifique-se que lado esquerdo √© boolean (ou converta)

#### Operador || (Logical OR) - Fallback

**Sintaxe:** `valor || fallback`

**Uso:** Fornecer valor padr√£o se valor principal √© falsy.

```javascript
function UserName({ user }) {
  return <h1>{user?.name || 'An√¥nimo'}</h1>;
}

function Avatar({ src }) {
  return <img src={src || '/default-avatar.png'} alt="Avatar" />;
}
```

**‚ö†Ô∏è Cuidado com valores falsy v√°lidos:**

```javascript
// ‚ùå PROBLEMA - 0 √© substitu√≠do por 10
function Counter({ count }) {
  return <div>Count: {count || 10}</div>;
}
<Counter count={0} />  // Exibe "Count: 10", n√£o "Count: 0"!

// ‚úÖ Solu√ß√£o 1: Nullish coalescing (??)
function Counter({ count }) {
  return <div>Count: {count ?? 10}</div>;
}
// ?? apenas substitui se null/undefined, n√£o se 0/false/""

// ‚úÖ Solu√ß√£o 2: Verifica√ß√£o expl√≠cita
function Counter({ count }) {
  return <div>Count: {count !== undefined ? count : 10}</div>;
}
```

**Nullish Coalescing (`??`) - Moderno:**

```javascript
// || considera "", 0, false como falsy
value || defaultValue

// ?? considera apenas null/undefined como falsy
value ?? defaultValue

// Exemplos
"" || "default"    // ‚Üí "default"
"" ?? "default"    // ‚Üí "" (string vazia √© v√°lida)

0 || 10            // ‚Üí 10
0 ?? 10            // ‚Üí 0 (zero √© v√°lido)

false || true      // ‚Üí true
false ?? true      // ‚Üí false (false √© v√°lido)

null ?? "default"  // ‚Üí "default"
undefined ?? "default"  // ‚Üí "default"
```

**Quando usar `??`:** Sempre que valor falsy (como 0, "", false) √© v√°lido.

#### Renderiza√ß√£o de Null

**Conceito:** Retornar `null` significa "n√£o renderizar nada".

```javascript
function OptionalMessage({ show, message }) {
  if (!show) {
    return null;  // N√£o renderiza nada
  }

  return <div className="message">{message}</div>;
}

// Ou inline
function OptionalMessage({ show, message }) {
  return show ? <div className="message">{message}</div> : null;
}

// Ou com &&
function OptionalMessage({ show, message }) {
  return show && <div className="message">{message}</div>;
}
```

**Importante:** Componente que retorna `null` **ainda executa**. Hooks (useEffect, etc.) ainda rodam. Apenas n√£o renderiza UI.

```javascript
function HiddenTracker({ isVisible }) {
  useEffect(() => {
    // Este effect RODA mesmo se retornamos null
    trackPageView();
  }, []);

  if (!isVisible) {
    return null;  // N√£o renderiza UI, mas effect j√° executou
  }

  return <div>Conte√∫do</div>;
}
```

#### Switch/Case para M√∫ltiplas Condi√ß√µes

**Padr√£o:** Fun√ß√£o separada com switch/case para l√≥gica complexa.

```javascript
function getStatusMessage(status) {
  switch (status) {
    case 'idle':
      return <p>Aguardando a√ß√£o...</p>;
    case 'loading':
      return <LoadingSpinner />;
    case 'success':
      return <SuccessMessage />;
    case 'error':
      return <ErrorMessage />;
    default:
      return <p>Status desconhecido</p>;
  }
}

function StatusDisplay({ status }) {
  return (
    <div className="status-display">
      {getStatusMessage(status)}
    </div>
  );
}
```

**Alternativa: Objeto de mapeamento**

```javascript
const STATUS_COMPONENTS = {
  idle: <p>Aguardando a√ß√£o...</p>,
  loading: <LoadingSpinner />,
  success: <SuccessMessage />,
  error: <ErrorMessage />,
};

function StatusDisplay({ status }) {
  return (
    <div className="status-display">
      {STATUS_COMPONENTS[status] || <p>Status desconhecido</p>}
    </div>
  );
}
```

**Ou com componentes din√¢micos:**

```javascript
const STATUS_COMPONENTS = {
  idle: IdleComponent,
  loading: LoadingComponent,
  success: SuccessComponent,
  error: ErrorComponent,
};

function StatusDisplay({ status, ...props }) {
  const Component = STATUS_COMPONENTS[status] || DefaultComponent;
  return <Component {...props} />;
}
```

**Quando usar:** M√∫ltiplas condi√ß√µes mutuamente exclusivas (>3 op√ß√µes).

---

## üéØ Aplicabilidade e Contextos

### Padr√µes Comuns de UI

#### Loading States

```javascript
function DataDisplay({ data, isLoading, error }) {
  if (isLoading) return <Spinner />;
  if (error) return <ErrorMessage error={error} />;
  if (!data) return <EmptyState />;

  return <DataTable data={data} />;
}
```

#### Empty States

```javascript
function ProductList({ products }) {
  if (products.length === 0) {
    return (
      <div className="empty-state">
        <EmptyIcon />
        <h2>Nenhum produto encontrado</h2>
        <p>Tente ajustar seus filtros</p>
      </div>
    );
  }

  return products.map(product => <ProductCard key={product.id} product={product} />);
}
```

#### Error States

```javascript
function DataFetcher() {
  const [error, setError] = useState(null);

  if (error) {
    return (
      <div className="error">
        <h2>Algo deu errado</h2>
        <p>{error.message}</p>
        <button onClick={() => setError(null)}>Tentar novamente</button>
      </div>
    );
  }

  // Renderiza√ß√£o normal
}
```

#### Authentication/Authorization

```javascript
function ProtectedContent({ user }) {
  if (!user) {
    return <Redirect to="/login" />;
  }

  if (!user.hasPermission('view-content')) {
    return <UnauthorizedMessage />;
  }

  return <SensitiveContent />;
}
```

---

## ‚ö†Ô∏è Limita√ß√µes e Considera√ß√µes

### Armadilhas Comuns

**1. Falsy values renderizados:**
```javascript
// ‚ùå Renderiza 0
{count && <Display count={count} />}

// ‚úÖ Correto
{count > 0 && <Display count={count} />}
```

**2. Tern√°rio complexo:**
```javascript
// ‚ùå Dif√≠cil de ler
{a ? b ? c : d : e ? f : g}

// ‚úÖ Extrair para fun√ß√£o
{getComplexRender(a, b, e)}
```

**3. L√≥gica pesada inline:**
```javascript
// ‚ùå C√°lculo complexo em JSX
{items.filter(x => x.active).map(x => x.value).reduce((a, b) => a + b, 0) > 100 && <Alert />}

// ‚úÖ Extrair para vari√°vel
const totalActiveValue = items
  .filter(x => x.active)
  .map(x => x.value)
  .reduce((a, b) => a + b, 0);

{totalActiveValue > 100 && <Alert />}
```

### Performance

**Condi√ß√µes custosas:** Se condi√ß√£o envolve c√°lculo pesado, memoize:

```javascript
// ‚ùå Recalcula toda render
{expensiveCalculation(data) && <Component />}

// ‚úÖ Memoiza
const shouldShow = useMemo(() => expensiveCalculation(data), [data]);
{shouldShow && <Component />}
```

---

## üîó Interconex√µes Conceituais

### Rela√ß√£o com Estado

Renderiza√ß√£o condicional √© geralmente baseada em state/props. Mudan√ßa de estado ‚Üí mudan√ßa de condi√ß√£o ‚Üí mudan√ßa de UI.

### Rela√ß√£o com Performance

N√£o renderizar = menos trabalho. Use renderiza√ß√£o condicional para otimizar.

### Rela√ß√£o com Acessibilidade

Conte√∫do oculto condicionalmente n√£o est√° no DOM. Para hide visual (mas manter no DOM para screen readers), use CSS, n√£o condicional.

---

## üöÄ Evolu√ß√£o e Pr√≥ximos Conceitos

### Progress√£o Natural

```
Renderiza√ß√£o Condicional
    ‚Üì
Listas e Keys
    ‚Üì
State Management
    ‚Üì
Performance (React.memo, condicionals)
```

### Padr√µes Avan√ßados

- **Suspense**: Renderiza√ß√£o condicional declarativa para async
- **Error Boundaries**: Renderiza√ß√£o condicional para erros
- **Concurrent Mode**: Renderiza√ß√£o condicional interrupt√≠vel

---

## üìö Conclus√£o

Renderiza√ß√£o Condicional √© **skill fundamental** em React. Princ√≠pios essenciais:

1. **Early returns**: Simplifique componentes
2. **Tern√°rio**: Para escolhas bin√°rias
3. **&&**: Para renderiza√ß√£o condicional de um elemento
4. **??**: Fallbacks seguros
5. **Null**: Para n√£o renderizar nada

**Recomenda√ß√µes:**
- Prefira legibilidade a concis√£o
- Cuidado com falsy values (0, "")
- Extraia l√≥gica complexa para fun√ß√µes
- Use ?? ao inv√©s de || quando apropriado
- Early returns para m√∫ltiplos estados

**Dominar renderiza√ß√£o condicional = dominar UIs din√¢micas.** √â distin√ß√£o entre interfaces est√°ticas e experi√™ncias interativas e responsivas.
