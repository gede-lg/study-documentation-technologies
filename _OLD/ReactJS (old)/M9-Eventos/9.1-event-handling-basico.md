# Event Handling B√°sico no React

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**Event Handling** (manipula√ß√£o de eventos) no React √© o sistema para **responder a intera√ß√µes do usu√°rio** - cliques, digita√ß√£o, foco, submiss√£o de formul√°rios. Conceitualmente, React usa **SyntheticEvents** - uma abstra√ß√£o cross-browser sobre eventos nativos do DOM que normaliza inconsist√™ncias entre navegadores, mant√©m API consistente, e otimiza performance atrav√©s de event pooling (React 16) ou auto-reset (React 17+).

Diferente do HTML/DOM puro (addEventListener, atributos onclick), React usa **JSX props declarativas** (`onClick`, `onChange`) que seguem conven√ß√£o camelCase. Event handlers s√£o fun√ß√µes JavaScript passadas como props, n√£o strings de c√≥digo. React automaticamente gerencia binding, delegation, e cleanup - voc√™ foca na l√≥gica, n√£o em detalhes de implementa√ß√£o.

**Met√°fora:** Se DOM events s√£o "telefone fixo" (voc√™ liga diretamente para cada elemento), React events s√£o "central telef√¥nica" (React coordena tudo em um ponto, despacha para handlers corretos).

### Contexto Hist√≥rico e Motiva√ß√£o

**Evolu√ß√£o do event handling:**

**1995-2010: DOM Events Nativo**
```html
<!-- Inline handler (m√° pr√°tica) -->
<button onclick="alert('click')">Click</button>

<!-- addEventListener (verboso) -->
<script>
  const btn = document.getElementById('btn');
  btn.addEventListener('click', function() {
    alert('click');
  });
</script>
```

**Problemas:**
- Inconsist√™ncias entre browsers (IE vs outros)
- Memory leaks (esquecer removeEventListener)
- Verboso (querySelector + addEventListener)

**2013 - React SyntheticEvent**
React introduziu sistema unificado:
- **Cross-browser**: Mesma API em todos navegadores
- **Event delegation**: Um listener no root (performance)
- **Declarativo**: Handlers em JSX (`onClick={handler}`)
- **Auto-cleanup**: React remove listeners automaticamente

**2017 - React 17: Mudan√ßas**
- Event delegation mudou de `document` para root do React
- Event pooling removido (simplifica√ß√£o)

**Filosofia:** "Escreva c√≥digo declarativo, React cuida de detalhes imperativos (delegation, cleanup, cross-browser)."

### Problema Fundamental que Resolve

**Sem React (DOM puro):**

```html
<!-- HTML -->
<button id="btn">Click</button>
<input id="input" />
<form id="form">
  <input name="email" />
  <button type="submit">Submit</button>
</form>

<script>
  // ‚ùå Verboso, imperativo
  const btn = document.getElementById('btn');
  const input = document.getElementById('input');
  const form = document.getElementById('form');

  // Click
  btn.addEventListener('click', function() {
    console.log('clicked');
  });

  // Input
  input.addEventListener('input', function(e) {
    console.log(e.target.value);
  });

  // Form submit
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    const email = e.target.elements.email.value;
    console.log('Submit:', email);
  });

  // ‚ùå Cleanup manual necess√°rio (memory leak se esquecer)
  // btn.removeEventListener('click', handler);
</script>
```

**Com React:**

```javascript
function App() {
  const [value, setValue] = useState('');

  const handleClick = () => {
    console.log('clicked');
  };

  const handleChange = (e) => {
    setValue(e.target.value);
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    const email = e.target.elements.email.value;
    console.log('Submit:', email);
  };

  return (
    <div>
      <button onClick={handleClick}>Click</button>
      <input value={value} onChange={handleChange} />
      <form onSubmit={handleSubmit}>
        <input name="email" />
        <button type="submit">Submit</button>
      </form>
    </div>
  );
}

// ‚úÖ Declarativo, limpo, cleanup autom√°tico
```

**Vantagens:**
- Declarativo (handlers em JSX)
- Cleanup autom√°tico (React remove listeners)
- Cross-browser (SyntheticEvent normaliza)
- Type-safe (TypeScript sabe tipo do evento)

### Import√¢ncia no Ecossistema

Event handling √© **fundamental** para:

- **Interatividade**: Toda app precisa responder a usu√°rio
- **Formul√°rios**: Inputs controlados, valida√ß√£o
- **UX**: Click, hover, focus, keyboard navigation
- **Acessibilidade**: Keyboard events, ARIA

---

## üìã Sum√°rio Conceitual

### Aspectos Te√≥ricos Centrais

1. **SyntheticEvent**: Abstra√ß√£o cross-browser de eventos
2. **Declarativo**: Handlers como props JSX
3. **CamelCase**: `onClick`, `onChange` (n√£o `onclick`)
4. **Event delegation**: React usa um listener no root
5. **Auto-cleanup**: Listeners removidos automaticamente

### Pilares Fundamentais

- **onClick**: Eventos de clique
- **onChange**: Mudan√ßas em inputs
- **onSubmit**: Submiss√£o de formul√°rios
- **onFocus/onBlur**: Foco em elementos
- **Eventos de mouse**: onMouseEnter, onMouseLeave, etc.

### Vis√£o Geral das Nuances

- **Binding**: Arrow functions vs m√©todo bound
- **event.preventDefault()**: Prevenir comportamento padr√£o
- **event.stopPropagation()**: Parar bubbling
- **Passar argumentos**: Closures ou currying
- **Performance**: Evitar criar fun√ß√µes inline em loops

---

## üß† Fundamentos Te√≥ricos

### SyntheticEvent: O Que √â

**SyntheticEvent** √© wrapper do React sobre evento nativo.

**Caracter√≠sticas:**
- Mesma interface que evento nativo (`event.target`, `event.preventDefault()`)
- Cross-browser (normaliza diferen√ßas IE/Chrome/Firefox)
- Performance otimizada (event pooling em React 16, auto-reset em React 17+)

**Acesso ao evento nativo:**
```javascript
function handleClick(event) {
  console.log(event); // SyntheticEvent
  console.log(event.nativeEvent); // Evento DOM nativo
}
```

### Event Delegation

**Conceito:** React n√£o anexa listener a cada elemento. Usa **um listener no root**.

**Fluxo:**
```
Usu√°rio clica em <button>
    ‚Üì
Evento bubbling sobe at√© root do React
    ‚Üì
React captura evento no root
    ‚Üì
React identifica elemento alvo
    ‚Üì
React chama handler apropriado
```

**Vantagem:** Performance (menos listeners), mem√≥ria economizada.

### Conven√ß√£o de Nomes

**CamelCase (React) vs lowercase (HTML):**

```javascript
// ‚ùå HTML/DOM
<button onclick="handleClick()">Click</button>

// ‚úÖ React JSX
<button onClick={handleClick}>Click</button>
```

**Eventos comuns:**
- `onClick` (n√£o `onclick`)
- `onChange` (n√£o `onchange`)
- `onSubmit` (n√£o `onsubmit`)
- `onFocus`, `onBlur`, `onMouseEnter`, etc.

---

## üîç An√°lise Conceitual Profunda

### 9.1.1 onClick: Eventos de Clique

```javascript
function ClickExamples() {
  const [count, setCount] = useState(0);

  // Handler simples
  const handleClick = () => {
    console.log('Bot√£o clicado');
  };

  // Handler com evento
  const handleClickWithEvent = (event) => {
    console.log('Target:', event.target);
    console.log('Coordenadas:', event.clientX, event.clientY);
  };

  // Handler com argumento adicional
  const handleClickWithArg = (message) => {
    alert(message);
  };

  return (
    <div>
      {/* Handler direto */}
      <button onClick={handleClick}>
        Clique Simples
      </button>

      {/* Handler com evento */}
      <button onClick={handleClickWithEvent}>
        Clique com Evento
      </button>

      {/* Handler inline (usar com modera√ß√£o) */}
      <button onClick={() => console.log('Inline')}>
        Clique Inline
      </button>

      {/* Handler com argumento */}
      <button onClick={() => handleClickWithArg('Ol√°!')}>
        Clique com Argumento
      </button>

      {/* Atualizar estado */}
      <button onClick={() => setCount(count + 1)}>
        Contador: {count}
      </button>

      {/* M√∫ltiplos handlers (executa em sequ√™ncia) */}
      <button
        onClick={(e) => {
          handleClick();
          handleClickWithEvent(e);
        }}
      >
        M√∫ltiplos Handlers
      </button>
    </div>
  );
}
```

**Exemplo: Toggle**
```javascript
function Toggle() {
  const [isOn, setIsOn] = useState(false);

  return (
    <button onClick={() => setIsOn(!isOn)}>
      {isOn ? 'ON' : 'OFF'}
    </button>
  );
}
```

**Exemplo: Bot√£o disabled**
```javascript
function DisabledButton() {
  const [loading, setLoading] = useState(false);

  const handleClick = async () => {
    setLoading(true);
    await fetch('/api/data');
    setLoading(false);
  };

  return (
    <button onClick={handleClick} disabled={loading}>
      {loading ? 'Carregando...' : 'Carregar'}
    </button>
  );
}
```

### 9.1.2 onChange: Input Events

```javascript
function ChangeExamples() {
  const [text, setText] = useState('');
  const [selected, setSelected] = useState('');
  const [checked, setChecked] = useState(false);

  return (
    <div>
      {/* Input text */}
      <input
        type="text"
        value={text}
        onChange={(e) => setText(e.target.value)}
        placeholder="Digite algo"
      />
      <p>Voc√™ digitou: {text}</p>

      {/* Select */}
      <select value={selected} onChange={(e) => setSelected(e.target.value)}>
        <option value="">Selecione...</option>
        <option value="op1">Op√ß√£o 1</option>
        <option value="op2">Op√ß√£o 2</option>
      </select>
      <p>Selecionado: {selected}</p>

      {/* Checkbox */}
      <label>
        <input
          type="checkbox"
          checked={checked}
          onChange={(e) => setChecked(e.target.checked)}
        />
        Aceito os termos
      </label>
      <p>Checked: {checked ? 'Sim' : 'N√£o'}</p>

      {/* Textarea */}
      <textarea
        value={text}
        onChange={(e) => setText(e.target.value)}
        rows={4}
      />

      {/* Input number */}
      <input
        type="number"
        value={text}
        onChange={(e) => setText(e.target.value)}
      />
    </div>
  );
}
```

**Exemplo: Controlled Input**
```javascript
function ControlledInput() {
  const [email, setEmail] = useState('');
  const [error, setError] = useState('');

  const handleChange = (e) => {
    const value = e.target.value;
    setEmail(value);

    // Valida√ß√£o em tempo real
    if (value && !value.includes('@')) {
      setError('Email inv√°lido');
    } else {
      setError('');
    }
  };

  return (
    <div>
      <input
        type="email"
        value={email}
        onChange={handleChange}
        placeholder="seu@email.com"
      />
      {error && <span style={{ color: 'red' }}>{error}</span>}
    </div>
  );
}
```

**Exemplo: M√∫ltiplos Inputs**
```javascript
function MultipleInputs() {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    age: ''
  });

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  return (
    <form>
      <input
        name="name"
        value={formData.name}
        onChange={handleChange}
        placeholder="Nome"
      />
      <input
        name="email"
        value={formData.email}
        onChange={handleChange}
        placeholder="Email"
      />
      <input
        name="age"
        type="number"
        value={formData.age}
        onChange={handleChange}
        placeholder="Idade"
      />
      <pre>{JSON.stringify(formData, null, 2)}</pre>
    </form>
  );
}
```

### 9.1.3 onSubmit: Form Submission

```javascript
function SubmitExamples() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault(); // ‚ùó Importante: previne reload da p√°gina

    console.log('Form submitted:', { email, password });

    // Enviar para API
    fetch('/api/login', {
      method: 'POST',
      body: JSON.stringify({ email, password })
    });
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        placeholder="Email"
        required
      />
      <input
        type="password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        placeholder="Senha"
        required
      />
      <button type="submit">Entrar</button>
    </form>
  );
}
```

**Exemplo: Valida√ß√£o antes de submit**
```javascript
function ValidatedForm() {
  const [email, setEmail] = useState('');
  const [errors, setErrors] = useState({});

  const validate = () => {
    const newErrors = {};

    if (!email) {
      newErrors.email = 'Email obrigat√≥rio';
    } else if (!email.includes('@')) {
      newErrors.email = 'Email inv√°lido';
    }

    return newErrors;
  };

  const handleSubmit = (e) => {
    e.preventDefault();

    const validationErrors = validate();
    setErrors(validationErrors);

    if (Object.keys(validationErrors).length === 0) {
      console.log('Form v√°lido, enviando...');
      // Enviar
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
      />
      {errors.email && <span>{errors.email}</span>}
      <button type="submit">Enviar</button>
    </form>
  );
}
```

### 9.1.4 onFocus / onBlur: Focus Events

```javascript
function FocusExamples() {
  const [focused, setFocused] = useState(false);
  const [touched, setTouched] = useState(false);

  return (
    <div>
      <input
        onFocus={() => {
          setFocused(true);
          console.log('Input focado');
        }}
        onBlur={() => {
          setFocused(false);
          setTouched(true);
          console.log('Input desfocado');
        }}
        placeholder="Clique aqui"
        style={{
          borderColor: focused ? 'blue' : touched ? 'gray' : 'initial'
        }}
      />
      <p>
        {focused ? 'Focado' : 'N√£o focado'}
        {touched && ' (j√° foi tocado)'}
      </p>
    </div>
  );
}
```

**Exemplo: Valida√ß√£o on blur**
```javascript
function BlurValidation() {
  const [email, setEmail] = useState('');
  const [error, setError] = useState('');
  const [touched, setTouched] = useState(false);

  const handleBlur = () => {
    setTouched(true);

    if (!email.includes('@')) {
      setError('Email inv√°lido');
    } else {
      setError('');
    }
  };

  return (
    <div>
      <input
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        onBlur={handleBlur}
      />
      {touched && error && <span>{error}</span>}
    </div>
  );
}
```

### 9.1.5 Mouse Events

```javascript
function MouseEvents() {
  const [hovered, setHovered] = useState(false);
  const [coords, setCoords] = useState({ x: 0, y: 0 });

  return (
    <div>
      {/* Hover */}
      <button
        onMouseEnter={() => setHovered(true)}
        onMouseLeave={() => setHovered(false)}
        style={{ backgroundColor: hovered ? 'lightblue' : 'white' }}
      >
        {hovered ? 'Hovering!' : 'Hover me'}
      </button>

      {/* Mouse move */}
      <div
        onMouseMove={(e) => {
          setCoords({ x: e.clientX, y: e.clientY });
        }}
        style={{
          width: '300px',
          height: '200px',
          border: '1px solid black'
        }}
      >
        Mouse: {coords.x}, {coords.y}
      </div>

      {/* Double click */}
      <button onDoubleClick={() => alert('Double clicked!')}>
        Double Click Me
      </button>

      {/* Context menu (right click) */}
      <div
        onContextMenu={(e) => {
          e.preventDefault();
          alert('Custom context menu!');
        }}
      >
        Right click here
      </div>
    </div>
  );
}
```

---

## üéØ Aplicabilidade e Contextos

### Event Handler Patterns

**1. Inline arrow function (simples):**
```javascript
<button onClick={() => console.log('click')}>Click</button>
```

**2. Named function (reutiliz√°vel):**
```javascript
const handleClick = () => console.log('click');
<button onClick={handleClick}>Click</button>
```

**3. Com argumento:**
```javascript
const handleClick = (id) => console.log(id);
<button onClick={() => handleClick(123)}>Click</button>
```

**4. Event object:**
```javascript
const handleClick = (event) => {
  console.log(event.target);
};
<button onClick={handleClick}>Click</button>
```

**5. Event + argumento:**
```javascript
const handleClick = (id, event) => {
  console.log(id, event.target);
};
<button onClick={(e) => handleClick(123, e)}>Click</button>
```

---

## ‚ö†Ô∏è Limita√ß√µes e Considera√ß√µes

### Performance: Inline Functions

**‚ùå Evitar em listas:**
```javascript
{items.map(item => (
  <div key={item.id} onClick={() => handleClick(item.id)}>
    {/* Nova fun√ß√£o toda render para CADA item */}
  </div>
))}
```

**‚úÖ Alternativa: useCallback ou data attribute:**
```javascript
const handleClick = useCallback((e) => {
  const id = e.currentTarget.dataset.id;
  console.log(id);
}, []);

{items.map(item => (
  <div key={item.id} data-id={item.id} onClick={handleClick}>
    {/* Mesma fun√ß√£o para todos */}
  </div>
))}
```

### Event Pooling (React 16)

**React 16:** Eventos s√£o reutilizados (pooling).

**Problema:** Acessar evento assincronamente.
```javascript
// ‚ùå React 16
const handleClick = (event) => {
  setTimeout(() => {
    console.log(event.target); // null! (evento foi resetado)
  }, 100);
};
```

**Solu√ß√£o:** `event.persist()` (React 16) ou usar valor imediatamente.
```javascript
// ‚úÖ React 16
const handleClick = (event) => {
  event.persist(); // Mant√©m evento
  setTimeout(() => {
    console.log(event.target); // OK
  }, 100);
};

// ‚úÖ React 17+: pooling removido, n√£o precisa persist()
```

### preventDefault() e stopPropagation()

**preventDefault():** Previne comportamento padr√£o.
```javascript
<a href="/page" onClick={(e) => {
  e.preventDefault(); // N√£o navega
  console.log('Link clicado');
}}>Link</a>
```

**stopPropagation():** Para bubbling.
```javascript
<div onClick={() => console.log('div')}>
  <button onClick={(e) => {
    e.stopPropagation(); // N√£o propaga para div
    console.log('button');
  }}>
    Click
  </button>
</div>
```

---

## üîó Interconex√µes Conceituais

### Rela√ß√£o com Forms

Eventos onChange, onSubmit s√£o base de formul√°rios controlados.

### Rela√ß√£o com State

Event handlers frequentemente atualizam state (setState).

### Rela√ß√£o com Acessibilidade

Keyboard events (onKeyDown) s√£o essenciais para a11y.

---

## üöÄ Evolu√ß√£o e Pr√≥ximos Conceitos

### Progress√£o Natural

```
Event handling b√°sico (onClick, onChange)
    ‚Üì
Keyboard events (onKeyDown)
    ‚Üì
Event handling avan√ßado (preventDefault, stopPropagation)
    ‚Üì
Custom events e delegation
```

---

## üìö Conclus√£o

Event handling no React √© **fundamental** para interatividade. Princ√≠pios:

1. **SyntheticEvent**: Abstra√ß√£o cross-browser
2. **Declarativo**: Handlers em JSX (camelCase)
3. **onClick**: Cliques
4. **onChange**: Inputs
5. **onSubmit**: Formul√°rios (preventDefault!)

**Recomenda√ß√µes:**
- Use camelCase (onClick, n√£o onclick)
- preventDefault() em forms
- Evite inline functions em listas (performance)
- Event handlers sempre recebem SyntheticEvent
- React 17+ n√£o precisa event.persist()

**Dominar event handling = interfaces interativas e responsivas.**
