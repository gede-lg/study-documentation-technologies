# Asset Loading no React 19

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**Asset Loading** no React 19 s√£o **APIs nativas** para carregar recursos (stylesheets, scripts, fonts, imagens) com **lifecycle management integrado**, **preloading inteligente**, e **coordena√ß√£o com Suspense**, permitindo que React **gerencie quando recursos est√£o prontos** e evite FOUC (Flash of Unstyled Content) e race conditions. Conceitualmente, transforma carregamento de assets de **imperativo e manual** (tags `<link>`, `<script>` no HTML) para **declarativo e React-managed**.

### Problema que Resolve

**Antes**:
```jsx
// ‚ùå Manual, sem coordena√ß√£o com React
useEffect(() => {
  const link = document.createElement('link');
  link.rel = 'stylesheet';
  link.href = '/styles.css';
  document.head.appendChild(link);
  // Sem saber quando carregou!
}, []);
```

**React 19**:
```jsx
// ‚úÖ Declarativo, React coordena
import { preload } from 'react-dom';

function Component() {
  preload('/styles.css', { as: 'style' });
  return <div>Content</div>;
}
```

---

## üìã Principais APIs

1. **preload()**: Pr√©-carregar recurso
2. **preinit()**: Pr√©-inicializar e inserir no documento
3. **Suspense para recursos**: Suspender at√© assets carregarem

---

## üîç preload()

### Sintaxe

```jsx
import { preload } from 'react-dom';

preload(href, options);
```

**Par√¢metros**:
- `href`: URL do recurso
- `options`: `{ as: 'style' | 'script' | 'font' | 'image' }`

### Exemplo

```jsx
function Component() {
  // Pr√©-carregar stylesheet
  preload('/styles/theme.css', { as: 'style' });

  // Pr√©-carregar script
  preload('/js/analytics.js', { as: 'script' });

  // Pr√©-carregar font
  preload('/fonts/custom.woff2', { as: 'font', crossOrigin: 'anonymous' });

  return <div>Content</div>;
}
```

---

## üîç preinit()

### Sintaxe

```jsx
import { preinit } from 'react-dom';

preinit(href, options);
```

**Diferen√ßa vs preload()**:
- `preload()`: Apenas baixa, n√£o executa/insere
- `preinit()`: Baixa E insere no documento (executa)

### Exemplo

```jsx
function Component() {
  // Pr√©-inicializar stylesheet (baixa + adiciona ao <head>)
  preinit('/styles/global.css', { as: 'style' });

  // Pr√©-inicializar script (baixa + executa)
  preinit('/js/third-party.js', { as: 'script' });

  return <div>Content</div>;
}
```

---

## üéØ Casos de Uso

### 1. Lazy Load CSS

```jsx
function ThemeProvider({ theme, children }) {
  // Carregar CSS do tema selecionado
  if (theme === 'dark') {
    preinit('/themes/dark.css', { as: 'style' });
  } else {
    preinit('/themes/light.css', { as: 'style' });
  }

  return <div className={theme}>{children}</div>;
}
```

### 2. Route-based Code Splitting

```jsx
function Page() {
  // Pr√©-carregar scripts da rota
  preload('/js/dashboard.js', { as: 'script' });
  preload('/styles/dashboard.css', { as: 'style' });

  return <DashboardContent />;
}
```

### 3. Preload Fonts

```jsx
function App() {
  // Pr√©-carregar fonts cr√≠ticas
  preload('/fonts/inter-var.woff2', {
    as: 'font',
    type: 'font/woff2',
    crossOrigin: 'anonymous'
  });

  return <Layout />;
}
```

---

## ‚ö†Ô∏è Considera√ß√µes

1. **Deduplica√ß√£o**: React deduplica chamadas duplicadas automaticamente
2. **Prioriza√ß√£o**: Assets cr√≠ticos primeiro
3. **Performance**: N√£o abusar - preload apenas o necess√°rio
4. **Browser Support**: APIs modernas (preload, preinit)

---

## üöÄ Conclus√£o

Asset Loading no React 19 **moderniza carregamento de recursos**:

**Principais APIs**:
- `preload()`: Pr√©-carregar sem executar
- `preinit()`: Pr√©-carregar e executar

**Benef√≠cios**:
- Coordena√ß√£o com React
- Evita FOUC
- Performance melhor
- C√≥digo declarativo

Asset Loading transforma gerenciamento de recursos de **manual e propenso a erros** para **declarativo e React-coordenado** - essencial para aplica√ß√µes perform√°ticas.
