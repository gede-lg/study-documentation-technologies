# Actions no React 19

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**Actions** no React 19 s√£o **fun√ß√µes ass√≠ncronas integradas** que gerenciam estados de transi√ß√£o (pending, error, success) **automaticamente**, permitindo submiss√£o de formul√°rios e muta√ß√µes de dados com **progressive enhancement**, **pending states autom√°ticos**, e **integra√ß√£o nativa com formul√°rios HTML**. Conceitualmente, transformam opera√ß√µes ass√≠ncronas de **gerenciamento manual complexo** para **declarativo e autom√°tico** - React cuida de pending, error, optimistic updates.

Na ess√™ncia, Actions s√£o **async operations first-class** - React entende que s√£o ass√≠ncronas e fornece primitivas (useFormState, useFormStatus, useOptimistic) para gerenciar todos os estados automaticamente.

### Problema que Resolve

**Antes (React 18)**:
```jsx
function Form() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError(null);

    try {
      await submitForm(new FormData(e.target));
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      <button disabled={loading}>
        {loading ? 'Submitting...' : 'Submit'}
      </button>
      {error && <div>{error}</div>}
    </form>
  );
}
```

**React 19 com Actions**:
```jsx
function Form() {
  return (
    <form action={submitForm}>
      <SubmitButton /> {/* pending autom√°tico */}
    </form>
  );
}

function SubmitButton() {
  const { pending } = useFormStatus();
  return <button disabled={pending}>{pending ? 'Submitting...' : 'Submit'}</button>;
}
```

---

## üìã Principais Conceitos

1. **Form Actions**: `<form action={asyncFunction}>`
2. **Pending State Autom√°tico**: React rastreia quando action est√° executando
3. **Progressive Enhancement**: Funciona sem JavaScript
4. **useTransition**: Integra√ß√£o com transitions
5. **Error Handling**: Captura erros automaticamente

---

## üîç Form Actions

### Sintaxe B√°sica

```jsx
async function myAction(formData) {
  'use server'; // Server Action (opcional, se no servidor)

  const name = formData.get('name');
  await db.create({ name });
}

<form action={myAction}>
  <input name="name" />
  <button>Submit</button>
</form>
```

### Progressive Enhancement

```jsx
// Funciona SEM JavaScript habilitado
<form action={serverAction}>
  <input name="email" required />
  <button>Subscribe</button>
</form>

// Com JS: Submiss√£o via AJAX, sem reload
// Sem JS: Form submete normalmente (POST), p√°gina recarrega
```

### Pending State com useFormStatus

```jsx
import { useFormStatus } from 'react-dom';

function SubmitButton() {
  const { pending } = useFormStatus();

  return (
    <button type="submit" disabled={pending}>
      {pending ? 'Saving...' : 'Save'}
    </button>
  );
}
```

---

## üéØ useTransition com Actions

```jsx
function Component() {
  const [isPending, startTransition] = useTransition();

  const handleAction = () => {
    startTransition(async () => {
      await someAsyncOperation();
    });
  };

  return (
    <button onClick={handleAction} disabled={isPending}>
      {isPending ? 'Processing...' : 'Process'}
    </button>
  );
}
```

---

## ‚ö†Ô∏è Error Handling

```jsx
function Form() {
  const [state, formAction] = useFormState(submitAction, {});

  return (
    <form action={formAction}>
      {state.error && <div className="error">{state.error}</div>}
      <input name="email" />
      <button>Submit</button>
    </form>
  );
}

async function submitAction(prevState, formData) {
  try {
    await db.create({ email: formData.get('email') });
    return { success: true };
  } catch (error) {
    return { error: error.message };
  }
}
```

---

## üöÄ Conclus√£o

Actions no React 19 **simplificam opera√ß√µes ass√≠ncronas**:

**Principais Features**:
- Form actions nativas
- Pending state autom√°tico
- Progressive enhancement
- Integra√ß√£o com useTransition

**Benef√≠cios**:
- Menos boilerplate
- UX melhor (pending states)
- Funciona sem JS
- C√≥digo mais limpo

Actions transformam formul√°rios e opera√ß√µes ass√≠ncronas de **manual e complexo** para **declarativo e autom√°tico** - essencial para aplica√ß√µes modernas com excelente UX.
