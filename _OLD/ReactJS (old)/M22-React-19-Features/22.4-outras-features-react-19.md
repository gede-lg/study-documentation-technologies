# Outras Features React 19

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**Outras Features React 19** incluem **ref como prop normal** (sem forwardRef), **Context como Provider** (`<Context value={...}>`), **melhorias em error reporting**, **suporte a Document Metadata**, e **otimiza√ß√µes de hydration**. Conceitualmente, representam **simplifica√ß√µes e moderniza√ß√µes** que removem boilerplate, melhoram DX (Developer Experience), e tornam React mais intuitivo.

---

## üìã Principais Features

### 1. ref como Prop Normal

**Antes (React 18)**:
```jsx
const Input = forwardRef((props, ref) => {
  return <input ref={ref} {...props} />;
});
```

**React 19**:
```jsx
function Input({ ref, ...props }) {
  return <input ref={ref} {...props} />;
}
// Ou
function Input(props) {
  return <input {...props} />; // ref inclu√≠do automaticamente
}
```

**Vantagem**: Elimina `forwardRef` - ref √© prop normal.

### 2. Context como Provider

**Antes**:
```jsx
const ThemeContext = createContext();

<ThemeContext.Provider value={theme}>
  <App />
</ThemeContext.Provider>
```

**React 19**:
```jsx
const ThemeContext = createContext();

<ThemeContext value={theme}>
  <App />
</ThemeContext>
```

**Vantagem**: Menos verboso, Context √© Provider direto.

### 3. Document Metadata

```jsx
function BlogPost({ post }) {
  return (
    <>
      <title>{post.title}</title>
      <meta name="description" content={post.description} />
      <meta property="og:title" content={post.title} />

      <article>
        <h1>{post.title}</h1>
        {post.content}
      </article>
    </>
  );
}
```

**Vantagem**: `<title>`, `<meta>` funcionam dentro de componentes (antes s√≥ em `<head>`).

### 4. Cleanup em ref Callbacks

```jsx
// React 19 - ref callback pode retornar cleanup
function Component() {
  const ref = useCallback((node) => {
    if (!node) return;

    const observer = new IntersectionObserver(/* ... */);
    observer.observe(node);

    // Cleanup autom√°tico!
    return () => observer.disconnect();
  }, []);

  return <div ref={ref}>Content</div>;
}
```

**Vantagem**: Cleanup declarativo em ref callbacks.

---

## üîç Melhorias de Error Reporting

### Diff de Errors em Hydration

```jsx
// React 19 mostra DIFF quando hydration mismatch

// Servidor renderiza:
<div>Server content</div>

// Cliente renderiza:
<div>Client content</div>

// Error mostra:
// Expected: "Server content"
// Received: "Client content"
// (antes mostrava erro gen√©rico)
```

### Error Messages Melhores

```jsx
// Mensagens de erro mais claras e acion√°veis
// Incluem links para documenta√ß√£o
// Stack traces mais limpos
```

---

## üéØ useDeferredValue Initial Value

```jsx
// React 19 - initial value opcional
const deferredValue = useDeferredValue(value, initialValue);

// √ötil para SSR - evita mismatch
function Search() {
  const [query, setQuery] = useState('');
  const deferredQuery = useDeferredValue(query, '');

  return <Results query={deferredQuery} />;
}
```

---

## üöÄ Performance: Sibling Prerendering

```jsx
// React 19 pr√©-renderiza siblings de Suspense em paralelo

<div>
  <Suspense fallback={<Loading />}>
    <SlowComponent1 />
  </Suspense>

  <Suspense fallback={<Loading />}>
    <SlowComponent2 />
  </Suspense>
</div>

// React 19 inicia renderiza√ß√£o de ambos simultaneamente
// (React 18 esperava primeiro completar)
```

---

## ‚ö†Ô∏è Breaking Changes

### 1. Errors em Hydration s√£o Fatais

```jsx
// React 19 - hydration mismatch √© erro fatal (n√£o warning)
// Aplica√ß√£o n√£o funciona se houver mismatch
```

### 2. Props `key` Removida

```jsx
// ‚ùå React 18 - key acess√≠vel via props
function Component(props) {
  console.log(props.key); // Funcionava
}

// ‚úÖ React 19 - key n√£o est√° em props
function Component(props) {
  console.log(props.key); // undefined
}
```

---

## üîó Deprecations

1. **forwardRef**: Deprecado (ref √© prop normal)
2. **Legacy Context**: Removido (usar createContext)
3. **String Refs**: Removido (`ref="myRef"`)
4. **Module Pattern Components**: Removido

---

## üöÄ Conclus√£o

Outras Features React 19 **simplificam e modernizam**:

**Principais Mudan√ßas**:
- ref como prop normal
- Context como Provider
- Document metadata em componentes
- Cleanup em ref callbacks
- Error reporting melhor

**Breaking Changes**:
- Hydration mismatch √© fatal
- `key` n√£o acess√≠vel via props
- forwardRef deprecado

**Benef√≠cios**:
- Menos boilerplate
- C√≥digo mais intuitivo
- DX melhor
- Performance otimizada

React 19 remove complexidade hist√≥rica e adiciona features modernas - tornando React mais simples, poderoso e alinhado com web platform.
