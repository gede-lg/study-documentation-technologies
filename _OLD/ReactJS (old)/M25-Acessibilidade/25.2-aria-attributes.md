# ARIA Attributes no React

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**ARIA (Accessible Rich Internet Applications)** s√£o **atributos HTML especiais** que adicionam **sem√¢ntica e comportamento** a elementos, tornando aplica√ß√µes JavaScript din√¢micas **acess√≠veis a screen readers** e outras tecnologias assistivas. Conceitualmente, representa **ponte de acessibilidade** - preenche lacunas quando HTML sem√¢ntico n√£o √© suficiente para apps complexas (modals, tabs, acorde√µes).

### Contexto Hist√≥rico

- **2008**: WAI-ARIA 1.0 (W3C) - primeira vers√£o
- **Problema**: SPAs (React, Angular) quebravam acessibilidade
- **Solu√ß√£o**: ARIA adiciona roles, states, properties
- **2017**: ARIA 1.1 - novos roles
- **2023**: ARIA in HTML - guidelines para uso

### Problema que Resolve

**HTML Sozinho**:
- Sem sem√¢ntica para widgets complexos
- Estados din√¢micos n√£o comunicados
- Rela√ß√µes entre elementos invis√≠veis

**Com ARIA**:
- Screen readers entendem widgets
- Estados comunicados (aberto/fechado, selecionado)
- Rela√ß√µes declaradas (label, description)

---

## üìã Regras de ARIA

### Primeira Regra de ARIA

**"N√£o use ARIA se HTML sem√¢ntico j√° resolve"**

```jsx
// ‚ùå ARIA desnecess√°rio
<div role="button" onClick={handleClick}>Click</div>

// ‚úÖ HTML sem√¢ntico (role impl√≠cito)
<button onClick={handleClick}>Click</button>

// ‚ùå ARIA redundante
<button role="button">Click</button>

// ‚úÖ Sem ARIA redundante
<button>Click</button>
```

### Segunda Regra

**"N√£o mude sem√¢ntica nativa"**

```jsx
// ‚ùå Quebra sem√¢ntica
<h1 role="button">Not a heading!</h1>

// ‚úÖ Use elemento correto
<button>I'm a button</button>
```

### Terceira Regra

**"Todos os elementos ARIA devem ser acess√≠veis via teclado"**

```jsx
// ‚ùå Role sem keyboard
<div role="button" onClick={handleClick}>Click</div>

// ‚úÖ Role com keyboard
<div
  role="button"
  tabIndex={0}
  onClick={handleClick}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleClick();
    }
  }}
>
  Click
</div>
```

### Quarta Regra

**"N√£o use role="presentation" ou aria-hidden em elementos focus√°veis"**

```jsx
// ‚ùå Esconde elemento focus√°vel
<button aria-hidden="true">Click</button>

// ‚úÖ Remove do tab order se precisar esconder
<button tabIndex={-1} style={{ display: 'none' }}>Click</button>
```

---

## üé≠ Roles

### Roles de Landmarks

```jsx
// Navega√ß√£o
<nav role="navigation"> {/* role impl√≠cito */}
  <a href="/">Home</a>
</nav>

// Conte√∫do principal
<main role="main"> {/* role impl√≠cito */}
  Content
</main>

// Banner (header do site)
<header role="banner"> {/* role impl√≠cito no header de <body> */}
  Site header
</header>

// Informa√ß√£o complementar
<aside role="complementary"> {/* role impl√≠cito */}
  Related links
</aside>

// Rodap√©
<footer role="contentinfo"> {/* role impl√≠cito no footer de <body> */}
  Copyright
</footer>

// Regi√£o gen√©rica (com label)
<section aria-label="Comments" role="region">
  Comments section
</section>
```

### Roles de Widgets

```jsx
// Tab interface
<div role="tablist">
  <button role="tab" aria-selected="true">Tab 1</button>
  <button role="tab" aria-selected="false">Tab 2</button>
</div>
<div role="tabpanel">Content 1</div>

// Dialog/Modal
<div role="dialog" aria-labelledby="dialog-title" aria-modal="true">
  <h2 id="dialog-title">Title</h2>
  Content
</div>

// Alert
<div role="alert">
  Error message
</div>

// Progressbar
<div
  role="progressbar"
  aria-valuenow={50}
  aria-valuemin={0}
  aria-valuemax={100}
>
  50%
</div>
```

### Roles de Estrutura

```jsx
// List (quando n√£o usar <ul>)
<div role="list">
  <div role="listitem">Item 1</div>
  <div role="listitem">Item 2</div>
</div>

// Table (quando n√£o usar <table>)
<div role="table">
  <div role="row">
    <div role="columnheader">Name</div>
    <div role="columnheader">Age</div>
  </div>
  <div role="row">
    <div role="cell">John</div>
    <div role="cell">30</div>
  </div>
</div>
```

---

## üè∑Ô∏è Labels e Descriptions

### aria-label

```jsx
// Quando n√£o h√° label vis√≠vel
<button aria-label="Close dialog">
  <XIcon />
</button>

// ‚ùå Redundante se h√° texto vis√≠vel
<button aria-label="Submit">Submit</button>

// ‚úÖ Sem aria-label
<button>Submit</button>
```

### aria-labelledby

```jsx
// Referenciar elemento existente
<div role="dialog" aria-labelledby="dialog-title">
  <h2 id="dialog-title">Confirm Delete</h2>
  Are you sure?
</div>

// M√∫ltiplos IDs (concatena)
<div aria-labelledby="first second">
  Content
</div>
<h2 id="first">Part 1</h2>
<p id="second">Part 2</p>
// Screen reader: "Part 1 Part 2"
```

### aria-describedby

```jsx
// Descri√ß√£o adicional
<button aria-describedby="help-text">
  Submit
</button>
<p id="help-text">This will save your changes permanently</p>

// Input com erro
<input
  type="email"
  aria-invalid={hasError}
  aria-describedby={hasError ? "error-message" : undefined}
/>
{hasError && (
  <p id="error-message" role="alert">
    Please enter a valid email
  </p>
)}
```

---

## üîÑ States e Properties

### aria-expanded

```jsx
// Acorde√£o/Dropdown
function Accordion({ title, children }) {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div>
      <button
        aria-expanded={isOpen}
        onClick={() => setIsOpen(!isOpen)}
      >
        {title}
      </button>
      {isOpen && (
        <div role="region">
          {children}
        </div>
      )}
    </div>
  );
}
```

### aria-selected

```jsx
// Tabs
function Tabs({ tabs }) {
  const [selected, setSelected] = useState(0);

  return (
    <div>
      <div role="tablist">
        {tabs.map((tab, i) => (
          <button
            key={i}
            role="tab"
            aria-selected={i === selected}
            onClick={() => setSelected(i)}
          >
            {tab.title}
          </button>
        ))}
      </div>
      <div role="tabpanel">
        {tabs[selected].content}
      </div>
    </div>
  );
}
```

### aria-checked

```jsx
// Checkbox customizado
function Checkbox({ checked, onChange, label }) {
  return (
    <div
      role="checkbox"
      aria-checked={checked}
      tabIndex={0}
      onClick={() => onChange(!checked)}
      onKeyDown={(e) => {
        if (e.key === ' ') {
          e.preventDefault();
          onChange(!checked);
        }
      }}
    >
      <span>{checked ? '‚òë' : '‚òê'}</span>
      {label}
    </div>
  );
}
```

### aria-pressed

```jsx
// Toggle button
function ToggleButton() {
  const [pressed, setPressed] = useState(false);

  return (
    <button
      aria-pressed={pressed}
      onClick={() => setPressed(!pressed)}
    >
      {pressed ? 'Muted' : 'Unmuted'}
    </button>
  );
}
```

### aria-disabled

```jsx
// Disabled (quando n√£o pode usar disabled real)
<div
  role="button"
  aria-disabled={isDisabled}
  tabIndex={isDisabled ? -1 : 0}
  onClick={isDisabled ? undefined : handleClick}
  style={{ opacity: isDisabled ? 0.5 : 1 }}
>
  Click me
</div>

// ‚úÖ Prefer√≠vel: use disabled nativo
<button disabled={isDisabled}>Click me</button>
```

### aria-invalid e aria-required

```jsx
// Formul√°rio com valida√ß√£o
function EmailInput() {
  const [email, setEmail] = useState('');
  const [touched, setTouched] = useState(false);
  const isInvalid = touched && !email.includes('@');

  return (
    <div>
      <label htmlFor="email">
        Email
        <span aria-label="required"> *</span>
      </label>
      <input
        id="email"
        type="email"
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        onBlur={() => setTouched(true)}
        aria-required="true"
        aria-invalid={isInvalid}
        aria-describedby={isInvalid ? "email-error" : undefined}
      />
      {isInvalid && (
        <p id="email-error" role="alert">
          Please enter a valid email
        </p>
      )}
    </div>
  );
}
```

---

## üîç Live Regions

### aria-live

```jsx
// Notifica√ß√µes
function Notifications() {
  const [message, setMessage] = useState('');

  return (
    <div
      role="status"
      aria-live="polite"
      aria-atomic="true"
    >
      {message}
    </div>
  );
}

// aria-live values:
// - "off" (padr√£o) - n√£o anuncia
// - "polite" - anuncia quando usu√°rio terminar
// - "assertive" - interrompe e anuncia
```

### role="alert"

```jsx
// Erro urgente
function ErrorMessage({ error }) {
  if (!error) return null;

  return (
    <div role="alert">
      {error}
    </div>
  );
}
// role="alert" = aria-live="assertive" + aria-atomic="true"
```

### aria-atomic

```jsx
// Anuncia regi√£o inteira ou apenas mudan√ßas
<div aria-live="polite" aria-atomic="true">
  {/* Anuncia TODO o conte√∫do quando mudar */}
  Loading: {progress}%
</div>

<div aria-live="polite" aria-atomic="false">
  {/* Anuncia apenas o que mudou */}
  <p>Static text</p>
  <p>{dynamicValue}</p>
</div>
```

### aria-relevant

```jsx
// Especifica que tipo de mudan√ßa anunciar
<div
  aria-live="polite"
  aria-relevant="additions text"
>
  {/* Anuncia apenas adi√ß√µes e mudan√ßas de texto */}
  {/* N√£o anuncia remo√ß√µes */}
</div>

// Valores:
// - "additions" - n√≥s adicionados
// - "removals" - n√≥s removidos
// - "text" - mudan√ßas de texto
// - "all" - tudo
```

---

## üéØ ARIA Patterns Comuns

### Modal Dialog

```jsx
function Modal({ isOpen, onClose, title, children }) {
  const modalRef = useRef(null);

  useEffect(() => {
    if (isOpen) {
      modalRef.current?.focus();
    }
  }, [isOpen]);

  if (!isOpen) return null;

  return (
    <div
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
      ref={modalRef}
      tabIndex={-1}
    >
      <h2 id="modal-title">{title}</h2>
      {children}
      <button onClick={onClose}>Close</button>
    </div>
  );
}
```

### Combobox (Autocomplete)

```jsx
function Combobox({ options, value, onChange }) {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div>
      <input
        type="text"
        role="combobox"
        aria-expanded={isOpen}
        aria-autocomplete="list"
        aria-controls="listbox"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        onFocus={() => setIsOpen(true)}
      />
      {isOpen && (
        <ul id="listbox" role="listbox">
          {options.map((option, i) => (
            <li
              key={i}
              role="option"
              aria-selected={option === value}
              onClick={() => onChange(option)}
            >
              {option}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

### Menu

```jsx
function Menu({ items }) {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div>
      <button
        aria-haspopup="true"
        aria-expanded={isOpen}
        onClick={() => setIsOpen(!isOpen)}
      >
        Menu
      </button>
      {isOpen && (
        <ul role="menu">
          {items.map((item, i) => (
            <li key={i} role="menuitem">
              <button onClick={item.onClick}>
                {item.label}
              </button>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

---

## üöÄ Conclus√£o

ARIA Attributes incluem:
- **Roles**: dialog, tab, tablist, alert, progressbar
- **Labels**: aria-label, aria-labelledby, aria-describedby
- **States**: aria-expanded, aria-selected, aria-checked
- **Properties**: aria-required, aria-invalid, aria-disabled
- **Live Regions**: aria-live, role="alert", aria-atomic

**Regras**: Use HTML sem√¢ntico primeiro, ARIA apenas quando necess√°rio. Sempre adicione suporte a teclado quando usar roles interativos.
