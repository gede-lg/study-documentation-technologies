# Form & Animation Libraries

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**Form Libraries** s√£o ferramentas para **gerenciar estado de formul√°rios**, **valida√ß√£o**, **error handling** e **submission**, enquanto **Animation Libraries** fornecem **APIs declarativas** para criar **anima√ß√µes perform√°ticas** e **transi√ß√µes fluidas**. Conceitualmente, representam **solu√ß√µes especializadas** - formul√°rios e anima√ß√µes s√£o problemas complexos que aparecem em todo app, merecendo abstra√ß√µes dedicadas.

### Problema que Resolve

**Forms sem Library**:
```tsx
// ‚ùå Boilerplate manual
const [name, setName] = useState('');
const [email, setEmail] = useState('');
const [errors, setErrors] = useState({});

const handleSubmit = (e) => {
  e.preventDefault();
  const newErrors = {};

  if (!name) newErrors.name = 'Required';
  if (!email.includes('@')) newErrors.email = 'Invalid';

  if (Object.keys(newErrors).length > 0) {
    setErrors(newErrors);
    return;
  }

  // Submit...
};

// Multiplicado por 20 campos = üî• pesadelo
```

**Animations sem Library**:
```tsx
// ‚ùå CSS transitions + state manual
const [isOpen, setIsOpen] = useState(false);

<div className={isOpen ? 'modal-open' : 'modal-closed'}>
  // CSS transitions limitadas, sem orchestration
</div>
```

---

## üìù React Hook Form

### Por Que React Hook Form?

```
Mais popular (2024):
‚úÖ Performance (uncontrolled components)
‚úÖ Valida√ß√£o integrada (Zod, Yup, etc)
‚úÖ API minimalista
‚úÖ TypeScript excelente
‚úÖ Bundle pequeno (9KB)
```

### Setup

```bash
npm install react-hook-form
```

### Basic Usage

```tsx
import { useForm } from 'react-hook-form';

type FormData = {
  name: string;
  email: string;
  age: number;
};

function MyForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting }
  } = useForm<FormData>();

  const onSubmit = async (data: FormData) => {
    await fetch('/api/users', {
      method: 'POST',
      body: JSON.stringify(data)
    });
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input
        {...register('name', {
          required: 'Name is required',
          minLength: { value: 3, message: 'Min 3 chars' }
        })}
      />
      {errors.name && <span>{errors.name.message}</span>}

      <input
        type="email"
        {...register('email', {
          required: 'Email is required',
          pattern: {
            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
            message: 'Invalid email'
          }
        })}
      />
      {errors.email && <span>{errors.email.message}</span>}

      <input
        type="number"
        {...register('age', {
          valueAsNumber: true,
          min: { value: 18, message: 'Must be 18+' }
        })}
      />
      {errors.age && <span>{errors.age.message}</span>}

      <button type="submit" disabled={isSubmitting}>
        {isSubmitting ? 'Submitting...' : 'Submit'}
      </button>
    </form>
  );
}
```

### Schema Validation (Zod)

```bash
npm install @hookform/resolvers zod
```

```tsx
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const schema = z.object({
  name: z.string().min(3, 'Min 3 chars').max(50),
  email: z.string().email('Invalid email'),
  age: z.number().min(18, 'Must be 18+').max(120),
  password: z.string().min(8, 'Min 8 chars'),
  confirmPassword: z.string()
}).refine((data) => data.password === data.confirmPassword, {
  message: "Passwords don't match",
  path: ['confirmPassword']
});

type FormData = z.infer<typeof schema>;

function SignUpForm() {
  const {
    register,
    handleSubmit,
    formState: { errors }
  } = useForm<FormData>({
    resolver: zodResolver(schema)
  });

  const onSubmit = (data: FormData) => {
    console.log(data); // Type-safe!
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register('name')} />
      {errors.name && <span>{errors.name.message}</span>}

      <input type="email" {...register('email')} />
      {errors.email && <span>{errors.email.message}</span>}

      <input type="number" {...register('age', { valueAsNumber: true })} />
      {errors.age && <span>{errors.age.message}</span>}

      <input type="password" {...register('password')} />
      {errors.password && <span>{errors.password.message}</span>}

      <input type="password" {...register('confirmPassword')} />
      {errors.confirmPassword && <span>{errors.confirmPassword.message}</span>}

      <button type="submit">Sign Up</button>
    </form>
  );
}
```

### Watch & Control

```tsx
function DynamicForm() {
  const { register, watch, setValue, control } = useForm();

  // Watch field value
  const country = watch('country');

  // Conditional fields
  return (
    <form>
      <select {...register('country')}>
        <option value="US">United States</option>
        <option value="BR">Brazil</option>
      </select>

      {country === 'US' && (
        <input {...register('state')} placeholder="State" />
      )}

      {country === 'BR' && (
        <input {...register('estado')} placeholder="Estado" />
      )}

      <button
        type="button"
        onClick={() => setValue('country', 'BR')}
      >
        Set Brazil
      </button>
    </form>
  );
}
```

### Field Array

```tsx
import { useFieldArray } from 'react-hook-form';

function TodoForm() {
  const { register, control } = useForm({
    defaultValues: {
      todos: [{ task: '' }]
    }
  });

  const { fields, append, remove } = useFieldArray({
    control,
    name: 'todos'
  });

  return (
    <form>
      {fields.map((field, index) => (
        <div key={field.id}>
          <input {...register(`todos.${index}.task`)} />
          <button type="button" onClick={() => remove(index)}>
            Remove
          </button>
        </div>
      ))}

      <button
        type="button"
        onClick={() => append({ task: '' })}
      >
        Add Todo
      </button>
    </form>
  );
}
```

**Pros**:
- ‚úÖ Performance (uncontrolled)
- ‚úÖ Valida√ß√£o poderosa (Zod/Yup)
- ‚úÖ Bundle pequeno (9KB)
- ‚úÖ TypeScript excelente

**Cons**:
- ‚ùå Uncontrolled (pode confundir iniciantes)

---

## üé® Framer Motion

### Por Que Framer Motion?

```
Mais popular (2024):
‚úÖ API declarativa simples
‚úÖ Gestures built-in (drag, tap, hover)
‚úÖ Layout animations autom√°ticas
‚úÖ Orchestration (sequ√™ncias)
‚úÖ 60 FPS garantido
```

### Setup

```bash
npm install framer-motion
```

### Basic Animations

```tsx
import { motion } from 'framer-motion';

function FadeIn() {
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      exit={{ opacity: 0 }}
      transition={{ duration: 0.5 }}
    >
      Fade in content
    </motion.div>
  );
}

function SlideIn() {
  return (
    <motion.div
      initial={{ x: -100, opacity: 0 }}
      animate={{ x: 0, opacity: 1 }}
      transition={{ type: 'spring', stiffness: 100 }}
    >
      Slide in content
    </motion.div>
  );
}

function Scale() {
  return (
    <motion.button
      whileHover={{ scale: 1.1 }}
      whileTap={{ scale: 0.95 }}
    >
      Hover me
    </motion.button>
  );
}
```

### Variants (Orchestration)

```tsx
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      delayChildren: 0.3,
      staggerChildren: 0.2
    }
  }
};

const itemVariants = {
  hidden: { y: 20, opacity: 0 },
  visible: {
    y: 0,
    opacity: 1
  }
};

function StaggerList() {
  return (
    <motion.ul
      variants={containerVariants}
      initial="hidden"
      animate="visible"
    >
      {[1, 2, 3, 4, 5].map(i => (
        <motion.li key={i} variants={itemVariants}>
          Item {i}
        </motion.li>
      ))}
    </motion.ul>
  );
}

// Resultado:
// - Container fades in
// - Aguarda 0.3s (delayChildren)
// - Items aparecem um por vez, 0.2s entre cada (stagger)
```

### AnimatePresence (Exit Animations)

```tsx
import { AnimatePresence, motion } from 'framer-motion';

function Modal({ isOpen, onClose }) {
  return (
    <AnimatePresence>
      {isOpen && (
        <>
          <motion.div
            className="backdrop"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            onClick={onClose}
          />

          <motion.div
            className="modal"
            initial={{ scale: 0.8, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            exit={{ scale: 0.8, opacity: 0 }}
            transition={{ type: 'spring', damping: 25, stiffness: 300 }}
          >
            <h2>Modal Content</h2>
            <button onClick={onClose}>Close</button>
          </motion.div>
        </>
      )}
    </AnimatePresence>
  );
}
```

### Layout Animations

```tsx
function LayoutExample() {
  const [isExpanded, setIsExpanded] = useState(false);

  return (
    <motion.div
      layout
      style={{
        width: isExpanded ? 400 : 200,
        height: isExpanded ? 300 : 100
      }}
      onClick={() => setIsExpanded(!isExpanded)}
    >
      Click to expand
    </motion.div>
  );
}

// layout prop ‚Üí Anima mudan√ßas de layout automaticamente! ‚ú®
// Funciona com flex, grid, position changes
```

### Drag & Gestures

```tsx
function Draggable() {
  return (
    <motion.div
      drag
      dragConstraints={{ left: 0, right: 300, top: 0, bottom: 300 }}
      dragElastic={0.2}
      whileDrag={{ scale: 1.1 }}
    >
      Drag me!
    </motion.div>
  );
}

function Tap() {
  return (
    <motion.button
      whileTap={{ scale: 0.9 }}
      onTap={() => console.log('Tapped!')}
    >
      Tap me
    </motion.button>
  );
}
```

### Scroll Animations

```tsx
import { motion, useScroll, useTransform } from 'framer-motion';

function ParallaxSection() {
  const { scrollYProgress } = useScroll();
  const y = useTransform(scrollYProgress, [0, 1], ['0%', '50%']);

  return (
    <motion.div style={{ y }}>
      Parallax content
    </motion.div>
  );
}

function FadeInOnScroll() {
  const { scrollYProgress } = useScroll();
  const opacity = useTransform(scrollYProgress, [0, 0.5, 1], [0, 1, 0]);

  return (
    <motion.div style={{ opacity }}>
      Fades in/out on scroll
    </motion.div>
  );
}
```

**Pros**:
- ‚úÖ API declarativa simples
- ‚úÖ Gestures built-in
- ‚úÖ Layout animations autom√°ticas
- ‚úÖ 60 FPS garantido

**Cons**:
- ‚ùå Bundle size (25KB gzipped)

---

## üé≠ Outras Libraries

### Formik (Form - Legacy)

```tsx
import { Formik, Form, Field, ErrorMessage } from 'formik';
import * as Yup from 'yup';

const schema = Yup.object({
  email: Yup.string().email().required(),
  password: Yup.string().min(8).required()
});

function LoginForm() {
  return (
    <Formik
      initialValues={{ email: '', password: '' }}
      validationSchema={schema}
      onSubmit={(values) => console.log(values)}
    >
      <Form>
        <Field name="email" type="email" />
        <ErrorMessage name="email" component="div" />

        <Field name="password" type="password" />
        <ErrorMessage name="password" component="div" />

        <button type="submit">Submit</button>
      </Form>
    </Formik>
  );
}
```

**Pros**: ‚úÖ Completo, maduro
**Cons**: ‚ùå Controlled (re-renders), bundle maior

### React Spring (Animation)

```tsx
import { useSpring, animated } from '@react-spring/web';

function FadeIn() {
  const styles = useSpring({
    from: { opacity: 0 },
    to: { opacity: 1 }
  });

  return <animated.div style={styles}>Content</animated.div>;
}
```

**Pros**: ‚úÖ Physics-based (realista)
**Cons**: ‚ùå API menos declarativa

### GSAP (Animation - Pro)

```tsx
import { useGSAP } from '@gsap/react';
import gsap from 'gsap';

function Timeline() {
  const container = useRef(null);

  useGSAP(() => {
    gsap.timeline()
      .to('.box1', { x: 100, duration: 1 })
      .to('.box2', { x: 100, duration: 1 }, '-=0.5') // overlap
      .to('.box3', { x: 100, duration: 1 });
  }, { scope: container });

  return (
    <div ref={container}>
      <div className="box1" />
      <div className="box2" />
      <div className="box3" />
    </div>
  );
}
```

**Pros**: ‚úÖ Mais poderoso, timeline complexas
**Cons**: ‚ùå Imperativo (n√£o declarativo), paid features

---

## üìä Compara√ß√£o

### Form Libraries

```
Library         | Bundle | Performance | Validation | Learning Curve
----------------|--------|-------------|------------|----------------
React Hook Form | 9KB    | ‚ö°‚ö°‚ö°       | ‚úÖ (Zod)   | ‚úÖ F√°cil
Formik          | 15KB   | ‚ö°          | ‚úÖ (Yup)   | ‚úÖ F√°cil
TanStack Form   | 13KB   | ‚ö°‚ö°‚ö°       | ‚úÖ         | üü° M√©dia
```

### Animation Libraries

```
Library       | Bundle | API         | Features      | Learning Curve
--------------|--------|-------------|---------------|----------------
Framer Motion | 25KB   | Declarativa | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê     | ‚úÖ F√°cil
React Spring  | 20KB   | Hook-based  | ‚≠ê‚≠ê‚≠ê‚≠ê       | üü° M√©dia
GSAP          | 30KB   | Imperativa  | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê   | üî¥ Dif√≠cil
CSS Animations| 0KB    | CSS         | ‚≠ê‚≠ê          | ‚úÖ F√°cil
```

---

## üéØ Quando Usar Cada Um

### Forms

```
React Hook Form:
‚úÖ Maioria dos casos
‚úÖ Performance cr√≠tica
‚úÖ TypeScript + Zod
‚úÖ Forms complexos
‚ùå Simplicidade extrema (use controlled)

Formik:
‚úÖ Legacy projects
‚úÖ Prefer√™ncia por controlled
‚ùå Novos projetos (use React Hook Form)

Native (controlled):
‚úÖ Forms muito simples (2-3 campos)
‚úÖ Real-time validation visual
‚ùå Forms complexos
```

### Animations

```
Framer Motion:
‚úÖ Maioria dos casos
‚úÖ Gestures (drag, tap)
‚úÖ Layout animations
‚úÖ Page transitions
‚ùå Anima√ß√µes CSS simples

React Spring:
‚úÖ Physics-based animations
‚úÖ Prefer√™ncia por hooks
‚ùå Simplicidade (use Framer)

GSAP:
‚úÖ Timelines complexas
‚úÖ SVG animations
‚úÖ Professional animations
‚ùå Bundle size cr√≠tico

CSS Animations:
‚úÖ Anima√ß√µes simples (fade, slide)
‚úÖ Bundle size cr√≠tico
‚ùå Orchestration complexa
```

---

## üöÄ Conclus√£o

Form & Animation Libraries incluem:

**Forms**:
- **React Hook Form**: Uncontrolled, performance, Zod/Yup
- **Formik**: Controlled, maduro, legacy
- **TanStack Form**: Novo, framework-agnostic

**Animations**:
- **Framer Motion**: Declarativo, gestures, layout animations
- **React Spring**: Physics-based, hooks
- **GSAP**: Professional, timelines, SVG

**Recomenda√ß√£o 2024**:
- Forms: **React Hook Form + Zod** - performance + type-safety
- Animations: **Framer Motion** - API simples + features completas

**Importante**:
- Forms simples (2-3 campos) ‚Üí Controlled nativo
- Anima√ß√µes simples (fade/slide) ‚Üí CSS transitions
- Use libraries apenas quando complexidade justifica!

N√£o adicione library se problema pode ser resolvido com 10 linhas de c√≥digo!
