# Versionamento e Controle de Vers√£o

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**Versionamento** √© a pr√°tica de **gerenciar mudan√ßas no c√≥digo** atrav√©s de **sistemas de controle de vers√£o** (Git), permitindo **rastreabilidade**, **colabora√ß√£o** e **revers√£o de mudan√ßas**. Conceitualmente, representa **m√°quina do tempo do c√≥digo** - cada commit √© snapshot do projeto, permitindo voltar a qualquer ponto da hist√≥ria.

### Problema que Resolve

**Sem Controle de Vers√£o**:
- C√≥digo perdido (sem backup)
- Mudan√ßas n√£o rastreadas
- Conflitos ao colaborar
- Imposs√≠vel reverter bugs

**Com Controle de Vers√£o**:
- Hist√≥rico completo de mudan√ßas
- Rastreabilidade (quem, quando, por qu√™)
- Merge autom√°tico de colabora√ß√µes
- Reverter qualquer mudan√ßa

---

## üå≥ Git - Fundamentos

### Fluxo B√°sico

```bash
# 1. Inicializar reposit√≥rio
git init

# 2. Verificar status
git status

# 3. Adicionar arquivos para staging
git add .                    # Todos os arquivos
git add src/App.tsx          # Arquivo espec√≠fico
git add src/*.tsx            # Padr√£o

# 4. Commit
git commit -m "feat: add user authentication"

# 5. Ver hist√≥rico
git log
git log --oneline
git log --graph --all

# 6. Ver mudan√ßas
git diff                     # Unstaged changes
git diff --staged            # Staged changes
git diff HEAD~1              # Comparar com commit anterior
```

### Branches

```bash
# Criar branch
git branch feature/user-profile
git checkout feature/user-profile

# Ou criar e mudar em um comando
git checkout -b feature/user-profile

# Listar branches
git branch
git branch -a                # Incluindo remotas

# Mudar de branch
git checkout main

# Deletar branch
git branch -d feature/user-profile
git branch -D feature/user-profile # Force delete

# Renomear branch
git branch -m old-name new-name
```

---

## üîÄ Git Flow

### Branches Principais

```
main/master     ‚Üê Produ√ß√£o (sempre est√°vel)
develop         ‚Üê Desenvolvimento (integra√ß√£o)

feature/*       ‚Üê Features novas
bugfix/*        ‚Üê Bug fixes
hotfix/*        ‚Üê Hotfixes de produ√ß√£o
release/*       ‚Üê Prepara√ß√£o de release
```

### Feature Branch Workflow

```bash
# 1. Criar feature branch de develop
git checkout develop
git pull origin develop
git checkout -b feature/user-authentication

# 2. Desenvolver feature
# ... fazer mudan√ßas ...
git add .
git commit -m "feat: add login form"
git commit -m "feat: add signup form"
git commit -m "feat: add password reset"

# 3. Atualizar com develop (caso outros commitaram)
git checkout develop
git pull origin develop
git checkout feature/user-authentication
git rebase develop   # Ou git merge develop

# 4. Push feature branch
git push origin feature/user-authentication

# 5. Criar Pull Request (GitHub/GitLab)
# ...

# 6. Ap√≥s merge, deletar branch
git checkout develop
git pull origin develop
git branch -d feature/user-authentication
```

### Hotfix Workflow

```bash
# 1. Criar hotfix de main
git checkout main
git pull origin main
git checkout -b hotfix/fix-payment-bug

# 2. Corrigir bug
git add .
git commit -m "fix: resolve payment processing error"

# 3. Merge para main E develop
git checkout main
git merge hotfix/fix-payment-bug
git push origin main

git checkout develop
git merge hotfix/fix-payment-bug
git push origin develop

# 4. Tag de vers√£o
git tag -a v1.2.1 -m "Hotfix: payment bug"
git push origin v1.2.1

# 5. Deletar hotfix branch
git branch -d hotfix/fix-payment-bug
```

---

## üìù Conventional Commits

### Formato

```
<type>(<scope>): <subject>

<body>

<footer>
```

### Types

```bash
feat:     Nova feature
fix:      Bug fix
docs:     Documenta√ß√£o
style:    Formata√ß√£o (n√£o afeta c√≥digo)
refactor: Refatora√ß√£o
perf:     Performance
test:     Testes
chore:    Build/config
revert:   Revert commit anterior
```

### Exemplos

```bash
# Feature
git commit -m "feat: add user authentication"
git commit -m "feat(auth): add OAuth login"

# Fix
git commit -m "fix: resolve memory leak in useEffect"
git commit -m "fix(cart): calculate total correctly"

# Breaking change
git commit -m "feat!: change API response format

BREAKING CHANGE: API now returns { data, meta } instead of flat object"

# Multiple lines
git commit -m "feat: add product search

- Add search input component
- Implement debounce
- Add search results display
- Add loading state

Closes #123"
```

### Commitlint

```bash
npm install --save-dev @commitlint/cli @commitlint/config-conventional
```

```javascript
// commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional']
};
```

```bash
# Husky hook
npx husky add .husky/commit-msg 'npx --no commitlint --edit "$1"'
```

---

## üè∑Ô∏è Semantic Versioning

### Formato: MAJOR.MINOR.PATCH

```
1.2.3
‚îÇ ‚îÇ ‚îî‚îÄ PATCH (bug fixes)
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ MINOR (new features, backwards compatible)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ MAJOR (breaking changes)
```

### Incrementar Vers√£o

```bash
# PATCH (1.0.0 ‚Üí 1.0.1)
- Bug fixes
- Small improvements
- No new features

# MINOR (1.0.1 ‚Üí 1.1.0)
- New features
- Backwards compatible
- Deprecations (with warnings)

# MAJOR (1.1.0 ‚Üí 2.0.0)
- Breaking changes
- Remove deprecated features
- API changes
```

### Tags

```bash
# Criar tag
git tag -a v1.2.0 -m "Release v1.2.0: Add user profile"

# Listar tags
git tag
git tag -l "v1.*"

# Push tags
git push origin v1.2.0
git push origin --tags  # Todas as tags

# Checkout tag
git checkout v1.2.0

# Deletar tag
git tag -d v1.2.0
git push origin :refs/tags/v1.2.0  # Remota
```

---

## üîÑ Merge vs Rebase

### Merge (Preserva Hist√≥rico)

```bash
git checkout main
git merge feature/user-auth

# Cria merge commit
#   main:    A---B---C---M
#                     \ /
#   feature:           D---E
```

**Pros**: Hist√≥rico completo, f√°cil reverter
**Cons**: Hist√≥rico polu√≠do com merge commits

### Rebase (Hist√≥rico Linear)

```bash
git checkout feature/user-auth
git rebase main

# Reaplica commits em cima de main
#   main:    A---B---C
#   feature:             D'---E'
```

**Pros**: Hist√≥rico linear e limpo
**Cons**: Reescreve hist√≥rico (n√£o fazer em branches p√∫blicas!)

### Interactive Rebase

```bash
# Reorganizar √∫ltimos 3 commits
git rebase -i HEAD~3

# Editor abre com:
pick abc123 feat: add login
pick def456 fix: typo
pick ghi789 feat: add signup

# Modificar para:
pick abc123 feat: add login
squash def456 fix: typo    # Junta com anterior
reword ghi789 feat: add signup  # Edita mensagem
```

---

## üîç .gitignore

### Padr√£o React

```bash
# .gitignore
# Dependencies
node_modules/
/.pnp
.pnp.js

# Testing
coverage/
.nyc_output/

# Build
dist/
build/
.next/
out/

# Environment
.env
.env.local
.env.*.local

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# Logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Cache
.cache/
.parcel-cache/
.eslintcache
```

---

## üöÄ Conclus√£o

Versionamento inclui:
- **Git Basics**: add, commit, branch, merge
- **Git Flow**: feature/, hotfix/, release/ branches
- **Conventional Commits**: feat:, fix:, docs:, etc
- **Semantic Versioning**: MAJOR.MINOR.PATCH
- **Tags**: v1.2.3 para releases
- **Merge vs Rebase**: Preservar hist√≥ria vs linear
- **.gitignore**: N√£o versionar node_modules, .env, dist

**Best Practices**:
- Commits pequenos e frequentes
- Mensagens descritivas (Conventional Commits)
- Feature branches (n√£o commitar direto em main)
- Pull antes de push
- Code review via Pull Requests

Git √© funda√ß√£o de colabora√ß√£o moderna - dominar √© essencial.
