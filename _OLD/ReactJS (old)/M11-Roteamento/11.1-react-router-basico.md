# React Router B√°sico

## üéØ Introdu√ß√£o e Defini√ß√£o

### Defini√ß√£o Conceitual

**React Router** √© a biblioteca **de facto** para roteamento client-side em React. Permite criar **Single Page Applications (SPAs)** onde navega√ß√£o entre p√°ginas ocorre **sem reload**, mantendo estado da aplica√ß√£o. O roteamento mapeia **URLs** para **componentes React**, criando experi√™ncia fluida onde apenas conte√∫do necess√°rio re-renderiza.

Roteamento client-side significa que **JavaScript controla navega√ß√£o**: ao clicar link, Router intercepta, atualiza URL via History API, e renderiza componente correspondente - tudo sem requisi√ß√£o ao servidor. Trade-off: SEO inicial comprometido (resolvido com SSR), mas UX superior (navega√ß√£o instant√¢nea, transi√ß√µes suaves, estado preservado).

**Filosofia:** "URLs are state." Cada rota representa estado da aplica√ß√£o. URL `/products/123` n√£o √© apenas "endere√ßo" - √© **declara√ß√£o de intent** (usu√°rio quer ver produto 123). Router traduz URLs em UI.

### Import√¢ncia no Ecossistema

React Router √© **essencial** para:

- **SPAs multi-p√°gina**: Apps com m√∫ltiplas views
- **Deep linking**: URLs compartilh√°veis (ex: `/user/42`)
- **Browser navigation**: Back/Forward buttons funcionam
- **SEO**: URLs distintas para crawlers

**Contexto:** React **n√£o** tem roteamento built-in (√© biblioteca, n√£o framework). React Router preenche essa lacuna desde 2014, com **50k+ stars** no GitHub. Vers√£o 6 (atual) reimaginou API para ser mais declarativa e simples.

---

## üìã Sum√°rio Conceitual

### T√≥picos Cobertos

1. **Setup**: Instala√ß√£o e BrowserRouter
2. **Routes & Route**: Definir rotas
3. **Link & NavLink**: Navega√ß√£o declarativa
4. **Estrutura b√°sica**: Layout e organiza√ß√£o

---

## üîç Fundamentos Te√≥ricos

### Client-Side Routing vs Server-Side

**Server-Side (tradicional):**
```
User clica link ‚Üí Browser requisita nova p√°gina ‚Üí Servidor responde HTML completo ‚Üí Full reload
```

**Client-Side (React Router):**
```
User clica link ‚Üí Router intercepta ‚Üí Atualiza URL (History API) ‚Üí Re-renderiza componente ‚Üí Zero reload
```

### History API

React Router usa **History API** (HTML5):

```javascript
// Navegar sem reload
window.history.pushState({}, '', '/about');

// Voltar/Avan√ßar
window.history.back();
window.history.forward();
```

React Router abstrai essa API com interface declarativa.

### Tipos de Router

**BrowserRouter:**
- URLs "normais": `/about`, `/products/123`
- Requer configura√ß√£o no servidor (todas URLs ‚Üí index.html)

**HashRouter:**
- URLs com hash: `/#/about`, `/#/products/123`
- Funciona sem config servidor (hash n√£o enviado ao servidor)
- Legado, evitar se poss√≠vel

---

## üîç An√°lise Conceitual Profunda

### 11.1.1 Instala√ß√£o e Setup

**Instalar React Router v6:**
```bash
npm install react-router-dom
```

**Setup b√°sico:**
```javascript
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));

root.render(
  <BrowserRouter>
    <App />
  </BrowserRouter>
);
```

**BrowserRouter** deve envolver **toda** aplica√ß√£o (geralmente em `main.jsx` ou `index.js`).

### 11.1.2 Routes e Route

**Definir rotas:**
```javascript
import { Routes, Route } from 'react-router-dom';
import Home from './pages/Home';
import About from './pages/About';
import Contact from './pages/Contact';

function App() {
  return (
    <Routes>
      <Route path="/" element={<Home />} />
      <Route path="/about" element={<About />} />
      <Route path="/contact" element={<Contact />} />
    </Routes>
  );
}
```

**Como funciona:**
- `<Routes>`: Container para rotas (obrigat√≥rio)
- `<Route>`: Define mapeamento path ‚Üí elemento
- `path`: URL pattern
- `element`: Componente a renderizar

**Rota que sempre renderiza (match):**
```javascript
<Routes>
  <Route path="/" element={<Home />} />
  <Route path="/about" element={<About />} />
  {/* Rota 404: * captura qualquer URL n√£o matched */}
  <Route path="*" element={<NotFound />} />
</Routes>
```

**M√∫ltiplas rotas:**
```javascript
function App() {
  return (
    <div>
      <nav>
        <a href="/">Home</a>
        <a href="/about">About</a>
      </nav>

      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
        <Route path="/products" element={<Products />} />
        <Route path="/contact" element={<Contact />} />
      </Routes>
    </div>
  );
}
```

### 11.1.3 Link e NavLink

**Problema com `<a>`:**
```javascript
// ‚ùå RUIM: Causa full reload
<a href="/about">About</a>
```

**Solu√ß√£o: `<Link>`**
```javascript
import { Link } from 'react-router-dom';

function Navigation() {
  return (
    <nav>
      <Link to="/">Home</Link>
      <Link to="/about">About</Link>
      <Link to="/contact">Contact</Link>
    </nav>
  );
}
// Zero reload, navega√ß√£o instant√¢nea
```

**`<Link>` vs `<a>`:**
- `<Link>`: Intercepta click, usa History API, previne reload
- `<a>`: Reload completo (apenas para links externos)

**NavLink (link ativo):**
```javascript
import { NavLink } from 'react-router-dom';

function Navigation() {
  return (
    <nav>
      <NavLink
        to="/"
        className={({ isActive }) => isActive ? 'active' : ''}
      >
        Home
      </NavLink>

      <NavLink
        to="/about"
        className={({ isActive }) => isActive ? 'active' : ''}
      >
        About
      </NavLink>
    </nav>
  );
}
```

**NavLink recebe `isActive`** (boolean) indicando se rota atual matches.

**Estilo inline:**
```javascript
<NavLink
  to="/about"
  style={({ isActive }) => ({
    color: isActive ? 'red' : 'black',
    fontWeight: isActive ? 'bold' : 'normal'
  })}
>
  About
</NavLink>
```

**Exemplo completo com CSS:**
```javascript
// Navigation.jsx
import { NavLink } from 'react-router-dom';
import './Navigation.css';

function Navigation() {
  return (
    <nav className="navbar">
      <NavLink to="/" end className="nav-link">
        Home
      </NavLink>
      <NavLink to="/about" className="nav-link">
        About
      </NavLink>
      <NavLink to="/products" className="nav-link">
        Products
      </NavLink>
    </nav>
  );
}
```

```css
/* Navigation.css */
.nav-link {
  padding: 10px 20px;
  text-decoration: none;
  color: black;
}

.nav-link.active {
  color: blue;
  font-weight: bold;
  border-bottom: 2px solid blue;
}
```

**Prop `end`:**
```javascript
<NavLink to="/" end>
  Home
</NavLink>
// end: match exato (sem end, "/" matches "/about" tamb√©m)
```

### 11.1.4 Estrutura de Aplica√ß√£o B√°sica

**Organiza√ß√£o recomendada:**
```
src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Home.jsx
‚îÇ   ‚îú‚îÄ‚îÄ About.jsx
‚îÇ   ‚îú‚îÄ‚îÄ Contact.jsx
‚îÇ   ‚îî‚îÄ‚îÄ NotFound.jsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ Navigation.jsx
‚îú‚îÄ‚îÄ App.jsx
‚îî‚îÄ‚îÄ main.jsx
```

**App.jsx completo:**
```javascript
import { Routes, Route } from 'react-router-dom';
import Navigation from './components/Navigation';
import Home from './pages/Home';
import About from './pages/About';
import Contact from './pages/Contact';
import NotFound from './pages/NotFound';

function App() {
  return (
    <div className="app">
      <Navigation />

      <main>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/about" element={<About />} />
          <Route path="/contact" element={<Contact />} />
          <Route path="*" element={<NotFound />} />
        </Routes>
      </main>
    </div>
  );
}

export default App;
```

**Home.jsx (exemplo):**
```javascript
function Home() {
  return (
    <div>
      <h1>Welcome Home</h1>
      <p>This is the home page.</p>
    </div>
  );
}

export default Home;
```

**NotFound.jsx (404):**
```javascript
import { Link } from 'react-router-dom';

function NotFound() {
  return (
    <div>
      <h1>404 - Page Not Found</h1>
      <p>The page you're looking for doesn't exist.</p>
      <Link to="/">Go back home</Link>
    </div>
  );
}

export default NotFound;
```

### 11.1.5 Rotas com Par√¢metros (Preview)

**Rota din√¢mica:**
```javascript
<Routes>
  <Route path="/" element={<Home />} />
  <Route path="/products/:id" element={<ProductDetail />} />
</Routes>
```

**`:id` √© par√¢metro din√¢mico** - ser√° coberto em 11.2 (Hooks).

**Exemplo de uso:**
```javascript
// URL: /products/123
// id = "123"

function ProductDetail() {
  // useParams() hook (pr√≥ximo m√≥dulo)
  const { id } = useParams();

  return <div>Product {id}</div>;
}
```

### 11.1.6 Index Routes

**Rota padr√£o de uma se√ß√£o:**
```javascript
<Routes>
  <Route path="/" element={<Home />} />

  <Route path="/products" element={<ProductsLayout />}>
    {/* Rota index: renderiza em /products */}
    <Route index element={<ProductsList />} />
    <Route path=":id" element={<ProductDetail />} />
  </Route>
</Routes>
```

**Index route** renderiza quando parent path matches exatamente (sem trailing path).

---

## üéØ Aplicabilidade e Contextos

### Quando Usar React Router

**‚úÖ Use quando:**
- App com m√∫ltiplas p√°ginas/views
- Necessita URLs compartilh√°veis
- Back/Forward buttons devem funcionar
- SEO importante (com SSR)

**‚ùå N√£o use quando:**
- App de p√°gina √∫nica real (ex: editor, game)
- Estado n√£o mape√°vel para URLs
- App embedded em iframe (pode usar HashRouter)

### BrowserRouter vs HashRouter

**Use BrowserRouter (99% dos casos):**
- URLs limpas: `/about`
- SEO friendly
- Melhor UX

**Use HashRouter apenas se:**
- Deploy em servidor sem config (GitHub Pages sem SPA support)
- Legado (raro)

---

## ‚ö†Ô∏è Limita√ß√µes e Considera√ß√µes

### Server Configuration

**BrowserRouter requer config servidor:**

Problema: `/about` funciona ao navegar via Link, mas **refresh = 404** (servidor n√£o encontra `/about`).

**Solu√ß√£o: Redirect all routes ‚Üí index.html**

**Nginx:**
```nginx
location / {
  try_files $uri $uri/ /index.html;
}
```

**Apache (.htaccess):**
```apache
RewriteEngine On
RewriteBase /
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]
```

**Vite/Webpack Dev Server:**
```javascript
// vite.config.js
export default {
  server: {
    historyApiFallback: true
  }
}
// Built-in, j√° funciona
```

### SEO com Client-Side Routing

**Problema:** Crawlers veem HTML vazio (React renderiza no cliente).

**Solu√ß√µes:**
1. **SSR** (Next.js, Remix) - Renderizar no servidor
2. **Pre-rendering** (Static site generation)
3. **Dynamic rendering** (Detectar bot, servir HTML est√°tico)

### Performance

**Code splitting por rota:**
```javascript
import { lazy, Suspense } from 'react';

const Home = lazy(() => import('./pages/Home'));
const About = lazy(() => import('./pages/About'));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </Suspense>
  );
}
// Cada rota carrega bundle separado
```

---

## üîó Interconex√µes Conceituais

### Rela√ß√£o com SPA

React Router **habilita** SPAs:
- Single HTML page
- JavaScript controla navega√ß√£o
- Componentes swappeados dinamicamente

### Rela√ß√£o com History API

React Router **abstrai** History API:
```javascript
// Vanilla JS
window.history.pushState({}, '', '/about');

// React Router
<Link to="/about">About</Link>
// Internamente usa pushState
```

### Rela√ß√£o com Hooks

Pr√≥ximos m√≥dulos introduzem hooks:
- `useParams()`: Ler par√¢metros de rota
- `useNavigate()`: Navega√ß√£o program√°tica
- `useLocation()`: Info da rota atual

---

## üöÄ Evolu√ß√£o e Pr√≥ximos Conceitos

### React Router v5 vs v6

**v5 (legado):**
```javascript
<Switch>
  <Route path="/about">
    <About />
  </Route>
</Switch>
```

**v6 (atual):**
```javascript
<Routes>
  <Route path="/about" element={<About />} />
</Routes>
```

**Mudan√ßas principais:**
- `Switch` ‚Üí `Routes`
- `component`/`render` ‚Üí `element`
- Nested routes mais simples

### Pr√≥ximos Passos

Este m√≥dulo cobriu roteamento b√°sico. Pr√≥ximos:

1. **11.2 React Router Hooks** - useParams, useNavigate, useLocation
2. **11.3 React Router Avan√ßado** - Nested routes, Outlet
3. **11.4 Router Features Avan√ßados** - Protected routes, lazy loading, data loaders

**Prepara√ß√£o:** Entender rotas b√°sicas √© fundamento. Hooks (11.2) expandem capacidades dramaticamente.

---

## üìö Conclus√£o

### Pontos-Chave

React Router b√°sico envolve:

1. **BrowserRouter**: Wrapper da aplica√ß√£o
2. **Routes & Route**: Mapear paths ‚Üí componentes
3. **Link**: Navega√ß√£o sem reload
4. **NavLink**: Link com estado ativo
5. **Wildcard routes**: Catch-all para 404

### Best Practices

1. **Sempre use `<Link>`** (nunca `<a>` para rotas internas)
2. **BrowserRouter no root** (main.jsx)
3. **Rotas organizadas** (pasta `pages/`)
4. **Rota 404** (`path="*"`)
5. **NavLink para navigation** (indicador visual de rota ativa)

### Pattern B√°sico

```javascript
// main.jsx
<BrowserRouter>
  <App />
</BrowserRouter>

// App.jsx
<div>
  <Navigation /> {/* Links */}

  <Routes>
    <Route path="/" element={<Home />} />
    <Route path="/about" element={<About />} />
    <Route path="*" element={<NotFound />} />
  </Routes>
</div>
```

### Filosofia

**"URLs are state, routes are components."**

React Router transforma navega√ß√£o tradicional (full reload) em **component swapping** instant√¢neo. URL deixa de ser "endere√ßo de p√°gina" e vira **parte do estado** da aplica√ß√£o. Resultado: SPAs fluidas, sem reloads, com deep linking funcionando.

**Dominar React Router = aplica√ß√µes multi-p√°gina profissionais.**

---

## üìñ Recursos Adicionais

**Documenta√ß√£o:**
- React Router v6: https://reactrouter.com/
- Migration guide v5‚Üív6: https://reactrouter.com/docs/en/v6/upgrading/v5

**Tutorial oficial:**
https://reactrouter.com/docs/en/v6/getting-started/tutorial

**Pr√≥ximo:** 11.2 - React Router Hooks (useParams, useNavigate, useLocation, useSearchParams)
