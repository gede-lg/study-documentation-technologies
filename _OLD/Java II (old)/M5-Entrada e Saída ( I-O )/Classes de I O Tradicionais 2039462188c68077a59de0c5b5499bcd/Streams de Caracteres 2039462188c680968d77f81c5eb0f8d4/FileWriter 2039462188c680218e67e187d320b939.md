# FileWriter

1. **Introdução**
Streams de caracteres em Java são fundamentais para ler e gravar texto de forma eficiente e segura. O `FileWriter` é uma subclasse de `Writer` que simplifica a escrita de caracteres diretamente em arquivos.
    - **Visão geral:** O `FileWriter` permite gravar caracteres (texto) em arquivos, cuidando da conversão interna de `char` para bytes conforme o encoding da plataforma.
    - **Relevância:** Em aplicações Java, escrever relatórios, logs ou dados estruturados em arquivos de texto é uma tarefa comum. Entender `FileWriter` garante manipulação correta de arquivos e evita problemas de encoding e desempenho.
    - **Conceitos fundamentais:**
        - **Tema principal:** Streams de caracteres – abstrações de Java para tratar texto.
        - **Subtemas:**
            - `Writer` (classe abstrata) e suas implementações.
            - Encadeamento com `BufferedWriter` para performance.
            - Gestão de recursos via *try-with-resources*.
        - **Para que servem:** Fornecer APIs orientadas a caracteres, mais adequadas que *byte streams* (`OutputStream`) quando trabalhamos com texto.
2. **Sumário**
    1. Streams de Caracteres e a Hierarquia `Writer`
    2. A Classe `FileWriter`
    3. Sintaxe e Estrutura Básica
    4. Componentes Principais e Métodos
    5. Boas Práticas e Restrições de Uso
    6. Exemplos de Código Otimizados
    7. Informações Adicionais
    8. Referências para Estudo Independente
3. **Conteúdo Detalhado**
    
    ### 3.1 Streams de Caracteres e a Hierarquia `Writer`
    
    - **`java.io.Writer`:** Classe abstrata que define métodos para escrita de caracteres (`write(char[])`, `write(String)` etc.).
    - **Implementações comuns:**
        - `FileWriter` – grava diretamente em arquivo.
        - `BufferedWriter` – envolve outro `Writer` e adiciona buffering para reduzir operações de I/O.
        - `OutputStreamWriter` – converte bytes de um `OutputStream` em caracteres, permitindo especificar *charset*.
    
    ### 3.2 A Classe `FileWriter`
    
    - Pertence ao pacote `java.io`.
    - Construtores principais:
        - `FileWriter(String fileName)` – sobrescreve ou cria o arquivo.
        - `FileWriter(String fileName, boolean append)` – `append=true` adiciona ao fim.
        - Versões que aceitam `File` ou `FileDescriptor`.
    - **Comportamento de encoding:** Usa o *encoding* padrão da plataforma. Para encodings específicos, prefira `OutputStreamWriter` sobre `FileOutputStream`.
    
    ### 3.3 Sintaxe e Estrutura Básica
    
    ```java
    try (FileWriter fw = new FileWriter("saida.txt")) {
        fw.write("Olá, mundo!\\n");
        fw.write("Usando FileWriter em Java.");
    } catch (IOException e) {
        e.printStackTrace();
    }
    
    ```
    
    - **`try-with-resources`:** Garante fechamento automático.
    - **`write(...)`:** Aceita `int` (escreve um caractere), `char[]`, `String`.
    - **`close()`:** Fecha a stream; sempre fechá-la é essencial para liberar recursos e concluir gravações.
    
    ### 3.4 Componentes Principais e Métodos
    
    - **Construtores**
        - `FileWriter(String fileName)`
        - `FileWriter(String fileName, boolean append)`
    - **Métodos herdados de `Writer`**
        - `write(int c)` — grava um único caractere.
        - `write(char[] cbuf)` — grava um array de caracteres completo.
        - `write(char[] cbuf, int off, int len)` — grava parte do array.
        - `write(String str)` — grava a string completa.
        - `write(String str, int off, int len)` — grava parte da string.
        - `flush()` — força a escrita de qualquer dado em buffer interno.
        - `close()` — fecha o stream e libera recursos.
    - **Interação entre eles:**
        - Normalmente combinamos `write(...)` para enviar dados e, opcionalmente, `flush()` para garantir persistência antes de fechar.
    
    ### 3.5 Boas Práticas e Restrições de Uso
    
    - **Encoding:** Para textos que exigem UTF-8 ou outro *charset*, prefira:
        
        ```java
        try (Writer w = new BufferedWriter(
                new OutputStreamWriter(
                    new FileOutputStream("saida.txt"), StandardCharsets.UTF_8))) {
            // ...
        }
        
        ```
        
    - **Buffering:** Usar `BufferedWriter` reduz acessos diretos ao disco e melhora performance em gravações frequentes ou registros grandes.
    - **Append vs. Sobrescrever:** Cuidado ao usar `append=true`, pois pode gerar arquivos não determinísticos em logs concurrents.
    - **Exceções:** Sempre trate ou propague `IOException`.
4. **Exemplos de Código Otimizados**
    - **Exemplo Básico (sobrescrever arquivo):**
        
        ```java
        import java.io.FileWriter;
        import java.io.IOException;
        
        public class ExemploFileWriter {
            public static void main(String[] args) {
                try (FileWriter fw = new FileWriter("relatorio.txt")) {
                    fw.write("Relatório de vendas - " + java.time.LocalDate.now() + "\\n");
                    fw.write("Total de vendas: R$ 15.230,50\\n");
                } catch (IOException e) {
                    System.err.println("Erro ao gravar o arquivo: " + e.getMessage());
                }
            }
        }
        
        ```
        
    - **Exemplo Avançado (buffered + UTF-8 + append):**
        
        ```java
        import java.io.*;
        import java.nio.charset.StandardCharsets;
        
        public class LogWriter {
            private static final String LOG_PATH = "app.log";
        
            public static void log(String nivel, String mensagem) {
                String entrada = String.format("%s [%s] %s%n",
                        java.time.LocalDateTime.now(), nivel, mensagem);
                try (Writer w = new BufferedWriter(
                        new OutputStreamWriter(
                            new FileOutputStream(LOG_PATH, true),
                            StandardCharsets.UTF_8))) {
                    w.write(entrada);
                    // flush() implícito ao fechar
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        
            public static void main(String[] args) {
                log("INFO", "Aplicação iniciada");
                log("ERROR", "Falha ao conectar no banco de dados");
            }
        }
        
        ```
        
5. **Informações Adicionais**
    - **Comparativo com `PrintWriter`:** `PrintWriter` adiciona métodos `print()` e `printf()`, úteis para formatação, mas não lança `IOException` diretamente (você deve verificar `checkError()`).
    - **Alternativas de alto nível:** Bibliotecas como Apache Commons IO (`FileUtils.writeStringToFile`) simplificam ainda mais a escrita de arquivos de texto.
    - **Concorrência:** Em aplicações multithread, sincronize acesso ao mesmo arquivo ou use *logging frameworks* (Log4j2, SLF4J) que gerenciam bloqueios internamente.
6. **Referências para Estudo Independente**
    - [Oracle Java™ I/O Tutorial](https://docs.oracle.com/javase/tutorial/essential/io/charstreams.html)
    - Baeldung: [Guide to Java FileWriter](https://www.baeldung.com/java-filewriter)
    - Livro “Java I/O” de Elliotte Rusty Harold
    - Java SE API: [`java.io.FileWriter`](https://docs.oracle.com/javase/8/docs/api/java/io/FileWriter.html)

Espero que esta explicação detalhada ajude você a dominar o uso de `FileWriter` e de streams de caracteres em seus projetos Java!