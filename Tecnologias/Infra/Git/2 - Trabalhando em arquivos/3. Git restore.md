# Comando `git restore` no Git

## Introdução

O Git é uma ferramenta essencial para o controle de versões em projetos de software. Dentre seus inúmeros comandos, o `git restore` destaca-se por permitir restaurar arquivos ou partes de arquivos no diretório de trabalho. Este comando é particularmente útil para desfazer alterações não desejadas, retornando os arquivos ao estado de um commit específico ou à última versão salva no índice.

## Sumário

1. [O que é e para que serve o `git restore`](#o-que-é-e-para-que-serve-o-git-restore)
2. [Quando utilizar o `git restore`](#quando-utilizar-o-git-restore)
3. [Sintaxe de uso](#sintaxe-de-uso)
4. [Restrições de uso](#restrições-de-uso)
5. [Parâmetros Obrigatórios](#parâmetros-obrigatórios)
    - Tabela de Parâmetros Obrigatórios
6. [Parâmetros Opcionais](#parâmetros-opcionais)
    - Tabela de Parâmetros Opcionais
7. [Exemplos de Uso](#exemplos-de-uso)
8. [Conclusão](#conclusão)

## O que é e para que serve?

O `git restore` é um comando introduzido no Git 2.23 para simplificar e substituir funcionalidades anteriormente realizadas com `git checkout`. Ele permite restaurar o conteúdo de arquivos no diretório de trabalho a partir de um commit específico ou do índice (staging area). Isso é útil para desfazer mudanças locais que ainda não foram commitadas ou para recuperar versões anteriores de arquivos.

## Quando utilizar o `git restore`

Utilize o `git restore` nos seguintes cenários:

- **Desfazer alterações locais**: Se você modificou um arquivo, mas deseja descartar essas mudanças e retornar à versão anterior.
- **Recuperar arquivos deletados**: Restaurar arquivos que foram removidos do diretório de trabalho.
- **Reverter para um commit específico**: Obter o estado de um arquivo a partir de um commit passado sem alterar o histórico do repositório.
- **Desfazer mudanças no índice**: Remover arquivos do índice (staging area) sem alterar o diretório de trabalho.

## Sintaxe de uso

A sintaxe básica do comando `git restore` é a seguinte:

```bash
git restore [opções] [<caminho>...]
```

## Restrições de uso

- **Não altera o histórico**: Diferente de comandos como `git reset` ou `git rebase`, o `git restore` não modifica o histórico de commits.
- **Escopo limitado**: O comando atua apenas no diretório de trabalho e no índice, não afetando outras áreas do repositório.
- **Recuperação limitada**: Se alterações foram commitadas e você precisa reverter para um estado anterior no histórico, outros comandos podem ser mais apropriados.

## Parâmetros Obrigatórios

Embora o `git restore` seja bastante flexível, alguns parâmetros são essenciais para realizar operações específicas. Abaixo, apresentamos uma tabela com os parâmetros obrigatórios, sua sintaxe, descrição e exemplos de uso.

| Comando | Sintaxe                | Descrição/Explicação                                       | Exemplo de Uso                               |
|---------|------------------------|------------------------------------------------------------|----------------------------------------------|
| `<caminho>` | `git restore <caminho>` | Especifica o arquivo ou arquivos a serem restaurados.       | `git restore README.md`                      |

**Detalhes:**

- `<caminho>`: Indica o(s) arquivo(s) que você deseja restaurar. Pode ser um caminho relativo ou absoluto dentro do repositório.

## Parâmetros Opcionais

Além dos parâmetros obrigatórios, o `git restore` oferece uma variedade de opções que ampliam sua funcionalidade. A tabela a seguir detalha esses parâmetros, sua sintaxe, descrição e exemplos de uso.

| Comando          | Sintaxe                          | Descrição/Explicação                                                                                | Exemplo de Uso                                   |
|------------------|----------------------------------|-----------------------------------------------------------------------------------------------------|--------------------------------------------------|
| `--source`       | `--source <commit>`              | Especifica o commit a partir do qual restaurar os arquivos. Pode ser um hash, tag ou referência.     | `git restore --source HEAD~1 README.md`         |
| `--staged`       | `--staged`                       | Restaura o arquivo no índice (staging area) sem modificar o diretório de trabalho.                   | `git restore --staged config.yml`               |
| `--worktree`     | `--worktree`                     | Restaura o arquivo no diretório de trabalho sem modificar o índice. (Padrão quando nenhuma opção é especificada.) | `git restore --worktree script.js`              |
| `-s`, `--source` | `-s <commit>`                    | Abreviação para `--source`.                                                                             | `git restore -s main branch.txt`                |
| `-W`, `--worktree` | `-W`                            | Abreviação para `--worktree`.                                                                          | `git restore -W app.py`                          |
| `-S`, `--source` | `-S <commit>`                    | Outra abreviação para `--source`.                                                                      | `git restore -S feature-branch index.html`      |
| `--force`        | `--force`                        | Força a restauração mesmo que haja mudanças não salvas no diretório de trabalho.                    | `git restore --force README.md`                  |
| `-p`, `--patch`  | `-p` ou `--patch`                | Permite a restauração interativa, escolhendo partes específicas das alterações a serem descartadas.  | `git restore -p main.c`                           |

**Detalhes:**

- `--source <commit>`: Define o commit de onde os arquivos serão restaurados. Pode ser utilizado com `HEAD`, `HEAD~1`, tags, ou hashes de commits específicos.
- `--staged`: Atua apenas no índice, removendo as alterações preparadas para commit.
- `--worktree`: Afeta apenas o diretório de trabalho, mantendo o índice inalterado.
- `--force`: Ignora verificações e força a restauração, podendo sobrescrever mudanças não salvas.
- `--patch`: Abre uma interface interativa para selecionar partes específicas das mudanças a serem restauradas.

## Exemplos de Uso

### 1. Restaurar um arquivo ao último commit

```bash
git restore README.md
```

Este comando desfaz todas as alterações feitas no arquivo `README.md` no diretório de trabalho, retornando à versão do último commit.

### 2. Restaurar um arquivo específico de um commit anterior

```bash
git restore --source HEAD~2 src/main.py
```

Restaura o arquivo `src/main.py` ao estado que estava há dois commits atrás.

### 3. Remover um arquivo do índice (staging area) sem alterar o diretório de trabalho

```bash
git restore --staged config.yml
```

Este comando remove `config.yml` do índice, desfazendo o `git add` feito anteriormente, mas mantendo as alterações no diretório de trabalho.

### 4. Forçar a restauração de um arquivo, sobrescrevendo mudanças não salvas

```bash
git restore --force app.py
```

Força a restauração de `app.py`, descartando quaisquer alterações não salvas no diretório de trabalho.

### 5. Restaurar interativamente partes de um arquivo

```bash
git restore --patch main.c
```

Abre um modo interativo onde você pode escolher quais partes das alterações em `main.c` deseja restaurar.

## Conclusão

O comando `git restore` é uma ferramenta poderosa e flexível para gerenciar e desfazer alterações no diretório de trabalho e no índice. Com uma sintaxe clara e múltiplas opções, ele simplifica tarefas que anteriormente exigiam combinações mais complexas de outros comandos, como `git checkout` e `git reset`. Compreender suas funcionalidades e saber quando utilizá-lo pode aumentar significativamente a eficiência no gerenciamento de versões e na manutenção de um fluxo de trabalho limpo e organizado.