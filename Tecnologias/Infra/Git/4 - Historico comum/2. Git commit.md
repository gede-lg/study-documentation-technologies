# Guia Completo do Comando `git commit` no Git

## Introdução

O Git é um sistema de controle de versão amplamente utilizado para gerenciar o desenvolvimento de projetos de software. Entre os diversos comandos disponíveis, o `git commit` desempenha um papel crucial no registro das alterações realizadas no repositório. Este guia detalhado abordará todos os aspectos do comando `git commit`, desde sua finalidade até suas opções avançadas, proporcionando uma compreensão completa para desenvolvedores de todos os níveis.

## Sumário

1. [O que é e para que serve o `git commit`](#o-que-é-e-para-que-serve-o-git-commit)
2. [Quando utilizar o `git commit`](#quando-utilizar-o-git-commit)
3. [Sintaxe de uso do `git commit`](#sintaxe-de-uso-do-git-commit)
4. [Restrições de uso do `git commit`](#restrições-de-uso-do-git-commit)
5. [Parâmetros Obrigatórios do `git commit`](#parâmetros-obrigatórios-do-git-commit)
6. [Parâmetros Opcionais do `git commit`](#parâmetros-opcionais-do-git-commit)
7. [Exemplos Práticos](#exemplos-práticos)
8. [Dicas e Boas Práticas](#dicas-e-boas-práticas)
9. [Conclusão](#conclusão)

---

## O que é e para que serve o `git commit`

O comando `git commit` é utilizado para **registrar mudanças** no histórico do repositório Git. Quando você faz alterações nos arquivos do seu projeto, essas mudanças são primeiramente adicionadas ao *staging area* (área de preparação) usando o comando `git add`. O `git commit` então captura o estado atual desses arquivos e os salva como uma **nova revisão** no repositório, criando assim um ponto de referência no histórico do projeto.

### Finalidades Principais:

- **Registrar Progresso**: Permite que você salve etapas intermediárias do desenvolvimento, facilitando a retomada do trabalho posteriormente.
- **Histórico de Alterações**: Mantém um registro detalhado de todas as mudanças, facilitando a revisão e a compreensão do que foi alterado ao longo do tempo.
- **Colaboração**: Facilita o trabalho em equipe, permitindo que múltiplos desenvolvedores trabalhem de forma coordenada e rastreiem as contribuições de cada membro.

## Quando utilizar o `git commit`

É recomendado utilizar o `git commit` sempre que você atingir um **ponto significativo** no desenvolvimento do seu projeto. Isso inclui:

- **Concluindo uma funcionalidade**: Quando uma nova funcionalidade está implementada e funcionando corretamente.
- **Corrigindo um bug**: Após identificar e corrigir um erro no código.
- **Alterações de configuração**: Quando ajustes em arquivos de configuração são realizados.
- **Refatorações**: Ao reorganizar ou otimizar o código sem alterar sua funcionalidade externa.
  
**Boas Práticas:**

- **Commits Frequentes**: Fazer commits frequentemente ajuda a manter um histórico detalhado e facilita a identificação de problemas.
- **Mensagens Claras**: Escrever mensagens de commit descritivas que expliquem o propósito das alterações.
- **Tamanho Adequado**: Evitar commits muito grandes; é melhor ter vários commits pequenos e focados do que um único commit abrangente.

## Sintaxe de uso do `git commit`

A sintaxe básica do comando `git commit` é a seguinte:

```bash
git commit [opções] [caminhos]
```

### Componentes da Sintaxe:

- **opções**: Argumentos que modificam o comportamento do comando.
- **caminhos**: Especifica quais arquivos ou diretórios devem ser incluídos no commit. Se omitido, todas as alterações adicionadas ao *staging area* serão commitadas.

## Restrições de uso do `git commit`

Embora o `git commit` seja uma ferramenta poderosa, existem algumas restrições e considerações a serem observadas:

- **Área de Preparação**: Somente as alterações adicionadas ao *staging area* com `git add` serão incluídas no commit.
- **Commits Vazios**: Por padrão, o Git não permite commits vazios (sem alterações). É possível forçar um commit vazio usando a opção `--allow-empty`.
- **Autorização**: Dependendo das configurações do repositório, pode ser necessário ter permissões adequadas para realizar commits, especialmente em repositórios colaborativos.
- **Histórico Imutável**: Após um commit ser enviado para um repositório remoto e compartilhado com outros colaboradores, reescrever o histórico (por exemplo, usando `git commit --amend` ou `git rebase`) pode causar conflitos.

## Parâmetros Obrigatórios do `git commit`

O comando `git commit` não possui parâmetros estritamente obrigatórios, mas alguns argumentos são essenciais para a funcionalidade básica. Abaixo estão listados os principais:

| **Comando** | **Sintaxe** | **Descrição/Explicação** | **Exemplo de Uso** |
|-------------|-------------|---------------------------|---------------------|
| `-m` | `git commit -m "mensagem"` | Especifica a mensagem do commit diretamente na linha de comando. Evita a abertura do editor de texto. | `git commit -m "Adiciona nova funcionalidade de login"` |
| `-a` | `git commit -a -m "mensagem"` | Adiciona automaticamente todos os arquivos rastreados modificados ao *staging area* antes de realizar o commit. | `git commit -a -m "Atualiza dependências"` |
| `--amend` | `git commit --amend` | Modifica o último commit, permitindo atualizar a mensagem ou incluir novas alterações. | `git commit --amend -m "Corrige mensagem do commit anterior"` |

### Detalhamento dos Parâmetros Obrigatórios:

1. **`-m` (Mensagem)**:
   - **Descrição**: Permite adicionar uma mensagem de commit diretamente na linha de comando.
   - **Uso**: Fundamental para documentar o que está sendo alterado no commit.
   - **Exemplo**:
     ```bash
     git commit -m "Implementa funcionalidade de busca"
     ```

2. **`-a` (All)**:
   - **Descrição**: Simplifica o processo de adicionar todas as alterações de arquivos já rastreados ao *staging area* antes de commitar.
   - **Uso**: Útil para commits rápidos onde todas as modificações de arquivos rastreados devem ser incluídas.
   - **Exemplo**:
     ```bash
     git commit -a -m "Remove arquivos obsoletos"
     ```

3. **`--amend` (Alterar último commit)**:
   - **Descrição**: Permite modificar o último commit, seja para alterar a mensagem ou incluir/excluir alterações.
   - **Uso**: Ideal para corrigir erros no último commit antes de compartilhá-lo com outros.
   - **Exemplo**:
     ```bash
     git commit --amend -m "Corrige typo na mensagem do commit"
     ```

## Parâmetros Opcionais do `git commit`

Além dos parâmetros obrigatórios, o `git commit` oferece uma variedade de opções que permitem personalizar e controlar o comportamento do commit. Abaixo, apresentamos uma tabela detalhada com os principais parâmetros opcionais.

| **Comando** | **Sintaxe** | **Descrição/Explicação** | **Exemplo de Uso** |
|-------------|-------------|---------------------------|---------------------|
| `-a` | `-a` | Adiciona automaticamente todos os arquivos rastreados modificados ao *staging area*. | `git commit -a -m "Atualiza documentação"` |
| `-m` | `-m "mensagem"` | Adiciona uma mensagem de commit diretamente na linha de comando. | `git commit -m "Refatora código de autenticação"` |
| `-v` | `-v` | Exibe as alterações que serão commitadas no editor de texto. | `git commit -v` |
| `--amend` | `--amend` | Modifica o último commit, permitindo atualizar a mensagem ou incluir novas alterações. | `git commit --amend -m "Atualiza mensagem do commit"` |
| `--author` | `--author="Nome <email>"` | Especifica o autor do commit, substituindo o autor padrão. | `git commit --author="João Silva <joao@exemplo.com>" -m "Adiciona nova feature"` |
| `--date` | `--date="data"` | Define a data do commit. Pode ser útil para ajustar horários de commits. | `git commit --date="2024-04-01T12:00:00" -m "Commit com data específica"` |
| `-s` ou `--signoff` | `-s` | Adiciona uma linha de "Signed-off-by" à mensagem do commit, indicando conformidade com o DCO. | `git commit -s -m "Adiciona licença MIT"` |
| `-S` ou `--gpg-sign` | `-S` | Assina o commit com uma chave GPG, garantindo autenticidade. | `git commit -S -m "Commit assinado"` |
| `--no-verify` | `--no-verify` | Ignora os hooks de pré-commit e commit-msg. | `git commit --no-verify -m "Commit sem verificação de hooks"` |
| `--allow-empty` | `--allow-empty` | Permite criar um commit vazio, sem alterações. | `git commit --allow-empty -m "Commit vazio para marcar ponto"` |
| `--dry-run` | `--dry-run` | Mostra o que seria commitado sem realmente realizar o commit. | `git commit --dry-run -m "Teste"` |

### Detalhamento dos Parâmetros Opcionais:

1. **`-v` (Verbose)**:
   - **Descrição**: Exibe as alterações que serão incluídas no commit diretamente no editor de texto.
   - **Uso**: Útil para revisar as mudanças antes de finalizar o commit.
   - **Exemplo**:
     ```bash
     git commit -v
     ```

2. **`--author`**:
   - **Descrição**: Permite especificar um autor diferente do configurado globalmente.
   - **Uso**: Útil em situações onde múltiplas pessoas contribuem a um único commit.
   - **Exemplo**:
     ```bash
     git commit --author="Maria Souza <maria@exemplo.com>" -m "Corrige falha na API"
     ```

3. **`--date`**:
   - **Descrição**: Define uma data específica para o commit, em vez de usar a data atual.
   - **Uso**: Pode ser usado para ajustar datas de commits históricos ou corrigir erros.
   - **Exemplo**:
     ```bash
     git commit --date="2024-05-10T09:00:00" -m "Commit com data personalizada"
     ```

4. **`-s` ou `--signoff`**:
   - **Descrição**: Adiciona uma linha de "Signed-off-by" no final da mensagem do commit.
   - **Uso**: Comum em projetos que utilizam o Developer Certificate of Origin (DCO).
   - **Exemplo**:
     ```bash
     git commit -s -m "Adiciona nova documentação"
     ```

5. **`-S` ou `--gpg-sign`**:
   - **Descrição**: Assina digitalmente o commit com uma chave GPG configurada.
   - **Uso**: Garante a autenticidade e integridade do commit.
   - **Exemplo**:
     ```bash
     git commit -S -m "Commit assinado digitalmente"
     ```

6. **`--no-verify`**:
   - **Descrição**: Ignora os hooks de pré-commit e commit-msg configurados.
   - **Uso**: Útil para bypassar verificações automatizadas em situações específicas.
   - **Exemplo**:
     ```bash
     git commit --no-verify -m "Commit sem executar hooks"
     ```

7. **`--allow-empty`**:
   - **Descrição**: Permite a criação de um commit sem nenhuma alteração nos arquivos.
   - **Uso**: Pode ser usado para marcar pontos específicos no histórico ou iniciar um branch.
   - **Exemplo**:
     ```bash
     git commit --allow-empty -m "Inicia novo branch de desenvolvimento"
     ```

8. **`--dry-run`**:
   - **Descrição**: Simula o commit, mostrando o que seria incluído sem realmente executar o commit.
   - **Uso**: Útil para verificar quais alterações estão prontas para serem commitadas.
   - **Exemplo**:
     ```bash
     git commit --dry-run -m "Teste de commit"
     ```

## Exemplos Práticos

### 1. Commit Básico com Mensagem

Adiciona todas as alterações previamente adicionadas ao *staging area* com uma mensagem descritiva.

```bash
git commit -m "Implementa sistema de autenticação de usuários"
```

### 2. Commit de Todas as Alterações Rastreadas

Adiciona automaticamente todas as alterações em arquivos rastreados e realiza o commit.

```bash
git commit -a -m "Atualiza dependências e corrige bugs menores"
```

### 3. Modificar o Último Commit

Altera a mensagem do último commit.

```bash
git commit --amend -m "Corrige a mensagem do commit anterior"
```

### 4. Commit com Assinatura GPG

Realiza um commit assinado digitalmente para garantir a autenticidade.

```bash
git commit -S -m "Adiciona suporte a HTTPS nas requisições"
```

### 5. Commit Vazio

Cria um commit sem alterações, útil para marcar pontos específicos no histórico.

```bash
git commit --allow-empty -m "Marca o início da nova versão 2.0"
```

### 6. Commit Ignorando Hooks

Realiza um commit sem executar os hooks de pré-commit e commit-msg.

```bash
git commit --no-verify -m "Commit de emergência sem validações"
```

### 7. Commit com Data Personalizada

Define uma data específica para o commit.

```bash
git commit --date="2024-06-15T10:30:00" -m "Commit com data personalizada"
```

## Dicas e Boas Práticas

- **Mensagens de Commit Claras**: Utilize mensagens concisas e descritivas que expliquem o propósito das alterações. Isso facilita a compreensão do histórico e a colaboração com outros desenvolvedores.
  
  **Exemplo de Boa Mensagem**:
  ```
  Adiciona validação de formulário na página de cadastro
  ```

- **Commits Atômicos**: Faça commits que representem uma única alteração lógica. Evite agrupar múltiplas funcionalidades ou correções em um único commit.

- **Revisão Antes do Commit**: Utilize `git status` e `git diff` para revisar as alterações antes de adicioná-las e commitar. Isso ajuda a evitar incluir mudanças não intencionadas.

  ```bash
  git status
  git diff
  ```

- **Uso de Branches**: Trabalhe em branches separados para desenvolver novas funcionalidades ou corrigir bugs. Isso mantém o histórico principal (`main` ou `master`) limpo e organizado.

  ```bash
  git checkout -b nova-funcionalidade
  ```

- **Evitar Reescrever Histórico**: Após compartilhar commits com outros colaboradores, evite reescrever o histórico usando `--amend` ou `rebase` para evitar conflitos.

## Conclusão

O comando `git commit` é uma ferramenta essencial no fluxo de trabalho do Git, permitindo registrar de forma eficaz as alterações realizadas no código. Compreender suas opções e aplicá-las corretamente é fundamental para manter um histórico de projeto organizado, facilitando a colaboração e a manutenção do software. Ao seguir as boas práticas e explorar as diversas opções disponíveis, você poderá utilizar o `git commit` de maneira eficiente e produtiva em seus projetos.