# Push

---

## 1. Finalidade do `docker push`

O **`docker push`** envia (push) uma imagem local para um **registry** (público ou privado), tornando-a disponível para outros usuários e sistemas. É o oposto de `docker pull` e fundamental para publicar versões de suas aplicações em containers.

---

## 2. Sintaxe básica

```bash
docker push [OPTIONS] NAME[:TAG]

```

- **`NAME`**: repositório de destino (ex.: `myuser/app`).
- **`TAG`**: tag da imagem (ex.: `:latest`, `:1.2.3`). Se omitido, envia `:latest`.

---

## 3. Parâmetro

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `NAME[:TAG]` | Sim | Nome completo do repositório no registry (incluindo namespace) e tag. |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `-a, --all-tags` | boolean | `false` | Envia **todas** as tags existentes localmente do repositório (`NAME`) ao registry. |
| `--disable-content-trust` | boolean | `true` | Desativa o processo de assinatura (signing) da imagem antes do push. |
| `--platform string` | string | — | Gera e envia apenas o manifesto para uma **plataforma específica** (ex.: `linux/amd64`). |
| `-q, --quiet` | boolean | `false` | Silencia a saída detalhada, exibindo apenas o progresso resumido ou o resultado final. |

---

## 5. Fluxo de funcionamento

1. **Autenticação**
    - Garante que você esteja logado (`docker login`) no registry de destino.
2. **Resolução de nome**
    - Valida se `NAME[:TAG]` existe localmente e corresponde a uma imagem.
3. **Assinatura (opcional)**
    - Se Content Trust estiver habilitado, assina a imagem antes do envio.
4. **Envio do manifesto**
    - Publica o manifesto OCI que descreve camadas e metadados.
5. **Envio das camadas**
    - Transfere cada camada ausente no registry.
6. **Confirmação**
    - Retorna o digest da imagem publicada e o repositório destino.

---

## 6. Exemplos de uso

1. **Enviar a tag padrão `latest`**
    
    ```bash
    docker push myuser/app
    
    ```
    
2. **Enviar uma tag específica**
    
    ```bash
    docker push myuser/app:1.2.0
    
    ```
    
3. **Enviar todas as tags locais**
    
    ```bash
    docker push --all-tags myuser/app
    
    ```
    
4. **Enviar sem assinatura**
    
    ```bash
    docker push --disable-content-trust private/repo:stable
    
    ```
    
5. **Enviar somente para uma plataforma**
    
    ```bash
    docker push --platform linux/arm64 mymultiarch/app:2.0
    
    ```
    

---

## 7. Tabela de referência rápida

| Componente | Sintaxe | Descrição |
| --- | --- | --- |
| Comando base | `docker push [OPTIONS] NAME[:TAG]` | Envia imagem local para um registry remoto. |
| Parâmetro | `NAME[:TAG]` | Repositório + tag a publicar. |
| Opção | `-a, --all-tags` | Push de todas as tags locais. |
| Opção | `--disable-content-trust` | Desativa assinatura de Content Trust. |
| Opção | `--platform <os/arch>` | Define plataforma única para o manifesto push. |
| Opção | `-q, --quiet` | Modo silencioso (resumido). |

---

Pronto! Agora você tem um guia completo para usar o **`docker push`** de forma controlada e eficiente. Se precisar de mais detalhes ou cenários específicos, é só avisar!