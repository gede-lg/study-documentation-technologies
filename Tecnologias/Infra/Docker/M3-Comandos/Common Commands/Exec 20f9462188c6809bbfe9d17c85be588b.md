# Exec

---

## 1. O que faz o `docker exec`

O **`docker exec`** permite **executar um comando** dentro de um contêiner **já em execução**, sem interromper seu processo principal. É útil para:

- Acessar um shell interativo (`bash`, `sh`) para depuração.
- Rodar utilitários pontuais (ex.: verificações de logs, diagnósticos).
- Modificar o estado do contêiner em tempo de execução (instalar pacotes, inspecionar arquivos, etc.).

---

## 2. Sintaxe geral

```bash
docker exec [OPTIONS] CONTAINER COMMAND [ARG...]

```

- **`docker exec`**: comando para executar processos dentro de um contêiner ativo.
- **`[OPTIONS]`**: flags que configuram contexto, ambiente, modo de execução, etc.
- **`CONTAINER`**: nome ou ID do contêiner alvo.
- **`COMMAND [ARG...]`**: o comando (e seus argumentos) a ser executado.

---

## 3. Parâmetro obrigatório

| Parâmetro | Descrição |
| --- | --- |
| `CONTAINER` | Nome ou ID do contêiner em que o comando será executado. |
| `COMMAND` | Comando a ser rodado (pode ser `bash`, `sh`, `ls`, etc.). |
| `ARG…` | Argumentos opcionais para o `COMMAND`. |

---

## 4. Opções detalhadas

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `-d, --detach` | Boolean | `false` | Executa o comando em **background**, sem anexar stdout/stderr ao seu terminal. |
| `--detach-keys string` | String | padrão | Sequência de teclas para desanexar quando em modo interativo (ex.: `ctrl-p,ctrl-q`). |
| `-e, --env list` | Lista | — | Define variáveis de ambiente para o processo (`-e VAR=valor`). |
| `--env-file list` | Lista | — | Lê variáveis de ambiente de um arquivo (cada linha `VAR=valor`). |
| `-i, --interactive` | Boolean | `false` | Mantém o **STDIN** do comando aberto, permitindo input interativo. |
| `--privileged` | Boolean | `false` | Concede **privilégios ampliados** (capabilities extra) ao processo executado. |
| `-t, --tty` | Boolean | `false` | Aloca um **pseudo-TTY**, necessário para shells interativos. |
| `-u, --user string` | String | `root` | Usuário ou UID (e opcionalmente grupo/GID) sob o qual o comando rodará (`user:group`). |
| `-w, --workdir string` | String | `/` | Diretório de trabalho dentro do contêiner antes de executar o comando. |

---

## 5. Exemplos de uso

1. **Acessar um shell `bash`**
    
    ```bash
    docker exec -it my_container bash
    
    ```
    
2. **Executar em background**
    
    ```bash
    docker exec -d webapp_service ./run-diagnostics.sh
    
    ```
    
3. **Rodar um comando com variáveis de ambiente**
    
    ```bash
    docker exec -e DEBUG=true -e API_KEY=abc123 my_app_container ./start-task
    
    ```
    
4. **Executar como usuário não-root**
    
    ```bash
    docker exec -u 1001:1001 mydb_container psql -U myuser -c '\l'
    
    ```
    
5. **Listar arquivos em um diretório específico**
    
    ```bash
    docker exec -w /var/log -it backend_container ls -lah
    
    ```
    

---

## 6. Tabela de referência rápida

| Sintaxe | Descrição |
| --- | --- |
| `docker exec [OPTIONS] …` | Executa comando em contêiner ativo. |
| `-d` | Modo detached (background). |
| `-i` | Mantém STDIN aberto. |
| `-t` | Aloca um TTY (shell interativo). |
| `-e VAR=valor` | Define variável de ambiente. |
| `--env-file caminho` | Carrega variáveis de arquivo. |
| `-u user[:group]` | Executa como usuário/grupo específico. |
| `-w /caminho` | Define diretório de trabalho dentro do contêiner. |
| `--privileged` | Concede privilégios ampliados ao processo. |

---

Com isso você tem tudo para usar o **`docker exec`** de forma eficaz, ajustando o modo de interação, ambiente e permissões conforme sua necessidade. Se quiser aprofundar em algum cenário específico, é só avisar!