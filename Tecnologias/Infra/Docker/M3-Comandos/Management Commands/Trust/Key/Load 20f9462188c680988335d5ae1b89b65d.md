# Load

Abaixo, uma explicação completa e estruturada do comando **`docker trust key load`**, abordando sua finalidade, sintaxe, parâmetros, opções e exemplos de uso.

---

## 1. O que faz este comando

O **`docker trust key load`** faz parte do subsistema de Trust do Docker (baseado no Notary) e serve para:

- **Carregar** uma chave privada já existente (arquivo `.key`) na store local de chaves de confiança.
- **Registrar** essa chave sob um nome, permitindo que ela seja utilizada para **assinar** imagens Docker (por exemplo, com `docker trust sign`).

Isso é útil quando você já possui um par de chaves gerado fora do contexto Docker ou em outro diretório e quer reutilizá-lo no seu workflow de assinatura.

---

## 2. Sintaxe geral

```bash
docker trust key load [OPTIONS] KEYFILE

```

- **`docker trust key`**: namespace de gerenciamento de chaves de assinatura.
- **`load`**: ação que importa uma chave privada existente.
- **`[OPTIONS]`**: flags que alteram o comportamento padrão.
- **`KEYFILE`**: caminho para o arquivo de chave privada a ser carregado.

---

## 3. Parâmetros

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `KEYFILE` | Sim | **Caminho** (absoluto ou relativo) para o arquivo de chave privada que você deseja carregar (ex.: `~/.docker/trust/alice.key`). |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `--name string` | string | `"signer"` | Nome sob o qual a chave será registrada localmente. Esse identificador será usado depois ao assinar imagens. |

> Observação: se você não informar --name, a chave será carregada com o nome genérico signer. É recomendável usar um nome descritivo (por ex., seu usuário ou repositório) para organizar melhor múltiplas chaves.
> 

---

## 5. Fluxo de funcionamento

1. **Validação de parâmetros**
    - Verifica se `KEYFILE` existe e é legível; em caso negativo, exibe erro.
2. **Leitura da chave**
    - Carrega o conteúdo do arquivo `.key` especificado.
3. **Registro na store**
    - Copia ou vincula o arquivo de chave em `~/.docker/trust/tuf/keys/` (ou diretório equivalente), usando o nome definido em `-name`.
4. **Pronto para uso**
    - Agora você pode usar o nome escolhido para **assinar** imagens:
        
        ```bash
        docker trust sign --key NAME myrepo:tag
        
        ```
        

---

## 6. Exemplos de uso

1. **Carregar chave com nome padrão “signer”**
    
    ```bash
    docker trust key load ~/.docker/trust/alice.key
    # Importa alice.key e registra-a como "signer"
    
    ```
    
2. **Carregar chave com nome personalizado**
    
    ```bash
    docker trust key load --name alice ~/.docker/trust/alice.key
    # Importa alice.key e registra-a como "alice"
    
    ```
    
3. **Fluxo típico após geração externa**
    
    ```bash
    # Supondo que você recebeu um par de chaves de outra máquina:
    scp user@server:/path/to/bob.key ~/.docker/trust/
    
    # Carrega a chave no Docker Trust:
    docker trust key load --name bob ~/.docker/trust/bob.key
    
    # Adiciona Bob como signer do repositório:
    docker trust signer add --key bob.pub bob myrepo
    
    # Assina uma imagem usando a chave "bob":
    docker trust sign myrepo:2.0
    
    ```
    

---

## 7. Tabela de referência rápida

| Componente | Sintaxe | Descrição |
| --- | --- | --- |
| Comando base | `docker trust key load` | Importa uma chave privada existente para uso no Docker Content Trust. |
| Argumento | `KEYFILE` | Caminho para o arquivo de chave privada a ser carregado. |
| Opção | `--name <nome>` | Identificador com o qual a chave será registrada (padrão: signer). |

---

Com isso, você tem todas as informações necessárias para **carregar** e **registrar** suas chaves privadas de assinatura no Docker Trust. Se precisar de mais detalhes ou tiver outro cenário em mente, só avisar!