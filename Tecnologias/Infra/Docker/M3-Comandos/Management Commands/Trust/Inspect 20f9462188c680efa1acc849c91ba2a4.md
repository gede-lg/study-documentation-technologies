# Inspect

Abaixo, uma explicação completa e estruturada do comando **`docker trust inspect`**, cobrindo sua finalidade, sintaxe, parâmetros, opções e exemplos de uso.

---

## 1. O que faz este comando

O **`docker trust inspect`** retorna informações de baixo nível sobre as chaves e assinaturas associadas a uma ou mais imagens Docker.

É útil para verificar:

- Quais chaves públicas estão configuradas como signers de um repositório;
- Quais versões (tags) de uma imagem estão assinadas e por quem;
- O histórico de assinaturas para auditoria de Content Trust.

---

## 2. Sintaxe geral

```bash
docker trust inspect [OPTIONS] IMAGE[:TAG] [IMAGE[:TAG]...]

```

- **`IMAGE[:TAG]`**: nome da imagem (com opção de tag) a ser inspecionada.
- Você pode passar **múltiplas imagens** em sequência.

---

## 3. Parâmetros

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `IMAGE[:TAG]` | Sim | Repositório e tag da imagem Docker (ex.: `meuapp:latest` ou apenas `meuapp` para inspecionar todas as tags). Pode repetir para várias imagens. |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `--pretty` | boolean | `false` | Exibe a saída em formato amigável (“pretty print”), com cabeçalhos e alinhamento para leitura humana. |

---

## 5. Fluxo de funcionamento

1. **Resolução da imagem**
    - Se for fornecida somente a referência do repositório (`meuapp`), o comando busca todas as tags disponíveis no Notary Server.
2. **Consulta ao Notary Server**
    - O cliente envia uma requisição para obter o metadata de Content Trust (TUF) daquela(s) imagem(ns).
3. **Apresentação dos dados**
    - Sem `-pretty`: imprime JSON bruto com campos como `Name`, `SignedTags`, `Signers`, `Digest` etc.
    - Com `-pretty`: formata em tabela legível, por exemplo:
        
        ```
        REPOSITORY      TAG        SIGNER     SIGNED BY PUBLIC KEY
        meuapp          1.0        alice      ABCDEF123456...
        meuapp          2.0        bob        7890FEDCBA...
        
        ```
        

---

## 6. Exemplos de uso

1. **Inspecionar uma única imagem (JSON bruto)**
    
    ```bash
    docker trust inspect meuapp:1.0
    
    ```
    
2. **Inspecionar várias imagens de uma vez (JSON bruto)**
    
    ```bash
    docker trust inspect frontend:latest backend:v2.3
    
    ```
    
3. **Inspecionar com saída amigável**
    
    ```bash
    docker trust inspect --pretty meuapp
    # Mostra todas as tags assinadas de “meuapp” em formato legível
    
    ```
    
4. **Fluxo típico para auditoria**
    
    ```bash
    # 1. Assinar algumas versões
    docker trust sign meuapp:1.0
    docker trust sign meuapp:2.0
    
    # 2. Verificar quem assinou cada tag
    docker trust inspect --pretty meuapp
    
    ```
    

---

## 7. Tabela de referência rápida

| Componente | Sintaxe | Descrição |
| --- | --- | --- |
| Comando base | `docker trust inspect` | Consulta chaves e assinaturas de imagem(s) Docker. |
| Parâmetro | `IMAGE[:TAG]` | Imagem (e tag opcional) a ser inspecionada; aceita múltiplas. |
| Opção | `--pretty` | Formata a saída em modo legível para humanos. |

---

Com isso, você está apto a **auditar** as assinaturas das suas imagens e confirmar exatamente quem e quando assinou cada versão. Se precisar de mais detalhes ou outro exemplo, é só falar!