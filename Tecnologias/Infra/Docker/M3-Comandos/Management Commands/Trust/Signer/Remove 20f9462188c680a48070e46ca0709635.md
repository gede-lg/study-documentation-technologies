# Remove

A seguir, uma visão completa e estruturada do comando **`docker trust signer remove`**, cobrindo sua finalidade, sintaxe, parâmetros, opções e exemplos de uso.

---

## 1. O que faz este comando

O **`docker trust signer remove`** permite **revogar** a permissão de um signer (assinante) para um ou mais repositórios Docker gerenciados via Content Trust.

Ao remover um signer, você impede que a chave pública associada a esse signer possa mais assinar imagens daquele(s) repositório(s).

---

## 2. Sintaxe geral

```bash
docker trust signer remove [OPTIONS] NAME REPOSITORY [REPOSITORY...]

```

- **`[OPTIONS]`**: flags que alteram o comportamento padrão.
- **`NAME`**: nome do signer que será removido (deve corresponder ao identificador usado em `signer add`).
- **`REPOSITORY`**: um ou mais repositórios Docker dos quais o signer será removido.

---

## 3. Parâmetros

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `NAME` | Sim | Identificador do signer a ser removido (ex.: `alice`, `build-bot`). |
| `REPOSITORY` | Sim | Um ou mais repositórios Docker (ex.: `minharepo`, `meuregistro/meuapp`). |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `-f`, `--force` | boolean | `false` | Remove **sem pedir confirmação**. Útil em scripts ou quando você já confirmou manualmente a ação. |

---

## 5. Fluxo de funcionamento

1. **Validação de parâmetros**
    - Verifica se `NAME` e ao menos um `REPOSITORY` foram fornecidos; caso contrário, exibe a ajuda.
2. **Confirmação (salvo se `-force`)**
    - Por padrão, solicita que você confirme a remoção do signer mais recente daquele repositório.
3. **Atualização do metadata de Trust**
    - Ajusta o metadata local em `~/.docker/trust/tuf/` para excluir o signer da role “targets” do(s) repositório(s) indicado(s).
4. **Sincronização com Notary Server**
    - Na próxima operação de push ou sign, o cliente enviará ao servidor de Content Trust a nova configuração sem o signer removido.

---

## 6. Exemplos de uso

1. **Remover “alice” de `minharepo` (com confirmação)**
    
    ```bash
    docker trust signer remove alice minharepo
    # Prompt:
    #   Are you sure you want to remove signer "alice" from "minharepo"? [y/N]
    
    ```
    
2. **Remover “build-bot” de dois repositórios, sem confirmação**
    
    ```bash
    docker trust signer remove --force build-bot app/frontend app/backend
    # Remove imediatamente build-bot de ambos os repositórios
    
    ```
    
3. **Fluxo típico de revogação**
    
    ```bash
    # 1. Visualize current signers:
    docker trust inspect --pretty meuregistro/meuapp
    
    # 2. Remova o signer “bob”:
    docker trust signer remove bob meuregistro/meuapp
    
    # 3. Verifique se bob foi removido:
    docker trust inspect --pretty meuregistro/meuapp
    
    ```
    

---

## 7. Tabela de referência rápida

| Componente | Sintaxe | Descrição |
| --- | --- | --- |
| Comando base | `docker trust signer remove` | Revoga a permissão de um signer para assinar imagens em repositórios. |
| Parâmetro | `NAME` | Nome do signer a ser removido. |
| Parâmetro | `REPOSITORY` | Repositório(s) alvo(s) da remoção. |
| Opção | `-f`, `--force` | Executa sem solicitar confirmação interativa. |

---

Com isso, você tem tudo o que precisa para **remover** signers dos seus repositórios Docker, garantindo que apenas as chaves autorizadas possam continuar assinando imagens. Se precisar de mais cenários ou esclarecimentos, é só falar!