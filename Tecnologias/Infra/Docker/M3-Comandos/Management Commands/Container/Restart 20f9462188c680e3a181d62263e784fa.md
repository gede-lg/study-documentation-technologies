# Restart

Olá Gedê! A.R.I.A. aqui para te explicar o `docker container restart`.

Este comando é um atalho muito conveniente. Ele executa duas ações em sequência: primeiro **para** (`stop`) e depois **inicia** (`start`) um ou mais contêineres. É a maneira mais rápida de "reinicializar" um serviço que está rodando.

---

### **Sintaxe Geral**

```bash
docker container restart [OPÇÕES] <ID_ou_Nome_do_Container_1> [ID_ou_Nome_do_Container_2...]

```

- **`[OPÇÕES]`**: Modificadores que controlam como o contêiner é reiniciado.
- **`<ID_ou_Nome_do_Container...>`**: O identificador (ID ou nome) de um ou mais contêineres que você deseja reiniciar.

---

### **Parâmetros (Options)**

| Parâmetro | Finalidade | Exemplo de Uso |
| --- | --- | --- |
| **`-t`, `--timeout int`** | Define um **tempo de espera** (em segundos) para o contêiner parar graciosamente. O Docker envia um sinal de parada (SIGTERM) e aguarda esse tempo. Se o contêiner não parar, ele será forçadamente encerrado (SIGKILL) e então reiniciado. O padrão é 10 segundos. | `docker restart -t 30 meu_app` |
| **`-s`, `--signal string`** | Permite **especificar o sinal** que será enviado ao contêiner para o processo de parada, em vez do SIGTERM padrão. Útil para aplicações que respondem a sinais específicos (ex: `SIGHUP` para recarregar configurações). | `docker restart -s SIGHUP meu_app` |

---

### **Como Funciona o `timeout`**

Entender o `--timeout` é importante:

1. `docker restart meu_app` é executado.
2. O Docker envia um sinal `SIGTERM` para o processo principal dentro do `meu_app`, pedindo que ele termine suas operações e encerre de forma limpa.
3. O Docker aguarda pelo tempo definido no `-timeout` (padrão de 10 segundos).
4. **Se** o contêiner parar sozinho nesse tempo, ótimo. O Docker então o inicia novamente.
5. **Se** o tempo esgotar e o contêiner ainda estiver rodando, o Docker envia um `SIGKILL`, que encerra o processo à força, e então o inicia novamente.

---

### **Exemplo Prático**

1. **Inicie um contêiner:**
    
    ```bash
    docker run -d --name meu-servidor nginx
    
    ```
    
2. **Reinicie o contêiner:**
Imagine que você alterou um arquivo de configuração que o NGINX lê na inicialização. Para aplicar a mudança, você precisa reiniciá-lo.
    
    ```bash
    docker restart meu-servidor
    
    ```
    
    O contêiner NGINX será parado e iniciado novamente.
    
3. **Reinicie com um tempo de espera maior:**
Se você tem um serviço que demora mais para fazer um shutdown limpo (ex: salvar dados em um banco), você pode aumentar o tempo de espera.
    
    ```bash
    docker restart --timeout=60 meu-servidor
    
    ```
    

É um comando simples, mas fundamental para o gerenciamento do ciclo de vida dos seus contêineres, Gedê. Se tiver mais perguntas, é só chamar!