# CP

## Visão Geral

O comando `docker container cp` (ou `docker cp`) serve para copiar arquivos e diretórios entre o sistema de ficheiros de um container em execução (ou parado) e o sistema de ficheiros local. Ele funciona de forma semelhante ao `cp -a` do Unix, preservando permissões sempre que possível e, opcionalmente, metadados de dono/grupo.

([docs.docker.com](https://docs.docker.com/reference/cli/docker/container/cp/?utm_source=chatgpt.com))

---

## Sintaxe

```bash
# Copiar de container para host
docker container cp [OPÇÕES] CONTAINER:SRC_PATH DEST_PATH|-

# Copiar de host para container
docker cp [OPÇÕES] SRC_PATH|- CONTAINER:DEST_PATH

```

- **CONTAINER:** nome ou ID do container alvo.
- **SRC_PATH / DEST_PATH:** caminho de origem ou destino, que pode ser arquivo ou diretório.
- como **SRC_PATH** lê um tar via STDIN; como **DEST_PATH** envia um tar via STDOUT. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/container/cp/?utm_source=chatgpt.com))

---

## Aliases

- `docker container cp`
- `docker cp`

---

## Parâmetros de Caminho

| Padrão | Descrição |
| --- | --- |
| `CONTAINER:SRC_PATH` | Copia o arquivo ou diretório **SRC_PATH** dentro do container para o destino local. |
| `SRC_PATH CONTAINER:DEST_PATH` | Copia do sistema local (**SRC_PATH**) para o caminho **DEST_PATH** dentro do container. |
| `-` (stdin/stdout) | Use `-` no lugar de **SRC_PATH** para ler um tar da entrada padrão e extrair no container, ou no lugar de **DEST_PATH** para escrever um tar na saída. |

---

## Opções

| Opção | Padrão | Descrição |
| --- | --- | --- |
| `-a, --archive` | false | Modo “archive”: copia recursivamente e preserva todas as informações de UID, GID, timestamps e permissões. |
| `-L, --follow-link` | false | Segue sempre links simbólicos no **SRC_PATH** em vez de copiar apenas o link. |
| `-q, --quiet` | false | Suprime a exibição de progresso durante a cópia. |

*Todas as opções acima estão listadas no help do próprio Docker.* ([github.com](https://github.com/docker/cli/blob/master/docs/reference/commandline/cp.md?utm_source=chatgpt.com))

---

## Exemplos de Uso

1. **Copiar um arquivo do container para o host**
    
    ```bash
    docker container cp webapp:/app/log.txt ./logs/
    
    ```
    
    Copia `log.txt` do container `webapp` para a pasta local `./logs/`.
    
2. **Copiar um diretório inteiro**
    
    ```bash
    docker cp db01:/var/lib/mysql ./backup-mysql --archive
    
    ```
    
    Recursivamente copia todo `/var/lib/mysql` preservando metadata.
    
3. **Enviar um arquivo local para dentro do container**
    
    ```bash
    docker cp ./script.sh worker:/usr/local/bin/
    
    ```
    
4. **Extrair um tar via stdin no container**
    
    ```bash
    tar cf - ./site | docker cp - frontend:/usr/share/nginx/html
    
    ```
    
    Empacota a pasta `./site` e envia diretamente para o container `frontend`.
    
5. **Baixar um tar da pasta do container via stdout**
    
    ```bash
    docker container cp backend:/var/data - | tar xf -
    
    ```
    
    Cria um tar de `/var/data` no container `backend` e descompacta localmente.
    
6. **Copiar seguindo links simbólicos**
    
    ```bash
    docker cp --follow-link backup:/etc/alternatives/java /tmp/java-link
    
    ```
    
7. **Modo silenciado**
    
    ```bash
    docker cp --quiet logsrv:/opt/app/logs.log ./ && echo "Copiado com sucesso!"
    
    ```
    

---

> Dica:
> 
> - Combine com `tar` e pipes para operações avançadas de backup e restauração.
> - Lembre-se de que `docker cp` não cria diretórios pai que não existam no destino. Crie-os antes se necessário.