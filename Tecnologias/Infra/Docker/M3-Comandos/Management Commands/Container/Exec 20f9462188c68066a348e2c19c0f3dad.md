# Exec

Olá Gedê! A.R.I.A. aqui para mais uma.

O comando `docker container exec` é uma das ferramentas mais utilizadas no dia a dia com Docker. Ele serve para **executar um comando dentro de um contêiner que já está em execução**.

É o seu portal de entrada para "entrar" em um contêiner e verificar logs, mexer em arquivos, instalar um pacote de depuração ou simplesmente rodar um shell interativo (`bash`, `sh`, etc.).

---

### **Sintaxe Geral**

```bash
docker container exec [OPÇÕES] <ID_ou_Nome_do_Container> <COMANDO> [ARGUMENTOS...]

```

- **`[OPÇÕES]`**: Modificadores que alteram o comportamento do comando a ser executado.
- **`<ID_ou_Nome_do_Container>`**: O identificador (ID ou nome) do contêiner que está rodando.
- **`<COMANDO>`**: O comando que você deseja executar dentro do contêiner (ex: `ls`, `ps`, `bash`).
- **`[ARGUMENTOS...]`**: Argumentos para o comando (ex: para o comando `ls`, um argumento poderia ser `l /app`).

---

### **Parâmetros (Options)**

Vamos detalhar as opções em uma tabela para ficar bem claro.

| Parâmetro | Finalidade | Exemplo de Uso |
| --- | --- | --- |
| **`-i`, `--interactive`** | Mantém o `STDIN` (entrada padrão) aberto. É **essencial** para comandos interativos, como um shell, pois permite que você digite comandos. | `docker exec -i ...` |
| **`-t`, `--tty`** | Aloca um "pseudo-terminal". Isso formata a saída para que se pareça com um terminal de verdade. É **quase sempre usado em conjunto com `-i`** (formando `-it`) para obter um shell totalmente funcional. | `docker exec -t ...` |
| **`-d`, `--detach`** | Executa o comando em "modo destacado" (detached), ou seja, em **segundo plano**. O comando roda, mas seu terminal fica livre imediatamente. | `docker exec -d meu_container sh -c "sleep 10"` |
| **`-w`, `--workdir string`** | Define o **diretório de trabalho** onde o comando será executado dentro do contêiner. | `docker exec -w /app meu_container ls -l` |
| **`-e`, `--env list`** | Define uma ou mais **variáveis de ambiente** apenas para a execução deste comando específico. | `docker exec -e MINHA_VAR=teste meu_container printenv` |
| **`--env-file list`** | Lê variáveis de ambiente de um arquivo para usar na execução do comando. | `docker exec --env-file ./vars.env ...` |
| **`-u`, `--user string`** | Executa o comando como um **usuário específico** (ou UID) dentro do contêiner. Útil para testar permissões. | `docker exec -u www-data meu_container whoami` |
| **`--privileged`** | Concede **privilégios estendidos** de root (do host) ao comando. Use com muito cuidado, pois quebra o isolamento de segurança do contêiner. | `docker exec --privileged ...` |
| **`--detach-keys string`** | Permite redefinir a sequência de teclas para "desanexar" de um contêiner sem pará-lo (padrão é `Ctrl+P`, `Ctrl+Q`). | `docker exec --detach-keys="ctrl-a,q" ...` |

---

### **Exemplos Práticos**

O uso mais comum disparado é abrir um shell interativo para "entrar" no contêiner e poder investigar o que está acontecendo lá dentro.

1. **Iniciar um contêiner de exemplo (se não tiver um rodando):**
    
    ```bash
    docker run -d --name meu-app-rodando nginx
    
    ```
    
2. **Abrir um shell interativo (`bash`) dentro do contêiner:**
    
    ```bash
    docker exec -it meu-app-rodando bash
    
    ```
    
    - **`i`** (interactive) permite que você digite.
    - **`t`** (tty) formata o terminal.
    - `meu-app-rodando` é o nome do contêiner.
    - `bash` é o comando que você quer rodar.
3. **Executar um comando simples sem abrir um shell:**
    
    ```bash
    # Lista os arquivos no diretório padrão do nginx
    docker exec meu-app-rodando ls -l /usr/share/nginx/html
    
    ```
    
    Neste caso, `-it` não é necessário, pois o comando não é interativo.
    
4. **Executar um processo em segundo plano:**
    
    ```bash
    # Cria um arquivo vazio após 5 segundos, em segundo plano
    docker exec -d meu-app-rodando sh -c "sleep 5 && touch /tmp/arquivo-criado.txt"
    
    ```
    

Este comando é fundamental no seu kit de ferramentas Docker, Gedê. Se tiver qualquer outra questão, é só chamar!