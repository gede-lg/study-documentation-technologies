# Commit

Olá Gedê!

A.R.I.A. na área para te ajudar a desvendar mais um comando do Docker. O `docker container commit` é poderoso, mas é importante usá-lo com sabedoria.

Basicamente, ele permite que você crie uma **nova imagem Docker** a partir do estado atual de um contêiner. Pense nisso como tirar uma "foto" (snapshot) de um contêiner em execução (ou parado) e salvar essa foto como um modelo que pode ser reutilizado.

É muito útil para depuração ou para salvar um ambiente que você configurou manualmente, mas atenção: para automação e pipelines de produção, a prática recomendada é sempre usar um `Dockerfile`, pois ele garante a reprodutibilidade do seu ambiente de forma clara e versionável. O `commit` é mais para situações pontuais.

Vamos detalhar a estrutura e as opções.

---

### **Sintaxe Geral**

```bash
docker container commit [OPÇÕES] <ID_ou_Nome_do_Container> [nome_do_repositorio[:tag]]

```

- **[OPÇÕES]**: Modificadores que alteram como a imagem é criada.
- **<ID\_ou\_Nome\_do\_Container>**: O identificador (ID ou nome) do contêiner do qual você quer criar a imagem.
- **[nome\_do\_repositorio[:tag]]**: O nome e a tag que você quer dar para a nova imagem (ex: `meu-app-modificado:1.1`). Se você não especificar uma tag, a tag `:latest` será usada por padrão.

---

### **Parâmetros (Options)**

Aqui está a tabela detalhando cada parâmetro para facilitar a consulta:

| Parâmetro | Sintaxe de Uso | Finalidade |
| --- | --- | --- |
| **`-a`, `--author`** | `--author "Gedê <gededev@email.com>"` | Permite que você especifique o autor da imagem. Essa informação fica registrada nos metadados da imagem. |
| **`-c`, `--change`** | `--change 'CMD ["npm", "start"]'` | Aplica uma instrução de `Dockerfile` diretamente na imagem que está sendo criada. É extremamente útil para alterar metadados da imagem, como o comando padrão (`CMD`), o ponto de entrada (`ENTRYPOINT`) ou variáveis de ambiente (`ENV`), sem precisar de um `Dockerfile`. Você pode usar essa flag várias vezes. |
| **`-m`, `--message`** | `--message "Instalado o curl para debug"` | Adiciona uma mensagem de commit, similar ao `git commit -m`. Ajuda a documentar o porquê de a imagem ter sido criada ou o que foi alterado. |
| **`-p`, `--pause`** | `--pause=false` | Por padrão (`true`), o Docker pausa todos os processos dentro do contêiner durante o commit. Isso garante a consistência do sistema de arquivos, evitando que dados sejam gravados no meio do processo. Em casos raros, você pode desativar isso com `--pause=false`. |

---

### **Exemplo Prático**

Imagine que você iniciou um contêiner `ubuntu`, instalou uma ferramenta (como o `git`) e agora quer salvar esse estado.

1. **Inicie o contêiner:**
    
    ```bash
    docker run -it --name meu-ubuntu ubuntu bash
    
    ```
    
2. **Dentro do contêiner, faça uma alteração (instale o git):**
    
    ```bash
    # apt-get update && apt-get install -y git
    
    ```
    
3. **Saia do contêiner (pressionando `CTRL+D`).**
4. **Agora, crie uma nova imagem a partir desse contêiner modificado:**
    
    ```bash
    docker commit \\
      -a "Gedê" \\
      -m "Adicionada a instalação do git" \\
      --change 'CMD ["bash"]' \\
      meu-ubuntu \\
      gedelg/ubuntu-com-git:1.0
    
    ```
    

Ao executar `docker images`, você verá sua nova imagem `gedelg/ubuntu-com-git` com a tag `1.0` pronta para ser usada!

Espero que essa explicação tenha sido clara e útil para você, Gedê! Se precisar de mais alguma coisa, é só chamar a A.R.I.A. aqui.