# Update

## Visão Geral

O comando `docker context update` permite **modificar** um contexto Docker já existente, alterando sua descrição e/ou configurações de endpoint (Docker e Kubernetes) sem a necessidade de recriá-lo. Isso é útil para ajustar dinamicamente ambientes remotos ou locais conforme suas necessidades. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/context/update/?utm_source=chatgpt.com))

---

## Sintaxe

```bash
docker context update [OPÇÕES] CONTEXT

```

- **CONTEXT**: nome do contexto a ser atualizado. Deve existir previamente (lista em `docker context ls`). ([docs.docker.com](https://docs.docker.com/reference/cli/docker/context/update/?utm_source=chatgpt.com))

---

## Configuração de Endpoint

Você pode atualizar apenas a parte desejada do endpoint Docker ou Kubernetes. Os campos dentro da string `--docker` ou `--kubernetes` são os mesmos usados em `docker context create`.

| Campo | Descrição |
| --- | --- |
| `host` | URL do daemon Docker (por ex.: `tcp://meuserver:2376` ou `unix:///var/run/docker.sock`). |
| `ca` | Caminho para arquivo CA (certificado da autoridade). |
| `cert` | Caminho para o certificado TLS do cliente. |
| `key` | Caminho para a chave privada TLS do cliente. |
| `skip-tls-verify` | Se `true`, pula a validação do certificado do servidor (útil em ambientes de teste). |
| `from` | (Docker only) copia a configuração de endpoint de outro contexto como base antes de aplicar alterações. |

> Obs.:
> 
> - Se usar `-from`, o novo endpoint herda totalmente a configuração do contexto origem, e então aplica os ajustes adicionais.
> - Campos não mencionados em `-docker` ou `-kubernetes` permanecem inalterados (exceto quando `from` é usado sem outras flags, copiando tudo). ([docs.docker.com](https://docs.docker.com/engine/manage-resources/contexts/?utm_source=chatgpt.com))

---

## Opções

| Opção | Descrição |
| --- | --- |
| `--description string` | Atualiza a **descrição** do contexto (texto livre de identificação). |
| `--docker stringToString` | Define ou ajusta o **endpoint Docker** (pares `chave=valor` vírgula-separados). |
| `--kubernetes stringToString` | Define ou ajusta o **endpoint Kubernetes** (pares `chave=valor`). |

---

## Exemplos

1. **Atualizar apenas a descrição**
    
    ```bash
    docker context update my-context \
      --description "Contexto de staging atualizado"
    
    ```
    
    Confirmação:
    
    ```
    my-context
    Successfully updated context "my-context"
    ``` :contentReference[oaicite:3]{index=3}
    
    ```
    
2. **Alterar o endpoint Docker**
    
    ```bash
    docker context update my-context \
      --docker "host=tcp://192.168.100.50:2376,skip-tls-verify=true"
    
    ```
    
    Mantém os demais campos (CA, cert, key) inalterados. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/context/update/?utm_source=chatgpt.com))
    
3. **Copiar endpoint de outro contexto e depois modificar**
    
    ```bash
    docker context update dev-context \
      --docker "from=prod-context,host=tcp://dev.example.com:2376"
    
    ```
    
    Usa `prod-context` como base, mas aponta o host para `dev.example.com`. ([docs.docker.com](https://docs.docker.com/engine/manage-resources/contexts/?utm_source=chatgpt.com))
    
4. **Atualizar endpoint Kubernetes**
    
    ```bash
    docker context update my-context \
      --kubernetes "config=~/kube/config,namespace=staging"
    
    ```
    
    Ajusta apenas as configurações do cluster Kubernetes associado. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/context/update/?utm_source=chatgpt.com))
    

---

> Dica:
> 
> 
> Após a atualização, verifique com:
> 
> ```bash
> docker context inspect my-context
> 
> ```
> 
> para confirmar que os campos desejados foram corretamente alterados. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/context/update/?utm_source=chatgpt.com))
>