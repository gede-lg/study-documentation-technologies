# Push

Claro, Gustavo! Aqui vai uma explicação detalhada **com tabela** sobre todos os parâmetros do comando `docker image push` conforme solicitado, cobrindo desde a sintaxe, função principal, até cada opção disponível.

---

# **Guia Completo: Comando `docker image push` e seus Parâmetros**

---

## **Introdução**

O comando `docker image push` (ou apenas `docker push`) é utilizado para enviar (“*subir*”) imagens Docker do seu ambiente local para um *registro* remoto (Docker Hub, GitHub Packages, Google Container Registry, Harbor, etc). Isso permite compartilhar, distribuir ou versionar imagens entre ambientes, equipes ou servidores.

---

## **Sumário**

1. [Sintaxe Inicial e Finalidade](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#sintaxe-inicial-e-finalidade)
2. [Parâmetros e Opções Explicados](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#par%C3%A2metros-e-op%C3%A7%C3%B5es-explicados)
    - [Tabela Resumo dos Parâmetros](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#tabela-resumo-dos-par%C3%A2metros)
    - [Explicação Detalhada de Cada Parâmetro](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#explica%C3%A7%C3%A3o-detalhada-de-cada-par%C3%A2metro)
3. [Cenários de Uso](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#cen%C3%A1rios-de-uso)
4. [Exemplo Prático Completo](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#exemplo-pr%C3%A1tico-completo)
5. [Boas Práticas e Observações](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#boas-pr%C3%A1ticas-e-observa%C3%A7%C3%B5es)
6. [Sugestões para Aprofundamento](https://chatgpt.com/c/68465468-f320-8013-b0ec-40c431f3c58f#sugest%C3%B5es-para-aprofundamento)

---

## **Sintaxe Inicial e Finalidade**

### **Sintaxe Básica**

```
docker image push [OPTIONS] NAME[:TAG]

```

ou, de forma abreviada:

```
docker push [OPTIONS] NAME[:TAG]

```

### **Finalidade**

Enviar uma ou mais imagens Docker do ambiente local para um repositório remoto, possibilitando versionamento, backup, distribuição em pipelines de CI/CD e ambientes de produção ou homologação.

---

## **Parâmetros e Opções Explicados**

### **Tabela Resumo dos Parâmetros**

| Parâmetro | Alias | Tipo | Valor Esperado | Descrição |
| --- | --- | --- | --- | --- |
| `NAME[:TAG]` | - | ARG | Ex: `meuapp:1.0`, `nginx:latest` | Nome da imagem e, opcionalmente, a tag a ser enviada. |
| `-a`, `--all-tags` | - | FLAG | - | Envia **todas as tags** existentes da imagem para o repositório, não só a tag especificada. |
| `--disable-content-trust` | - | FLAG | true/false (default: true) | Desabilita o mecanismo de verificação/assinatura de conteúdo. (Padrão: true/desativado) |
| `--platform` | - | STRING | Ex: `linux/amd64`, `linux/arm64` | Envia uma variante específica de plataforma da imagem, útil para multi-arch builds. |
| `-q`, `--quiet` | - | FLAG | - | Suprime (silencia) a saída detalhada do comando, mostrando apenas erros ou o essencial. |

---

### **Explicação Detalhada de Cada Parâmetro**

### 1. **NAME[:TAG]**

- **Obrigatório**: Sim
- **O que é?**
    
    É o nome do repositório remoto para onde a imagem será enviada.
    
    Exemplos:
    
    - `docker.io/usuario/meuapp:1.0`
    - `registry.empresa.com.br/projeto/imagem:dev`
    - `nginx` (padrão para o Docker Hub, tag `latest`)

---

### 2. **`a`, `-all-tags`**

- **O que faz?**
    
    Normalmente, o comando só envia a tag informada. Com esta flag, **todas as tags** da imagem local serão enviadas para o repositório.
    
- **Exemplo de uso:**
    
    ```
    docker image push -a meuapp
    
    ```
    
    Se `meuapp` tiver tags `1.0`, `1.1`, `latest`, todas serão enviadas.
    

---

### 3. **`-disable-content-trust`**

- **O que faz?**
    
    Desabilita o mecanismo de verificação/assinatura de conteúdo das imagens (Content Trust/Notary).
    
    Por padrão, está desativado (`true`), ou seja, **não assina** a imagem.
    
- **Quando usar?**
    
    Em ambientes onde você **não precisa** validar a autenticidade/integridade das imagens.
    
- **Exemplo de uso:**
    
    ```
    docker image push meuapp:1.0 --disable-content-trust=false
    
    ```
    
    *(Aqui ativaria o Content Trust, se configurado)*
    

---

### 4. **`-platform <string>`**

- **O que faz?**
    
    Permite escolher qual *variante de plataforma* será enviada, em builds multi-arch (multi-plataforma).
    
    Exemplo: imagens que suportam tanto Linux/amd64 quanto Linux/arm64.
    
- **Sintaxe esperada:**
    
    ```
    --platform os/arch[/variant]
    
    ```
    
    Exemplos:
    
    - `-platform linux/amd64`
    - `-platform linux/arm64`
    - `-platform linux/arm/v7`
- **Quando usar?**
    
    Ao criar imagens multiplataforma e quiser enviar uma variante específica, não o “index” de todas as variantes.
    
- **Exemplo de uso:**
    
    ```
    docker image push meuapp:1.0 --platform linux/arm64
    
    ```
    

---

### 5. **`q`, `-quiet`**

- **O que faz?**
    
    Reduz a verbosidade da saída do comando.
    
    Útil em scripts e pipelines de CI/CD para evitar poluição visual.
    
- **Exemplo de uso:**
    
    ```
    docker image push -q meuapp:1.0
    
    ```
    

---

### **Resumo Visual (Tabela Sintetizada)**

| Parâmetro | Alias | Requer Valor? | Valor Esperado | Utilidade Prática |
| --- | --- | --- | --- | --- |
| NAME[:TAG] | - | Sim | Nome/tag da imagem | Identifica a imagem a ser enviada |
| --all-tags | -a | Não | (flag) | Envia todas as tags da imagem |
| --disable-content-trust |  | Não | true/false | Habilita/desabilita assinatura/validação de conteúdo |
| --platform |  | Sim | os/arch[/variant] | Escolhe a variante de plataforma (em builds multi-arch) |
| --quiet | -q | Não | (flag) | Reduz a saída do comando |

---

## **Cenários de Uso**

- **Padrão:**
    
    Enviar uma imagem específica:
    
    ```
    docker image push meuapp:1.0
    
    ```
    
- **Enviar todas as tags:**
    
    ```
    docker image push -a meuapp
    
    ```
    
- **Multi-plataforma (especificando variante):**
    
    ```
    docker image push meuapp:1.0 --platform linux/arm64
    
    ```
    
- **Em pipeline (quiet mode):**
    
    ```
    docker image push -q meuapp:1.0
    
    ```
    

---

## **Exemplo Prático Completo**

### **1. Criar imagem multi-tag localmente:**

```
docker build -t usuario/meuapp:1.0 .
docker tag usuario/meuapp:1.0 usuario/meuapp:latest

```

### **2. Enviar todas as tags de uma só vez:**

```
docker image push -a usuario/meuapp

```

### **3. Enviar uma imagem específica, com saída silenciosa:**

```
docker image push -q usuario/meuapp:1.0

```

### **4. Enviar apenas a variante arm64 da imagem (em builds multi-plataforma):**

```
docker image push usuario/meuapp:1.0 --platform linux/arm64

```

---

## **Boas Práticas e Observações**

- Prefira sempre especificar a tag ao enviar imagens (evite push sem tag, pois o padrão é `latest`).
- Utilize o parâmetro `-all-tags` com cautela para evitar sobrescrever versões importantes no registro remoto.
- O parâmetro `-disable-content-trust` raramente precisa ser modificado em ambientes de desenvolvimento, mas pode ser obrigatório em ambientes corporativos (políticas de segurança).
- Em pipelines automatizados, sempre utilize `-quiet` para facilitar logs.
- Em imagens multiplataforma (com Docker Buildx), só use `-platform` se realmente precisar restringir a variante enviada.

---

## **Sugestões para Aprofundamento**

- [Documentação oficial do Docker push](https://docs.docker.com/engine/reference/commandline/push/)
- Como publicar e versionar imagens multiplataforma (Docker Buildx)
- Segurança em registros Docker (Content Trust e Notary)
- Integração com sistemas CI/CD (GitHub Actions, GitLab CI, Jenkins)
- Otimização de repositórios privados e controle de acesso

---

Se quiser exemplos de autenticação em registro privado, dicas para Docker Buildx ou integração com CI/CD, posso detalhar para você. É só pedir!