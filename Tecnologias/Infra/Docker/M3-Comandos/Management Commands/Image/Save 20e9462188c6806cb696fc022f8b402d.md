# Save

Olá Gedê!

Claro, aqui está uma explicação bem estruturada sobre o comando `docker image save`, detalhando cada um dos seus componentes.

O comando **`docker image save`** é utilizado para salvar uma ou mais imagens Docker em um arquivo de formato `.tar`. Esse arquivo contém todas as camadas (layers), metadados e tags da imagem, permitindo que você a transfira para outro sistema ou a armazene como backup sem a necessidade de um registro (como o Docker Hub).

---

## Sintaxe Geral

A estrutura básica do comando é a seguinte:

```bash
docker image save [OPTIONS] IMAGE [IMAGE...]

```

- **`docker image save`**: O comando principal.
- **`[OPTIONS]`**: Parâmetros opcionais que modificam o comportamento do comando.
- **`IMAGE [IMAGE...]`**: O nome ou ID de uma ou mais imagens que você deseja salvar.

---

## Parâmetros e Opções

Vamos detalhar cada parte do comando.

### `IMAGE [IMAGE...]` (Argumento Obrigatório)

- **Finalidade**: Especificar qual(is) imagem(ns) Docker devem ser salvas no arquivo `.tar`. Você pode listar várias imagens, separando-as por um espaço, e todas serão incluídas no mesmo arquivo.
- **Sintaxe**: `[NOME_DA_IMAGEM]:[TAG]` ou `[ID_DA_IMAGEM]`.
- **Exemplo**: `ubuntu:latest` ou `b854935201b0`.

### `Options` (Parâmetros Opcionais)

### `o, --output string`

- **Finalidade**: Por padrão, o `docker image save` escreve o arquivo `.tar` na saída padrão do sistema (STDOUT), que é o seu terminal. A opção `o` (ou sua forma longa `-output`) é usada para **redirecionar essa saída diretamente para um arquivo**, o que é a forma mais comum e prática de usar o comando.
- **Sintaxe**: `o caminho/para/seu/arquivo.tar` ou `-output caminho/para/seu/arquivo.tar`.
- **Exemplo de Uso**:
Neste caso, a imagem `ubuntu:latest` será salva no arquivo `ubuntu_latest.tar` no diretório atual.
    
    ```bash
    docker image save -o ubuntu_latest.tar ubuntu:latest
    
    ```
    

### `-platform string`

- **Finalidade**: Esta opção é útil quando você trabalha com **imagens multi-plataforma** (multi-platform), que são imagens construídas para rodar em diferentes arquiteturas de processador (como `amd64`, `arm64`, etc.). O `-platform` permite que você salve apenas a variante da imagem para uma plataforma específica.
- **Sintaxe**: `-platform "os[/arch[/variant]]"`
    - `os`: Sistema operacional (ex: `linux`, `windows`).
    - `arch`: Arquitetura (ex: `amd64`, `arm64`).
    - `variant` (opcional): Variação da arquitetura (ex: `v7`).
- **Exemplo de Uso**:
Este comando salvará apenas a versão da imagem `meu_app:1.0` que é compatível com a arquitetura `linux/amd64`.
    
    ```bash
    docker image save --platform "linux/amd64" -o meu_app_amd64.tar meu_app:1.0
    
    ```
    

### Alias

- **`docker save`**: É um atalho (alias) para `docker image save`. Funciona exatamente da mesma forma e é mais rápido de digitar.
    - **Exemplo**: `docker save -o app.tar minha-imagem` é o mesmo que `docker image save -o app.tar minha-imagem`.

---

## Tabela Resumo

| Parâmetro/Opção | Sintaxe | Descrição |
| --- | --- | --- |
| **`IMAGE [IMAGE...]`** | `[nome:tag]` ou `[id]` | **(Obrigatório)** Define a(s) imagem(ns) a serem salvas. |
| **`-o, --output`** | `-o <arquivo.tar>` | Escreve a saída em um arquivo específico em vez do terminal (STDOUT). |
| **`--platform`** | `--platform <plataforma>` | Salva apenas a variante de uma plataforma específica (ex: "linux/amd64"). |

---

## Exemplos Práticos

1. **Salvar uma imagem em um arquivo usando a opção `o` (Recomendado):**
    
    ```bash
    # Salva a imagem 'golang:1.22' no arquivo 'go_1.22.tar'
    docker save -o go_1.22.tar golang:1.22
    
    ```
    
2. **Salvar múltiplas imagens em um único arquivo:**
    
    ```bash
    # Salva as imagens 'redis:latest' e 'postgres:15' no arquivo 'banco_de_dados.tar'
    docker save -o banco_de_dados.tar redis:latest postgres:15
    
    ```
    
3. **Carregar a imagem em outro sistema:**
Depois de transferir o arquivo `.tar` para outra máquina, você pode carregá-lo no Docker local usando o comando `docker load`:
    
    ```bash
    # Carrega a(s) imagem(ns) do arquivo para o Docker local
    docker load -i go_1.22.tar
    
    ```
    

Espero que esta explicação detalhada ajude você, Gedê! Se tiver mais alguma dúvida, é só perguntar.