# LS

Olá Gedê!

Com certeza. O comando `docker image ls` é uma das ferramentas mais utilizadas no dia a dia com Docker. Ele serve para listar as imagens que estão armazenadas localmente na sua máquina.

Vamos detalhar cada parâmetro para que você domine completamente o seu uso.

---

### Sintaxe Geral

A estrutura básica do comando é:

```bash
docker image ls [OPÇÕES] [REPOSITÓRIO[:TAG]]

```

- **`[OPÇÕES]`**: São os *flags* que modificam o comportamento e a exibição da listagem (ex: `-all`, `-quiet`). Veremos todos eles em detalhes.
- **`[REPOSITÓRIO[:TAG]]`**: É um argumento opcional que permite filtrar a lista para mostrar apenas uma imagem específica e suas versões (tags).
    - **Exemplo:** `docker image ls ubuntu` listará todas as tags da imagem `ubuntu`.
    - **Exemplo:** `docker image ls golang:1.22` listará apenas a tag `1.22` da imagem `golang`.

### Atalhos (Aliases)

Você pode usar os seguintes comandos que fazem exatamente a mesma coisa. O mais comum e curto é `docker images`.

- `docker image list`
- `docker images`

---

### Detalhamento das Opções (OPTIONS)

Aqui está a explicação de cada parâmetro que você viu no `--help`.

### **`a` ou `-all`**

- **Finalidade**: Por padrão, o Docker oculta imagens "intermediárias". Essas são camadas de imagens que são criadas durante o processo de *build* de um Dockerfile, mas que não têm uma tag associada. A opção `a` mostra **todas** as imagens, incluindo essas camadas intermediárias.
- **Uso**: Muito útil para fazer uma limpeza profunda e ver tudo que está ocupando espaço em disco.
- **Exemplo**:
    
    ```bash
    docker image ls --all
    
    ```
    

### **`-digests`**

- **Finalidade**: Exibe o *digest* da imagem na listagem. O digest é um identificador único (um hash SHA256) para o conteúdo da imagem. Diferente da tag (ex: `:latest`), que pode apontar para imagens diferentes ao longo do tempo, o digest é imutável e garante que você está usando exatamente a mesma imagem.
- **Uso**: Essencial em ambientes de produção e CI/CD para garantir a imutabilidade e a segurança das imagens.
- **Exemplo**:
    
    ```bash
    docker image ls --digests
    
    ```
    

### **`f` ou `-filter`**

- **Finalidade**: Este é um dos parâmetros mais poderosos. Ele filtra a saída com base em uma ou mais condições no formato `chave=valor`.
- **Filtros Comuns**:
    - `dangling=true`: Lista apenas imagens "dangling" (pendentes), que são imagens que perderam sua tag e não são mais referenciadas por nenhum contêiner. São as candidatas perfeitas para exclusão.
    - `label=<key>=<value>`: Filtra por imagens que possuem um `LABEL` específico.
    - `before=<image:tag>`: Lista imagens criadas antes de uma imagem específica.
    - `since=<image:tag>`: Lista imagens criadas depois de uma imagem específica.
- **Exemplo de uso**:
    
    ```bash
    # Listar imagens pendentes (ótimas para limpar)
    docker image ls --filter "dangling=true"
    
    ```
    

### **`-format`**

- **Finalidade**: Permite formatar a saída usando um template Go. Isso é extremamente útil para extrair informações específicas e usar em scripts.
- **Sintaxe**:
    - `-format 'json'`: Retorna a lista em formato JSON.
    - `-format 'table {{.Repository}}\\t{{.Tag}}\\t{{.Size}}'`: Cria uma tabela customizada.
    - `-format '{{.ID}}'` : Lista apenas os IDs das imagens.
- **Placeholders Comuns**: `.ID`, `.Repository`, `.Tag`, `.Digest`, `.CreatedSince`, `.Size`.
- **Exemplo**:
    
    ```bash
    # Exibir apenas o repositório e a tag, separados por um traço
    docker image ls --format "{{.Repository}}-{{.Tag}}"
    
    ```
    

### **`-no-trunc`**

- **Finalidade**: Por padrão, o Docker trunca (encurta) o ID da imagem e outras saídas longas para facilitar a leitura. Usar `-no-trunc` exibe os valores completos.
- **Uso**: Indispensável quando você precisa do ID completo de uma imagem para usá-lo em outro comando ou script.
- **Exemplo**:
    
    ```bash
    docker image ls --no-trunc
    
    ```
    

### **`q` ou `-quiet`**

- **Finalidade**: Exibe **apenas** os IDs numéricos das imagens. Nada mais.
- **Uso**: É a opção perfeita para usar em conjunto com outros comandos. Por exemplo, para remover várias imagens de uma vez.
- **Exemplo Clássico (remover todas as imagens dangling)**:
    
    ```bash
    # O comando interno $(...) executa 'docker image ls -q -f "dangling=true"'
    # e passa a lista de IDs para o comando 'docker image rm'
    docker image rm $(docker image ls -q -f "dangling=true")
    
    ```
    

### **`-tree`**

- **Finalidade**: (EXPERIMENTAL) Lista imagens multi-plataforma em um formato de árvore, mostrando a imagem "manifest" principal e as imagens específicas de cada arquitetura (ex: `linux/amd64`, `linux/arm64`) abaixo dela.
- **Uso**: Útil quando você trabalha com imagens que precisam rodar em diferentes arquiteturas de processador.
- **Exemplo**:
    
    ```bash
    docker image ls --tree
    
    ```
    

---

### Tabela Resumo

Para facilitar a consulta rápida, aqui está uma tabela com todos os parâmetros:

| Parâmetro | Sintaxe Completa | Finalidade | Exemplo de Uso |
| --- | --- | --- | --- |
| **`-a`** | `--all` | Mostra todas as imagens, incluindo as camadas intermediárias. | `docker images -a` |
| **(nenhum)** | `--digests` | Mostra o digest (hash SHA256) da imagem. | `docker images --digests` |
| **`-f`** | `--filter` | Filtra a saída com base em uma condição (`chave=valor`). | `docker images -f "dangling=true"` |
| **(nenhum)** | `--format` | Formata a saída usando um template Go. | `docker images --format "{{.ID}}: {{.Tag}}"` |
| **(nenhum)** | `--no-trunc` | Não encurta a saída (ex: exibe o ID completo da imagem). | `docker images --no-trunc` |
| **`-q`** | `--quiet` | Mostra apenas os IDs numéricos das imagens. | `docker image rm $(docker images -q)` |
| **(nenhum)** | `--tree` | Lista imagens multi-plataforma em formato de árvore. (Experimental) | `docker images --tree` |

Espero que esta explicação detalhada ajude você, Gedê, a tirar o máximo proveito do comando `docker image ls` nos seus projetos! Se tiver mais alguma dúvida, pode perguntar.