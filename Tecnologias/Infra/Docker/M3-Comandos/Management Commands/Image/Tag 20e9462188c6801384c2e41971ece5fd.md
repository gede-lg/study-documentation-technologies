# Tag

Aqui vai uma explicação detalhada do comando `docker image tag`, organizada em seções e incluindo uma tabela resumindo seus parâmetros.

---

## 1. Visão Geral

O comando `docker image tag` (ou simplesmente `docker tag`) cria uma nova “tag” (rótulo) para uma imagem existente, permitindo referenciá-la com um nome diferente — por exemplo, para subir (push) em outro repositório ou versioná-la de forma mais clara.

---

## 2. Sintaxe e Componentes

```bash
docker image tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]

```

- **docker image tag**
    
    Comando completo no estilo “subcomando” (CLI moderna).
    
- **docker tag**
    
    Forma abreviada (é alias de `docker image tag`).
    
- **SOURCE_IMAGE[:TAG]**
    
    Nome da imagem de origem que será re-tagueada.
    
    - Pode ser o nome do repositório (`meu-app`), ou nome+tag (`meu-app:1.2.3`), ou mesmo o ID da imagem.
    - Se TAG não for especificada, assume-se `:latest`.
- **TARGET_IMAGE[:TAG]**
    
    Nome da nova “tag” que referenciará a mesma imagem de origem.
    
    - Geralmente inclui repositório, possivelmente prefixo de registro (`registry.exemplo.com/minha-conta/meu-app:v2`).
    - Se TAG não for especificada, assume-se `:latest`.

---

## 3. Finalidades / Casos de Uso

1. **Versionamento**
    
    Criar tags como `:v1.0`, `:stable`, `:dev` para organizar ciclos de release.
    
2. **Promover entre ambientes**
    
    Marcar uma imagem de teste como `:production` após validações.
    
3. **Mudança de repositório ou registro**
    
    Preparar o push para outro registry (ex.: Docker Hub → AWS ECR) re-tagueando com o host correto.
    
4. **Claridade sem reconstrução**
    
    Em vez de `docker build` várias vezes, re-utiliza a mesma imagem base com múltiplas tags.
    

---

## 4. Parâmetros em Detalhe

| Parâmetro | Obrigatório? | Descrição | Exemplo |
| --- | --- | --- | --- |
| `SOURCE_IMAGE` | Sim | Identificador da imagem existente (nome ou ID). | `meu-app` |
| `:TAG` (em SOURCE_IMAGE) | Não | Versão/variante da imagem de origem; default: `latest`. | `meu-app:1.0.0` |
| `TARGET_IMAGE` | Sim | Novo nome (possivelmente incluindo registry/repositório) para a mesma imagem. | `registry.ex.com/conta/meu-app` |
| `:TAG` (em TARGET_IMAGE) | Não | Tag desejada para a nova referência; default: `latest`. | `registry.ex.com/conta/meu-app:prod` |

---

## 5. Exemplos Práticos

1. **Taguear localmente**
    
    ```bash
    docker image tag minha-imagem:latest minha-imagem:v2
    
    ```
    
    Cria a tag `v2` a partir da `latest`.
    
2. **Preparar para outro registry**
    
    ```bash
    docker image tag minha-imagem:latest registry.ex.com/usuario/minha-imagem:stable
    
    ```
    
    Assim já fica pronta para `docker push registry.ex.com/usuario/minha-imagem:stable`.
    
3. **Usando ID da imagem**
    
    ```bash
    docker image tag 3f7be7a8c477 meu-app:release
    
    ```
    
    Se você não lembra o nome, basta usar o ID retornado por `docker images`.
    

---

## 6. Observações Adicionais

- **Não faz push automático**: após a tag, ainda é preciso `docker push TARGET_IMAGE`.
- **Tags múltiplas**: pode-se criar quantas tags quiser para a mesma imagem.
- **Convenção de nomes**:
    - `<HOSTNAME>/<NAMESPACE>/<REPOSITORY>:<TAG>`
    - Se `<HOSTNAME>` omitido, assume-se Docker Hub.

---

Com essa estrutura, você tem claro o que cada parte do comando faz, quando e por que usá-la. Qualquer dúvida ou necessidade de exemplos adicionais, é só falar!