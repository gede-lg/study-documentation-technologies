# Prune

A seguir, uma explicação completa e estruturada do comando **`docker volume prune`**, cobrindo sua finalidade, sintaxe, opções, fluxo de funcionamento e exemplos de uso.

---

## 1. O que faz este comando

O **`docker volume prune`** remove volumes locais que não estão em uso por nenhum contêiner. É uma forma rápida de liberar espaço em disco, eliminando volumes “órfãos”.

- Por padrão, remove **apenas volumes anônimos** (aqueles sem nome explícito).
- Com a opção `-all`, remove **todos** os volumes não referenciados, incluindo os nomeados.

---

## 2. Sintaxe geral

```bash
docker volume prune [OPTIONS]

```

Não há parâmetros posicionais — todas as configurações são definidas por meio de opções.

---

## 3. Opções disponíveis

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `-a`, `--all` | boolean | `false` | Remove **todos** os volumes não utilizados (anônimos **e** nomeados). |
| `--filter <filtro>` | string | — | Aplica filtros para selecionar quais volumes serão removidos. Ex.: `label=env=dev` |
| `-f`, `--force` | boolean | `false` | Remove sem solicitar confirmação interativa (“Are you sure?”). Útil em scripts. |

---

## 4. Fluxo de funcionamento

1. **Coleta de volumes não utilizados**
    - Identifica todos os volumes que **não estão montados** em nenhum contêiner.
    - Se `-all` estiver ativo, inclui também volumes nomeados.
2. **Aplicação de filtros**
    - Caso `-filter` seja usado, restringe a lista aos volumes que atendem a cada critério (ex.: labels).
3. **Confirmação**
    - Por padrão, exibe:
        
        ```
        WARNING! This will remove all local volumes not used by at least one container.
        Are you sure you want to continue? [y/N]
        
        ```
        
    - Se `f/--force` estiver presente, ignora essa solicitação e prossegue.
4. **Remoção efetiva**
    - Cada volume selecionado é removido do host, liberando o espaço correspondente.

---

## 5. Exemplos de uso

1. **Remover apenas volumes anônimos, com prompt**
    
    ```bash
    docker volume prune
    # WARNING! ... Are you sure you want to continue? [y/N]
    # y
    # Deleted Volumes:
    # volume1
    # volume2
    
    ```
    
2. **Remover todos os volumes não utilizados sem confirmação**
    
    ```bash
    docker volume prune --all --force
    # Deleted Volumes:
    # named_volume_a
    # named_volume_b
    # anonymous_volume_x
    
    ```
    
3. **Remover volumes não utilizados com filtro de label**
    
    ```bash
    docker volume prune --filter "label=env=staging"
    # WARNING! ... Are you sure you want to continue? [y/N]
    # y
    
    ```
    
4. **Fluxo em script para limpeza completa**
    
    ```bash
    # Remove todos os volumes parados sem pergunta
    docker volume prune -a -f
    
    ```
    

---

## 6. Tabela de referência rápida

| Componente | Sintaxe | Descrição |
| --- | --- | --- |
| Comando base | `docker volume prune [OPTIONS]` | Remove volumes locais não utilizados. |
| Opção | `-a`, `--all` | Inclui volumes nomeados na remoção. |
| Opção | `--filter <filtro>` | Seleciona volumes a remover com base em critérios (ex.: label). |
| Opção | `-f`, `--force` | Executa sem pedir confirmação interativa. |

---

Com isso, você tem tudo o que precisa para usar **`docker volume prune`** de forma segura e eficiente, mantendo seu ambiente livre de volumes órfãos. Se surgir qualquer dúvida ou cenário específico, é só avisar!