# Push

## Visão Geral

O comando `docker manifest push` envia uma lista de manifestos (manifest list) previamente criada para um repositório, tornando disponível no registry uma única tag que agrupa múltiplas imagens (por ex., diferentes arquiteturas). Esse recurso é **experimental** e serve principalmente para suportar cenários de imagens multi-plataforma. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/push/?utm_source=chatgpt.com))

---

## Sintaxe

```bash
docker manifest push [OPÇÕES] MANIFEST_LIST

```

- **MANIFEST_LIST**: nome (e tag) da lista de manifestos a ser enviada (ex.: `meu-registry/meu-app:multiarch`). ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))

---

## Opções

| Opção | Padrão | Descrição |
| --- | --- | --- |
| `--insecure` | false | Permite o push para registries sem TLS válido (autoassinados ou sem certificado). |
| `-p, --purge` | false | Remove a lista de manifestos **local** depois que o push for concluído, limpando o cache local. |

---

## Exemplos de Uso

1. **Push simples da lista de manifestos**
    
    ```bash
    docker manifest push meu-registry/meu-app:multiarch
    
    ```
    
    Publica no registry o manifesto que agrupa imagens para diferentes arquiteturas.
    
2. **Push e purge local**
    
    ```bash
    docker manifest push --purge meu-registry/meu-app:multiarch
    
    ```
    
    Envia o manifesto e, em seguida, remove a definição local de `meu-app:multiarch`.
    
3. **Push para registry inseguro**
    
    ```bash
    docker manifest push --insecure meu-registry-interno/meu-app:dev
    
    ```
    
    Útil em ambientes de teste onde o registry não possui TLS confiável.
    
4. **Fluxo completo de multi-arquitetura**
    
    ```bash
    # 1. Criar a lista (local)
    docker manifest create meu-registry/meu-app:latest \
      meu-registry/meu-app:amd64 \
      meu-registry/meu-app:arm64
    
    # 2. (Opcional) Anotar plataformas
    docker manifest annotate meu-registry/meu-app:latest \
      meu-registry/meu-app:arm64 --arch arm64 --os linux
    
    # 3. Enviar ao registry
    docker manifest push --purge meu-registry/meu-app:latest
    
    ```
    
    Após isso, `docker pull meu-registry/meu-app:latest` selecionará automaticamente a imagem correta para cada arquitetura. ([docker-docs.uclv.cu](https://docker-docs.uclv.cu/engine/reference/commandline/manifest_push/?utm_source=chatgpt.com))
    

---

> Dica:
> 
> 
> Essa funcionalidade requer que o Docker CLI esteja em modo experimental. Ative definindo `export DOCKER_CLI_EXPERIMENTAL=enabled` ou ajustando `"experimental": "enabled"` em `~/.docker/config.json`. ([stackoverflow.com](https://stackoverflow.com/questions/57937733/how-to-enable-experimental-docker-cli-features?utm_source=chatgpt.com))
>