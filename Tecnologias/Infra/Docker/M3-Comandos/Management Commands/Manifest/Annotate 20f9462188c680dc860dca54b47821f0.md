# Annotate

## Visão Geral

O comando `docker manifest annotate` adiciona metadados adicionais a uma entrada de manifesto local (parte de uma lista de manifestos multi-plataforma), permitindo especificar arquitetura, sistema operacional, variantes e recursos de SO para cada imagem referenciada. Essa funcionalidade é **experimental** e pode mudar ou ser removida sem aviso em versões futuras. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/annotate/?utm_source=chatgpt.com), [docker-docs.uclv.cu](https://docker-docs.uclv.cu/engine/reference/commandline/manifest_annotate/?utm_source=chatgpt.com))

---

## Sintaxe

```bash
docker manifest annotate [OPÇÕES] MANIFEST_LIST MANIFEST

```

- **MANIFEST_LIST**: nome (ou referência) da lista de manifestos que agrupa várias imagens.
- **MANIFEST**: nome (ou referência) da imagem dentro da lista a ser anotada. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/annotate/?utm_source=chatgpt.com))

---

## Opções

| Opção | Descrição |
| --- | --- |
| `--arch string` | Define a **arquitetura** (ex.: `amd64`, `arm64`, `ppc64le`). |
| `--os string` | Define o **sistema operacional** (ex.: `linux`, `windows`). |
| `--os-features strings` | Lista de **recursos do sistema operacional** (ex.: `sse4`, `fips`). |
| `--os-version string` | Versão específica do sistema operacional (ex.: `10.0.17763.1282`). |
| `--variant string` | Variante de arquitetura (ex.: `v7`, `v8`) para distinguir versões dentro da mesma arquitetura. |

> Fonte dos parâmetros: (man.archlinux.org)
> 

---

## Contexto de Uso

Após criar uma lista de manifestos com `docker manifest create`, utiliza-se `annotate` para garantir que cada entrada esteja corretamente marcada. Isso auxilia o Docker a selecionar automaticamente a imagem mais adequada ao ambiente do usuário ao efetuar um `docker pull`. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))

---

## Exemplos

1. **Anotar arquitetura e SO**
    
    ```bash
    docker manifest annotate my-list myimage:amd64 --arch amd64 --os linux
    
    ```
    
    Especifica que a entrada `myimage:amd64` é para sistemas Linux em arquitetura AMD64. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))
    
2. **Adicionar recursos e versão de SO**
    
    ```bash
    docker manifest annotate my-list myimage:arm64 \
      --arch arm64 \
      --os linux \
      --os-features selinux,fips \
      --os-version "5.10.0"
    
    ```
    
    Marca a imagem com features adicionais e a versão do kernel. ([labex.io](https://labex.io/tutorials/docker-how-to-use-docker-manifest-annotate-command-to-add-platform-information-555168?utm_source=chatgpt.com))
    
3. **Informar variante de arquitetura**
    
    ```bash
    docker manifest annotate my-list myimage:armhf \
      --arch arm \
      --os linux \
      --variant v7
    
    ```
    
    Especifica que a entrada ARM é da variante v7. ([labex.io](https://labex.io/tutorials/docker-how-to-use-docker-manifest-annotate-command-to-add-platform-information-555168?utm_source=chatgpt.com))
    

---

> Dica:
> 
> 
> Sempre inspecione o resultado com `docker manifest inspect my-list` para verificar se as anotações foram aplicadas corretamente e aparecem no campo `platform` de cada manifesto listado.
>