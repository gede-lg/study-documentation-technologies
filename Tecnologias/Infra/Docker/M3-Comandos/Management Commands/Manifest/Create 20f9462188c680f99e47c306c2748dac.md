# Create

## Visão Geral

O comando `docker manifest create` permite **criar localmente** uma lista de manifestos (manifest list) que agrupa múltiplas imagens de diferentes referências (tags ou digests), facilitando a construção de imagens multi-plataforma antes de enviá-las a um registry. Trata-se de um recurso **experimental**, sujeito a mudanças ou remoção sem aviso prévio. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/create/?utm_source=chatgpt.com)) ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))

---

## Sintaxe

```bash
docker manifest create [OPÇÕES] MANIFEST_LIST MANIFEST [MANIFEST...]

```

- **MANIFEST_LIST**: nome (ou referência completa, incluindo registry) da lista de manifestos a criar.
- **MANIFEST**: uma ou mais referências de imagens (nome:tag ou digest) que compõem o manifesto.

---

## Opções

| Opção | Descrição |
| --- | --- |
| `-a, --amend` | **Amenda** (adiciona) uma imagem a um manifesto já existente em vez de criar um novo. |
| `--insecure` | Permite comunicação com registries **inseguros** (sem TLS ou com certificados autoassinados). |

*Nenhuma outra opção está disponível — consulte `docker manifest create --help` para confirmação.* ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/create/?utm_source=chatgpt.com))

---

## Exemplo de Fluxo para Multi-arquitetura

1. **Criar manifest list com imagens distintas**
    
    ```bash
    docker manifest create myrepo/app:latest \
      myrepo/app:amd64-latest \
      myrepo/app:arm64-latest
    
    ```
    
    Isto gera localmente `myrepo/app:latest` contendo referências a ambas as imagens. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))
    
2. **Amendar uma imagem a um manifesto existente**
    
    ```bash
    docker manifest create --amend myrepo/app:latest myrepo/app:ppc64le-latest
    
    ```
    
    Acrescenta a entrada `ppc64le` à lista já criada. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))
    
3. **Lidar com registries sem TLS**
    
    ```bash
    docker manifest create --insecure myrepo/app:dev \
      myrepo/app:dev-amd64 \
      myrepo/app:dev-arm64
    
    ```
    
    Útil para registries internos de desenvolvimento que não usam certificados confiáveis. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/create/?utm_source=chatgpt.com))
    

---

## Próximos Passos

Após criar e, se necessário, anotar (`docker manifest annotate`) seu manifest list, envie-o ao registry com:

```bash
docker manifest push --purge myrepo/app:latest

```

Use `docker manifest inspect myrepo/app:latest` para verificar a lista e garantir que cada plataforma esteja corretamente referenciada. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/manifest/?utm_source=chatgpt.com))