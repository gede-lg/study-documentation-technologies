# Prune

## Visão Geral

O comando `docker system prune` remove **todos** os recursos Docker não utilizados, incluindo:

- Contêineres parados
- Redes não usadas por ao menos um contêiner
- Imagens “dangling” (sem tag e não referenciadas)
- Cache de build não usado

Por padrão **não** remove volumes, a menos que você especifique a flag `--volumes`. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/system/prune/?utm_source=chatgpt.com))

---

## Sintaxe

```bash
docker system prune [OPÇÕES]

```

---

## Opções

| Opção | Descrição |
| --- | --- |
| `-a, --all` | Remove **todas** as imagens não usadas (não somente as dangling). |
| `--filter filter` | Prune apenas recursos que satisfaçam o filtro (ex.: `"label=env=dev"`, `"until=24h"`). ([docs.docker.com](https://docs.docker.com/engine/manage-resources/pruning/?utm_source=chatgpt.com)) |
| `-f, --force` | Não solicita confirmação interativa — executa imediatamente. |
| `--volumes` | Inclui **volumes anônimos** no prune (por padrão, volumes não são removidos). ([docs.docker.com](https://docs.docker.com/engine/manage-resources/pruning/?utm_source=chatgpt.com)) |

---

## Exemplos

1. **Prune interativo padrão**
    
    ```bash
    $ docker system prune
    WARNING! This will remove:
      - all stopped containers
      - all networks not used by at least one container
      - all dangling images
      - unused build cache
    Are you sure you want to continue? [y/N] y
    Deleted Containers:
    …
    Deleted Networks:
    …
    Total reclaimed space: 1.2GB
    ``` :contentReference[oaicite:3]{index=3}
    
    ```
    
2. **Remover também imagens não referências**
    
    ```bash
    docker system prune --all
    
    ```
    
    Além dos itens acima, remove todas as imagens não usadas por qualquer contêiner.
    
3. **Prune sem prompt**
    
    ```bash
    docker system prune --force
    
    ```
    
    Executa sem solicitar confirmação.
    
4. **Incluir volumes anônimos**
    
    ```bash
    docker system prune --volumes --force
    
    ```
    
    Remove também os volumes que não estão montados em nenhum contêiner.
    
5. **Prune seletivo por idade**
    
    ```bash
    docker system prune --filter "until=24h"
    
    ```
    
    Remove apenas recursos criados há mais de 24 horas que estejam sem uso. ([docs.docker.com](https://docs.docker.com/engine/manage-resources/pruning/?utm_source=chatgpt.com))
    

---

> Dicas Práticas:
> 
> - Use `docker system df` para verificar o espaço antes e depois do prune.
> - Para limpar apenas um tipo de recurso (por ex., contêineres ou volumes), utilize os subcomandos dedicados:
>     - `docker container prune` (contêineres)
>     - `docker image prune` (imagens)
>     - `docker volume prune` (volumes)
>     - `docker network prune` (redes)
> - Combine filtros (`-filter`) e flags de força (`-force`) em scripts de CI/CD para manter seu ambiente enxuto automaticamente.