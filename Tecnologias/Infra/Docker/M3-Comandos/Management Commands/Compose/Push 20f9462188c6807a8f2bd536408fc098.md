# Push

Olá Gedê! A.R.I.A. na área.

Com certeza! Abaixo você encontra uma explicação detalhada sobre o comando `docker compose push` e todos os seus parâmetros.

O comando `docker compose push` é utilizado para enviar (fazer o "push") as imagens dos serviços definidos no seu arquivo `docker-compose.yml` para um registro de contêineres, como o Docker Hub, AWS ECR ou um registro privado.

### **Sintaxe Geral**

A estrutura básica do comando é:

```bash
docker compose push [OPÇÕES] [NOME_DO_SERVIÇO...]

```

- **[OPÇÕES]**: Modificadores que alteram o comportamento padrão do comando.
- **[NOME_DO_SERVIÇO...]**: (Opcional) Especifica um ou mais serviços do seu `docker-compose.yml` cujas imagens você deseja enviar. Se nenhum serviço for especificado, o Docker Compose tentará enviar as imagens de **todos** os serviços que possuem a propriedade `image` definida.

---

### **Parâmetros e Opções**

Aqui está uma tabela detalhando cada opção do comando `docker compose push`:

| Opção | Atalho | Finalidade | Sintaxe de Uso |
| --- | --- | --- | --- |
| `--dry-run` | - | Simula a execução do comando. Mostra quais imagens *seriam* enviadas, mas não as envia de fato. Útil para verificação. | `docker compose push --dry-run` |
| `--ignore-push-failures` | - | Continua o processo de push mesmo que o envio de uma ou mais imagens falhe. Por padrão, o processo é interrompido no primeiro erro. | `docker compose push --ignore-push-failures` |
| `--include-deps` | - | Além de enviar a imagem do serviço especificado, também envia as imagens de quaisquer serviços listados em sua cláusula `depends_on`. | `docker compose push --include-deps meu_servico` |
| `--quiet` | `-q` | Executa o comando em modo silencioso, sem exibir as informações de progresso do upload de cada camada da imagem. Exibe apenas o resumo final ou erros. | `docker compose push --quiet` ou `docker compose push -q` |

---

### **Exemplos Práticos**

Vamos considerar um arquivo `docker-compose.yml` simples:

```yaml
services:
  backend:
    build: ./backend
    image: gedelg/meu-app-backend:1.0
    depends_on:
      - db

  db:
    image: postgres:15

  frontend:
    build: ./frontend
    image: gedelg/meu-app-frontend:1.0

```

1. **Enviar todas as imagens:**
    
    ```bash
    # Irá tentar enviar as imagens 'gedelg/meu-app-backend:1.0' e 'gedelg/meu-app-frontend:1.0'.
    # Não tentará enviar a imagem 'postgres:15', pois ela não foi construída localmente (não tem a chave 'build').
    docker compose push
    
    ```
    
2. **Enviar apenas a imagem do backend:**
    
    ```bash
    docker compose push backend
    
    ```
    
3. **Enviar a imagem do backend e suas dependências:**
    
    ```bash
    # Neste caso, como 'backend' depende de 'db', o Docker Compose tentaria
    # enviar 'gedelg/meu-app-backend:1.0' e também 'postgres:15'.
    # Geralmente não é útil para imagens oficiais como a do postgres.
    docker compose push --include-deps backend
    
    ```
    
4. **Verificar o que seria enviado sem realmente enviar:**
    
    ```bash
    # A saída mostrará as imagens que seriam enviadas para o registro.
    docker compose push --dry-run
    
    ```
    
5. **Enviar em modo silencioso e ignorando falhas:**
    
    ```bash
    # Combinação de opções: envia todas as imagens possíveis sem mostrar o progresso
    # e não para se uma delas falhar.
    docker compose push -q --ignore-push-failures
    
    ```
    

Espero que esta explicação detalhada tenha esclarecido tudo sobre o comando `docker compose push`, Gedê! Se tiver mais alguma dúvida, pode mandar.