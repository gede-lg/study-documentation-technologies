# Build

## Vis√£o Geral do Comando

O comando `docker compose build` √© utilizado para construir ou reconstruir servi√ßos definidos no arquivo docker-compose.yml. Este comando compila as imagens Docker necess√°rias para os servi√ßos especificados.

## Sintaxe B√°sica

```
docker compose build [OPTIONS] [SERVICE...]
```

## Par√¢metros e Op√ß√µes

| **Op√ß√£o** | **Tipo** | **Descri√ß√£o** |
| --- | --- | --- |
| --build-arg | stringArray | Define vari√°veis de tempo de constru√ß√£o para os servi√ßos |
| --builder | string | Define qual builder ser√° utilizado |
| --check | boolean | Verifica a configura√ß√£o de build sem executar a constru√ß√£o |
| --dry-run | boolean | Executa o comando em modo de simula√ß√£o |
| -m, --memory | bytes | Define limite de mem√≥ria para o container de build (n√£o suportado pelo BuildKit) |
| --no-cache | boolean | N√£o utiliza cache durante a constru√ß√£o da imagem |
| --print | boolean | Imprime o arquivo bake equivalente |
| --pull | boolean | Sempre tenta baixar uma vers√£o mais nova da imagem |
| --push | boolean | Realiza push das imagens dos servi√ßos ap√≥s a constru√ß√£o |
| -q, --quiet | boolean | N√£o exibe nenhuma sa√≠da no STDOUT |
| --ssh | string | Define autentica√ß√µes SSH usadas na constru√ß√£o das imagens |
| --with-dependencies | boolean | Tamb√©m constr√≥i as depend√™ncias (transitivamente) |

## Detalhamento das Op√ß√µes

### --build-arg

Permite passar vari√°veis para o processo de build, √∫til para configura√ß√µes din√¢micas durante a constru√ß√£o.

```
docker compose build --build-arg VERSION=1.0 --build-arg ENV=prod
```

### --builder

Especifica qual builder deve ser usado para construir as imagens.

```
docker compose build --builder buildkit
```

### --memory

Define um limite de mem√≥ria para o container durante o processo de build.

```
docker compose build -m 2GB web-service
```

### --no-cache e --pull

Op√ß√µes √∫teis para garantir builds frescos e atualizados:

```
docker compose build --no-cache --pull web-service
```

### --ssh

Permite usar autentica√ß√£o SSH durante o build, √∫til para acessar reposit√≥rios privados.

```
docker compose build --ssh default
```

## Exemplos de Uso Comuns

```
# Construir todos os servi√ßos
docker compose build

# Construir um servi√ßo espec√≠fico
docker compose build web-service

# Construir sem cache e com pull for√ßado
docker compose build --no-cache --pull

# Construir com vari√°veis de ambiente
docker compose build --build-arg ENV=production

# Construir e fazer push das imagens
docker compose build --push

```

<aside>
‚ö†Ô∏è Importante: O comando build s√≥ afeta servi√ßos que t√™m uma se√ß√£o 'build' definida em seu docker-compose.yml. Servi√ßos que usam imagens pr√©-constru√≠das n√£o s√£o afetados.

</aside>

<aside>
üí° Dica: Use a op√ß√£o --no-cache quando precisar garantir que todas as camadas da imagem sejam reconstru√≠das, ignorando qualquer cache existente.

</aside>