# Kill

OlÃ¡, GedÃª! Como A.R.I.A (Assistente RÃ¡pida para Idiotas Atarefados), estou aqui para te ajudar a entender o comando `docker compose kill` de forma clara e estruturada.

O comando `docker compose kill` Ã© utilizado para **forÃ§ar a parada imediata** dos contÃªineres de um ou mais serviÃ§os. Diferente do `docker compose stop`, que tenta parar os contÃªineres de forma "educada" (enviando um sinal `SIGTERM`), o `kill` envia por padrÃ£o um sinal `SIGKILL`, que nÃ£o pode ser ignorado pelo processo dentro do contÃªiner. Ã‰ uma parada abrupta, Ãºtil quando um contÃªiner nÃ£o estÃ¡ respondendo.

---

### Sintaxe Geral

A estrutura bÃ¡sica do comando Ã©:

```bash
docker compose kill [OPTIONS] [SERVICE...]

```

- **`[OPTIONS]`**: Argumentos opcionais que modificam o comportamento do comando.
- **`[SERVICE...]`**: O nome de um ou mais serviÃ§os que vocÃª deseja parar. Se nenhum serviÃ§o for especificado, o comando serÃ¡ aplicado a **todos** os serviÃ§os definidos no seu arquivo `docker-compose.yml`.

---

### ParÃ¢metros e OpÃ§Ãµes

Vamos detalhar cada um dos parÃ¢metros que vocÃª viu no `--help`.

### **`[SERVICE...]`**

- **Finalidade**: Especificar quais serviÃ§os do seu ambiente Compose devem ser parados.
- **Sintaxe**: `docker compose kill <nome_do_servico_1> <nome_do_servico_2>`
- **Exemplo de uso**: Se o seu `docker-compose.yml` define os serviÃ§os `backend` e `database`, e vocÃª quer parar apenas o `backend`, usaria:
    
    ```bash
    docker compose kill backend
    
    ```
    
- **ObservaÃ§Ã£o**: Se vocÃª omitir este parÃ¢metro, todos os serviÃ§os (`backend` e `database`, no exemplo) serÃ£o parados.

### **`s, --signal string`**

- **Finalidade**: Permite especificar qual sinal do sistema operacional deve ser enviado para o processo principal dentro do contÃªiner.
- **Sintaxe**: `docker compose kill -s <NOME_DO_SINAL>` ou `docker compose kill --signal <NOME_DO_SINAL>`
- **Valor PadrÃ£o**: `"SIGKILL"`
- **Detalhes**: O `SIGKILL` (sinal 9) forÃ§a a terminaÃ§Ã£o imediata. VocÃª pode usar outros sinais, como `SIGTERM` (sinal 15), que solicita que o processo termine (permitindo que ele execute rotinas de limpeza antes de fechar), ou `SIGHUP` (sinal 1), que Ã© frequentemente usado para pedir que um processo recarregue sua configuraÃ§Ã£o.
- **Exemplo de uso**: Para enviar um sinal `SIGTERM` ao serviÃ§o `backend`:
    
    ```bash
    docker compose kill -s SIGTERM backend
    
    ```
    

### **`-remove-orphans`**

- **Finalidade**: Remover contÃªineres que foram criados para serviÃ§os que **nÃ£o estÃ£o mais definidos** no seu arquivo `docker-compose.yml` atual.
- **Sintaxe**: `docker compose kill --remove-orphans`
- **Detalhes**: Um contÃªiner "Ã³rfÃ£o" surge quando vocÃª executa `docker compose up`, depois remove a definiÃ§Ã£o de um serviÃ§o do arquivo `.yml` e executa um comando do compose novamente. O contÃªiner antigo pode continuar existindo. Esta flag ajuda a limpar esses resÃ­duos.
- **Exemplo de uso**:
    
    ```bash
    docker compose kill --remove-orphans
    
    ```
    

### **`-dry-run`**

- **Finalidade**: Simular a execuÃ§Ã£o do comando. Ele mostra o que **seria** feito (quais contÃªineres seriam parados), mas nÃ£o executa a aÃ§Ã£o de fato.
- **Sintaxe**: `docker compose kill --dry-run`
- **Detalhes**: Ã‰ uma ferramenta excelente para validar seu comando e garantir que vocÃª estÃ¡ parando os contÃªineres corretos antes de realmente fazÃª-lo.
- **Exemplo de uso**: Para ver quais contÃªineres seriam parados sem realmente parÃ¡-los:
    
    ```bash
    docker compose kill --dry-run
    
    ```
    

---

### Tabela Resumo

Aqui estÃ¡ uma tabela para consolidar as informaÃ§Ãµes, GedÃª:

| ParÃ¢metro / OpÃ§Ã£o | Sintaxe (curta / longa) | Finalidade | Valor PadrÃ£o |
| --- | --- | --- | --- |
| `[SERVICE...]` | `N/A` | Especifica o(s) serviÃ§o(s) alvo. Se omitido, afeta todos os serviÃ§os. | Todos |
| `--signal` | `-s`, `--signal` | Define o sinal a ser enviado ao contÃªiner para forÃ§ar a parada. | `SIGKILL` |
| `--remove-orphans` | `--remove-orphans` | Remove contÃªineres para serviÃ§os que nÃ£o estÃ£o mais definidos no arquivo Compose. | Desativado |
| `--dry-run` | `--dry-run` | Simula a execuÃ§Ã£o do comando, exibindo as aÃ§Ãµes que seriam tomadas sem executÃ¡-las. | Desativado |

---

### Quando usar `kill` vs. `stop` vs. `down`?

Ã‰ importante saber a diferenÃ§a para usar a ferramenta certa na hora certa:

- **`docker compose stop`**: A forma **preferencial** de parar contÃªineres. Tenta uma parada graciosa (`SIGTERM`), dando tempo para a aplicaÃ§Ã£o salvar dados e fechar conexÃµes.
- **`docker compose kill`**: O "botÃ£o de emergÃªncia" ğŸš¨. Use quando um contÃªiner trava e nÃ£o responde ao comando `stop`. Ã‰ uma parada forÃ§ada e imediata.
- **`docker compose down`**: Vai alÃ©m de parar. Ele **para e remove** os contÃªineres. Adicionalmente, pode remover as redes criadas pelo Compose e, opcionalmente, volumes e imagens. Use quando quiser desmontar completamente o ambiente.

Espero que esta explicaÃ§Ã£o detalhada tenha sido Ãºtil, GedÃª. Se tiver mais alguma dÃºvida, Ã© sÃ³ perguntar!