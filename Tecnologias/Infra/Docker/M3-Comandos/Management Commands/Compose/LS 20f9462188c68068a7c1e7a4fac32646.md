# LS

Aqui está uma explicação detalhada do comando `docker compose ls`, com sintaxe, finalidades de cada parâmetro e um resumo em tabela.

---

## 1. Visão Geral

**Objetivo:** listar projetos gerenciados pelo Docker Compose, mostrando por padrão apenas aqueles ativos (em execução).

```bash
docker compose ls [OPTIONS]

```

- **Contexto de uso:** avaliar rapidamente quais projetos estão rodando ou quais já foram criados pelo Compose.
- **Pré-requisito:** ter instalados o Docker Engine e o plugin Compose V2 (ou superior).

---

## 2. Sintaxe Geral

```bash
docker compose ls [--all] [--dry-run] [--filter <condição>] [--format <formato>] [--quiet]

```

- Elementos entre colchetes `[...]` são opcionais.
- Parâmetros longos começam com `-`; cada um costuma ter também um atalho curto (quando disponível).

---

## 3. Parâmetros e Opções

| Opção | Atalho | Sintaxe de Uso | Descrição | Valor Padrão |
| --- | --- | --- | --- | --- |
| Mostrar todos os projetos | `-a` | `--all-a` | Inclui na listagem também os projetos que estão **parados**, não apenas os em execução. | Só ativos |
| Modo de simulação | — | `--dry-run` | Simula a execução do comando sem realmente buscar ou renderizar os dados. Útil para testar filtros e formatos sem impacto. | Desligado |
| Filtrar saída por condição | — | `--filter <condição>` | Aplica condição de filtro. A condição deve ser no formato `<campo>=<valor>`. Exemplo: `status=running` ou `name=myproject`. | Sem filtro |
| Formatar a saída | — | `--format <formato>` | Define o layout de saída:- `table` (legível, colunas alinhadas)- `json` (para processamento programático). | `table` |
| Somente nomes | `-q` | `--quiet-q` | Retorna apenas o nome de cada projeto, sem colunas adicionais. Ótimo para scripts ou listas simples. | Mostra colunas |

---

### 3.1. `-all, -a`

- **Finalidade:**
    
    Exibir também projetos que não estão em execução (status “stopped”).
    
- **Uso típico:**
    
    ```bash
    docker compose ls -a
    
    ```
    
- **Quando usar:**
    
    Para ver histórico de projetos criados — útil em ambientes de desenvolvimento quando você quer limpar containers/parar tudo.
    

---

### 3.2. `-dry-run`

- **Finalidade:**
    
    Não faz nenhuma requisição real ao daemon, apenas imprime o que *seria* executado.
    
- **Uso típico:**
    
    ```bash
    docker compose ls --dry-run --filter status=running
    
    ```
    
- **Quando usar:**
    
    Para validar filtros e formatos antes de rodar de fato.
    

---

### 3.3. `-filter <condição>`

- **Finalidade:**
    
    Restringir a listagem a projetos que atendam à condição.
    
- **Sintaxe:**
    
    ```
    --filter campo=valor
    
    ```
    
- **Campos suportados (exemplos):**
    - `name`: nome do projeto (ex.: `name=webapp`)
    - `status`: estado, geralmente `running` ou `stopped`
- **Uso típico:**
    
    ```bash
    docker compose ls --filter status=running
    docker compose ls --filter name=myproject
    
    ```
    
- **Combinação de múltiplos filtros:**
    
    Cada `--filter` adicional encurta ainda mais o conjunto:
    
    ```bash
    docker compose ls --filter status=running --filter name=backend
    
    ```
    

---

### 3.4. `-format <formato>`

- **Finalidade:**
    
    Ajustar o estilo de saída.
    
- **Opções de valor:**
    - `table` : tabela legível no terminal
    - `json` : saída em JSON
- **Uso típico:**
    
    ```bash
    docker compose ls --format json
    
    ```
    
- **Exemplo de uso em script:**
    
    ```bash
    docker compose ls --format json | jq '.[] | .Name'
    
    ```
    

---

### 3.5. `-quiet, -q`

- **Finalidade:**
    
    Retornar apenas a coluna **Name** dos projetos, sem cabeçalho ou colunas extras.
    
- **Uso típico:**
    
    ```bash
    docker compose ls -q
    
    ```
    
- **Em scripts:**
    
    Para iterar sobre nomes de projetos:
    
    ```bash
    for proj in $(docker compose ls -q); do
      echo "Parando $proj"
      docker compose -p $proj down
    done
    
    ```
    

---

## 4. Exemplos Práticos

1. **Listar somente projetos em execução (padrão):**
    
    ```bash
    docker compose ls
    
    ```
    
2. **Listar todos, inclusive parados:**
    
    ```bash
    docker compose ls --all
    
    ```
    
3. **Filtrar apenas projetos “running” e mostrar só nomes:**
    
    ```bash
    docker compose ls --filter status=running -q
    
    ```
    
4. **Gerar JSON para automação:**
    
    ```bash
    docker compose ls --format json --filter name=api
    
    ```
    
5. **Testar sem efetuar chamada real:**
    
    ```bash
    docker compose ls --dry-run --filter status=stopped
    
    ```
    

---

## 5. Dicas e Boas Práticas

- Combine `-filter` com `q` para criar scripts limpos e previsíveis.
- Prefira `json` quando precisar processar programaticamente (ex.: com `jq`, `python`, etc.).
- Use `-all` para diagnósticos em ambientes de CI/CD quando precisar limpar artefatos antigos.

---

Com essa visão, você tem tudo o que precisa para dominar o `docker compose ls` e integrá-lo a seus fluxos de trabalho de linha de comando e automação.