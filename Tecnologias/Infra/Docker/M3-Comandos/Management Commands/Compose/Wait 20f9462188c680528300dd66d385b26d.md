# Wait

## Visão Geral

O comando `docker compose wait` bloqueia a execução até que os containers dos serviços especificados (ou de todos os serviços, se listados) sejam encerrados. É útil em scripts ou fluxos automatizados onde você precisa garantir que determinado serviço tenha parado antes de prosseguir com ações subsequentes. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/compose/wait/))

---

## Sintaxe

```bash
docker compose wait [OPÇÕES] SERVIÇO [SERVIÇO…]

```

- **SERVIÇO [SERVIÇO…]**: um ou mais nomes de serviços definidos no seu arquivo Compose.
- **[OPÇÕES]**: flags que alteram o comportamento do comando.

---

## Parâmetros

| Elemento | Descrição |
| --- | --- |
| `SERVIÇO` | Nome de um serviço definido no Compose (campo `services:` do `docker-compose.yml` ou `compose.yaml`). |
| `[SERVIÇO…]` | Lista adicional de serviços. Se especificados múltiplos serviços, o comando só retorna quando **todos** eles tiverem sido interrompidos. |

---

## Opções

| Opção | Padrão | Descrição |
| --- | --- | --- |
| `--down-project` | false | Ao parar o primeiro container, executa `docker compose down`, removendo o projeto imediatamente. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/compose/wait/)) |
| `--dry-run` | false | Simula o comando, mostrando o que **seria** feito sem realmente bloquear ou encerrar containers. ([docs.docker.com](https://docs.docker.com/reference/cli/docker/compose/)) |

---

## Exemplos de Uso

1. **Aguardar um serviço**
    
    ```bash
    docker compose wait web
    
    ```
    
    Bloqueia até que o container do serviço `web` pare.
    
2. **Aguardar múltiplos serviços**
    
    ```bash
    docker compose wait web db cache
    
    ```
    
    Bloqueia até que **todos** os containers `web`, `db` e `cache` sejam interrompidos.
    
3. **Soltar o projeto assim que um container parar**
    
    ```bash
    docker compose wait worker --down-project
    
    ```
    
    Aguarda o `worker` parar e, no primeiro sinal de parada, faz `docker compose down`.
    
4. **Simular o bloqueio sem realmente esperar**
    
    ```bash
    docker compose wait api --dry-run
    
    ```
    
    Exibe o que aconteceria (bloqueio, remoção de projeto), mas retorna imediatamente sem executar nada.
    
5. **Combinar simulação com remoção automática**
    
    ```bash
    docker compose wait api db --dry-run --down-project
    
    ```
    
    Mostra a simulação de aguardar `api` e `db` e de derrubar o projeto no primeiro container parado.
    

---

> Dica: Como docker compose wait faz parte do plugin Compose v2+, certifique-se de usar a versão adequada do Docker que inclua esse subcomando.
>