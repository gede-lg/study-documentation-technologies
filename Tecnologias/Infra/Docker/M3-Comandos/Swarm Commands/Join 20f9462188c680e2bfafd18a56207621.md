# Join

---

## 1. O que faz o `docker swarm join`

O **`docker swarm join`** adiciona o nó atual a um **Swarm** existente (criado via `docker swarm init`), vinculando-o como **worker** ou **manager** conforme o token usado. Após o join, o nó passa a receber e executar tarefas orquestradas pelo manager do cluster.

---

## 2. Sintaxe básica

```bash
docker swarm join [OPTIONS] HOST:PORT

```

- **`HOST:PORT`**: endereço IP (ou hostname) e porta do **manager** do Swarm ao qual o nó deve se juntar (padrão da porta de join é `2377`).

---

## 3. Parâmetro

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `HOST:PORT` | Sim | Endereço do manager do Swarm (ex.: `192.168.1.10:2377`). |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Finalidade |
| --- | --- | --- | --- |
| `--token string` | string | — | **Token** de entrada no Swarm, obtido a partir do `docker swarm init` ou `docker swarm join-token`. |
| `--advertise-addr string` | string | host automático | Endereço/IP (ou interface) via o qual este nó será alcançável pelos demais nós do Swarm. |
| `--listen-addr node-addr` | string | `0.0.0.0:2377` | Endereço/IP e porta onde este nó escutará conexões de dados de orquestração (padrão porta 2377). |
| `--data-path-addr string` | string | host automático | Endereço/IP (ou interface) para tráfego de dados de overlay network (VXLAN). |
| `--availability string` | string | `active` | Estado operacional do nó após o join: |
- `active` → recebe tarefas
- `pause` → não recebe novas tarefas
- `drain` → esvazia tarefas existentes e não recebe novas |

---

## 5. Exemplos de uso

1. **Join padrão como worker**
    
    ```bash
    docker swarm join --token SWMTKN-1-xyz 192.168.1.10:2377
    # Saída: This node joined a swarm as a worker.
    
    ```
    
2. **Join como manager**
    
    ```bash
    docker swarm join --token SWMTKN-1-manager-abc 192.168.1.10:2377
    # Saída: This node joined a swarm as a manager.
    
    ```
    
3. **Specifying advertise and data path addresses**
    
    ```bash
    docker swarm join \
      --token SWMTKN-1-xyz \
      --advertise-addr eth1:2377 \
      --data-path-addr 10.0.0.5 \
      192.168.1.10:2377
    
    ```
    
4. **Join em modo drain imediatamente**
    
    ```bash
    docker swarm join \
      --token SWMTKN-1-xyz \
      --availability drain \
      192.168.1.10:2377
    
    ```
    

---

## 6. Tabela de referência rápida

| Componente | Sintaxe / Valor | Descrição |
| --- | --- | --- |
| Comando base | `docker swarm join [OPTIONS] HOST:PORT` | Adiciona este nó a um Swarm existente. |
| Token | `--token <token>` | Token de worker ou manager para autenticação. |
| Advertise address | `--advertise-addr <ip | iface>[:port]` |
| Listen address | `--listen-addr <ip | iface>[:port]` |
| Data path address | `--data-path-addr <ip | iface>` |
| Availability | `--availability <active | pause |

---

Com isso, você está pronto para **juntar nós** ao seu Swarm, configurando corretamente endereços, tokens e o estado inicial de disponibilidade. Se houver mais dúvidas ou cenários específicos, avise!