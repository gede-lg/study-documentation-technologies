# Wait

---

## 1. Finalidade do `docker wait`

O **`docker wait`** bloqueia o fluxo do seu terminal até que o(s) contêiner(es) especificado(s) sejam **finalizados** (saírem). Quando cada contêiner para, o comando imprime o **código de saída** desse contêiner. É útil em scripts para aguardar a conclusão de tasks em containers antes de prosseguir.

---

## 2. Sintaxe básica

```bash
docker wait CONTAINER [CONTAINER...]

```

- **`CONTAINER`**: nome(s) ou ID(s) de um ou mais contêineres a serem aguardados.

---

## 3. Parâmetros

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `CONTAINER` | Sim | Nome ou ID do(s) contêiner(es) cujo término você deseja aguardar. |

---

## 4. Comportamento

1. **Bloqueio**
    - O comando fica **pendente** até cada contêiner entrar em estado “exited”.
2. **Saída**
    - Imprime um número por linha, cada um correspondente ao **exit code** de cada contêiner, na ordem em que você listou.
3. **Retorno**
    - O próprio processo **`docker wait`** retorna com código `0` (independente dos exit codes dos containers), mas você pode capturar cada saída se usar em scripts.

---

## 5. Exemplos de uso

1. **Aguardar um contêiner e obter seu código de saída**
    
    ```bash
    $ docker wait my_task
    137
    
    ```
    
2. **Aguardar múltiplos contêineres**
    
    ```bash
    $ docker wait task1 task2
    0
    1
    
    ```
    
3. **Uso em script para condicional**
    
    ```bash
    #!/bin/bash
    exit_code=$(docker wait batch_job)
    if [ "$exit_code" -eq 0 ]; then
      echo "Job concluído com sucesso"
    else
      echo "Job falhou com código $exit_code"
    fi
    
    ```
    

---

## 6. Tabela de referência rápida

| Componente | Sintaxe | Descrição |
| --- | --- | --- |
| Comando base | `docker wait CONTAINER [CONTAINER...]` | Bloqueia até containers pararem e imprime seus códigos de saída. |
| Parâmetro | `CONTAINER` | Nome(s) ou ID(s) do(s) container(es) a aguardar. |

---

Use **`docker wait`** sempre que precisar orquestrar tarefas em contêineres de forma síncrona, determinando fluxo de execução baseado no sucesso ou falha do processo dentro do container.