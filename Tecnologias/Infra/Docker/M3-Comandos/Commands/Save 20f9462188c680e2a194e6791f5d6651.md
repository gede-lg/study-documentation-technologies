# Save

---

## 1. Finalidade do `docker save`

O **`docker save`** empacota uma ou mais imagens Docker locais em um arquivo TAR, incluindo todas as camadas e metadados necessários. É útil para:

- **Exportar** imagens para transferência offline entre hosts.
- **Backup** de imagens antes de limpeza ou atualização de sistema.
- **Integração** em pipelines de CI/CD que precisam de um artefato de imagem.

---

## 2. Sintaxe básica

```bash
docker save [OPTIONS] IMAGE [IMAGE...]

```

- **`IMAGE`**: nome (com tag) ou ID das imagens a salvar. Pode listar múltiplas imagens de uma vez.

Por padrão, o tar é enviado **para STDOUT**, permitindo uso de pipes.

---

## 3. Parâmetro

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `IMAGE` | Sim | Nome ou ID da(s) imagem(ns) a incluir no arquivo TAR resultante. |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Descrição |
| --- | --- | --- | --- |
| `-o, --output string` | string | STDOUT | Especifica o **arquivo de saída** (ex.: `-o imagem.tar`). Se omitido, o TAR é enviado ao STDOUT. |
| `--platform string` | string | — | Em imagens multi-arquitetura, salva apenas a variante para a **plataforma** informada |

```
                                                       (formato `os[/arch[/variant]]`, ex.: `linux/amd64`).                |

```

---

## 5. Exemplos de uso

1. **Salvar imagem para arquivo**
    
    ```bash
    docker save -o ubuntu_20.04.tar ubuntu:20.04
    
    ```
    
2. **Salvar múltiplas imagens no mesmo TAR**
    
    ```bash
    docker save -o my_images.tar nginx:latest redis:6.2 alpine:3.14
    
    ```
    
3. **Stream via pipe e compactar**
    
    ```bash
    docker save ubuntu:20.04 | gzip > ubuntu_20.04.tar.gz
    
    ```
    
4. **Salvar somente variante ARM64 de uma imagem multi-arquitetura**
    
    ```bash
    docker save --platform linux/arm64 -o app_arm64.tar multiarch_app:2.0
    
    ```
    
5. **Enviar direto ao STDOUT (mostra no terminal como binário)**
    
    ```bash
    docker save ubuntu:20.04 | tar t
    # Lista o conteúdo do TAR sem gravar em disco
    
    ```
    

---

## 6. Tabela de referência rápida

| Componente | Sintaxe / Exemplo | Descrição |
| --- | --- | --- |
| Comando base | `docker save [OPTIONS] IMAGE [IMAGE...]` | Salva imagem(ns) em TAR para STDOUT ou arquivo. |
| Parâmetro | `IMAGE` | Nome:tag ou ID da imagem a exportar. |
| Opção | `-o, --output <arquivo>.tar` | Define arquivo de saída (senão, usa STDOUT). |
| Opção | `--platform <os/arch[/variant]>` | Salva apenas a variante de plataforma especificada. |

---

Agora você pode **exportar** suas imagens Docker facilmente para transferência, backup ou integração em outros sistemas sem depender de um registry.