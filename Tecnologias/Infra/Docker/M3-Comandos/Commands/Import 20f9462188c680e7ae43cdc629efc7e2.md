# Import

---

## 1. Finalidade do `docker import`

O **`docker import`** cria uma **imagem Docker** a partir de um **arquivo TAR** (ou URL que aponte para um TAR), importando o conteúdo do tarball como o sistema de arquivos raiz da nova imagem. Diferente de `docker load`, que carrega imagens exportadas com histórico de camadas, o `import` ignora camadas e metadados anteriores, criando tudo a partir de um único estado de filesystem.

---

## 2. Sintaxe básica

```bash
docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]

```

- **`file`**: caminho para um arquivo TAR local.
- **`URL`**: URL remota apontando para um TAR.
- : lê o TAR a partir do **STDIN** (útil para pipes).
- **`[REPOSITORY[:TAG]]`** *(opcional)*: nome e tag a atribuir à imagem importada (ex.: `meurepo/importada:1.0`).

---

## 3. Parâmetros

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `file | URL | -` |
| `REPOSITORY[:TAG]` | Não | Nome e tag da imagem resultante; se omitido, retorna apenas o ID da imagem recém-criada. |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Descrição |
| --- | --- | --- | --- |
| `-c, --change list` | list | — | Aplica instruções Dockerfile na imagem importada.    Ex.: `-c CMD=["/bin/sh"]` ou `-c ENV=VAR=valor`. |
| `-m, --message string` | string | — | Mensagem de commit para a imagem (campo COMMENT), descrevendo a importação. |
| `--platform string` | string | host | Define a plataforma (OS/ARCH) da imagem importada em ambientes multi-plataforma (ex.: `linux/amd64`). |

---

## 5. Exemplos de uso

1. **Importar tarball local como nova imagem**
    
    ```bash
    docker import meu_sistema_de_arquivos.tar meurepo/sistema:latest
    
    ```
    
2. **Importar via pipe e comprimir**
    
    ```bash
    tar czf - pasta_do_sistema/ | docker import - meurepo/sistema:compressed
    
    ```
    
3. **Importar direto de URL**
    
    ```bash
    docker import https://meuservidor.com/fs.tar meurepo/remoto:1.0
    
    ```
    
4. **Adicionar instruções e mensagem**
    
    ```bash
    docker import \
      -c 'ENV APP_ENV=production' \
      -c 'CMD ["/start.sh"]' \
      -m "Importação do FS base para produção" \
      backup.tar \
      meurepo/prod:import
    
    ```
    
5. **Definir plataforma explicitamente**
    
    ```bash
    docker import --platform linux/arm64 fs-arm64.tar myrepo/arm64:fs
    
    ```
    

---

## 6. Tabela de referência rápida

| Componente | Sintaxe / Valor | Descrição |
| --- | --- | --- |
| Comando base | `docker import file | URL |
| Parâmetro | `file | URL |
| Parâmetro | `REPOSITORY[:TAG]` | Nome e tag (opcional) da imagem gerada. |
| Opção | `-c, --change <instr>` | Adiciona instruções Dockerfile (`CMD`, `ENV`, `EXPOSE`, etc.). |
| Opção | `-m, --message "<msg>"` | Mensagem de importação (comentário). |
| Opção | `--platform <os/arch>` | Define plataforma da imagem importada. |

---

Agora você pode usar o **`docker import`** para transformar qualquer tarball de sistema de arquivos em uma imagem Docker, ajustando metadados e instruções conforme seu fluxo de trabalho. Se precisar de mais detalhes ou exemplos, é só avisar!