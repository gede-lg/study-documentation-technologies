# Restart

---

## 1. Finalidade do `docker restart`

O **`docker restart`** reinicia um ou mais contêineres Docker, enviando primeiro um sinal para término gracioso (por padrão **SIGTERM**), aguardando um tempo limite e, em seguida, forçando a parada com **SIGKILL** se necessário. Após parar, o contêiner é automaticamente iniciado novamente, mantendo suas configurações originais.

---

## 2. Sintaxe básica

```bash
docker restart [OPTIONS] CONTAINER [CONTAINER...]

```

- **`CONTAINER`**: nome(s) ou ID(s) do(s) contêiner(es) a reiniciar. Você pode indicar múltiplos em sequência.

---

## 3. Parâmetros

| Parâmetro | Obrigatório | Descrição |
| --- | --- | --- |
| `CONTAINER` | Sim | Nome(s) ou ID(s) do(s) contêiner(es) que serão reiniciados. |

---

## 4. Opções disponíveis

| Opção | Tipo | Padrão | Descrição |
| --- | --- | --- | --- |
| `-t, --timeout int` | int | `10` segundos | Tempo em segundos que o Docker aguarda após enviar SIGTERM antes de forçar com SIGKILL. |
| `-s, --signal string` | string | `SIGTERM` | Sinal UNIX inicial a enviar para o contêiner (ex.: `SIGINT`, `SIGHUP`, `SIGUSR1`). |

---

## 5. Fluxo de funcionamento

1. **Envio de sinal**
    - Docker envia o sinal definido por `-signal` (ou SIGTERM).
2. **Aguardar timeout**
    - Aguarda até `-timeout` segundos pela parada limpa do processo.
3. **Forçar parada**
    - Se o contêiner não parar, envia SIGKILL.
4. **Iniciar contêiner**
    - Após a parada, lança novamente o contêiner com as mesmas configurações de criação.

---

## 6. Exemplos de uso

1. **Reiniciar um contêiner com timeout padrão**
    
    ```bash
    docker restart my_app
    
    ```
    
2. **Reiniciar múltiplos contêineres**
    
    ```bash
    docker restart web_api db_cache worker
    
    ```
    
3. **Usar timeout de 30 segundos**
    
    ```bash
    docker restart --timeout 30 my_app
    
    ```
    
4. **Enviar SIGINT antes de reiniciar**
    
    ```bash
    docker restart --signal SIGINT my_app
    
    ```
    
5. **Combinar sinal e timeout**
    
    ```bash
    docker restart -s SIGHUP -t 20 web_server
    
    ```
    

---

## 7. Tabela de referência rápida

| Componente | Sintaxe / Exemplo | Descrição |
| --- | --- | --- |
| Comando base | `docker restart [OPTIONS] CONTAINER...` | Para e inicia novamente o(s) contêiner(es) indicado(s). |
| Opção | `-t, --timeout <segundos>` | Tempo de espera antes de forçar parada (padrão 10s). |
| Opção | `-s, --signal <SINAL>` | Sinal a enviar para término gracioso (padrão SIGTERM). |

---

Use **`docker restart`** para rapidamente reinicializar contêineres, garantindo que atualizações de configuração ou correções de erro sejam aplicadas sem recriar o contêiner do zero.