# LABEL

# Instrução `LABEL` em Dockerfile

## Introdução

A instrução `LABEL` adiciona metadados à imagem Docker em formato de pares chave-valor. Esses metadados são incorporados na imagem final e podem ser usados para documentar, organizar e automatizar processos de build e deploy.

## Sumário

- [Conceitos Fundamentais](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#conceitos-fundamentais)
- [Sintaxe Detalhada e Uso Prático](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#sintaxe-detalhada-e-uso-pr%C3%A1tico)
- [Cenários de Restrição ou Não Aplicação](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#cen%C3%A1rios-de-restri%C3%A7%C3%A3o-ou-n%C3%A3o-aplica%C3%A7%C3%A3o)
- [Componentes Chave Associados](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#componentes-chave-associados)
- [Melhores Práticas e Padrões de Uso](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#melhores-pr%C3%A1ticas-e-padr%C3%B5es-de-uso)
- [Exemplo Prático Completo](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#exemplo-pr%C3%A1tico-completo)
- [Sugestões para Aprofundamento](https://chatgpt.com/g/g-p-68596a64c76c819185e08bdb9bacec85-infra/c/6859817f-01e8-8013-9e5a-cbb14e4c689f#sugest%C3%B5es-para-aprofundamento)

---

## Conceitos Fundamentais

- **Metadados na imagem:** Permite incluir informações como autor, versão, descrição, website do projeto e quaisquer dados úteis para CI/CD e automação.
- **Padrão OCI:** Os labels seguem a especificação de [OCI Image Spec](https://github.com/opencontainers/image-spec/blob/main/annotations.md), garantindo interoperabilidade.
- **Pesquisa e filtragem:** Ferramentas como `docker inspect` e registries permitem buscar imagens com base em labels.

---

## Sintaxe Detalhada e Uso Prático

```
LABEL <chave>=<valor> [<chave>=<valor> ...]

```

- `<chave>`: Nome descritivo do metadado (ex.: `maintainer`, `version`, `org.opencontainers.image.authors`).
- `<valor>`: Conteúdo associado à chave, envolto em aspas se contiver espaços ou caracteres especiais.

### Exemplos

1. **Label única**
    
    ```
    LABEL maintainer="Juliana Gomes Miranda <juliana@exemplo.com>"
    
    ```
    
2. **Múltiplos labels em uma linha**
    
    ```
    LABEL version="1.0.0" description="Aplicação Web em Node.js"
    
    ```
    
3. **Labels longos**
    
    ```
    LABEL \
      org.opencontainers.image.title="Meu Projeto" \
      org.opencontainers.image.description="Imagem Docker contendo o serviço backend" \
      org.opencontainers.image.url="https://github.com/minhaorg/meuprojeto"
    
    ```
    

---

## Cenários de Restrição ou Não Aplicação

- **Imagens temporárias de build:** Estágios intermediários em multi-stage builds não necessariamente precisam de labels.
- **Ambientes fechados:** Quando labels não são utilizados em pipelines de CI/CD ou registries internos que ignoram metadados.

---

## Componentes Chave Associados

- **Chaves padrão OCI:** Como `org.opencontainers.image.version`, `org.opencontainers.image.licenses`, `org.opencontainers.image.revision`.
- **Ferramentas de inspeção:** `docker inspect --format '{{ index .Config.Labels }}' <imagem>`.
- **Integrations CI/CD:** Gerar documentação automática ou versões com base em labels.

---

## Melhores Práticas e Padrões de Uso

1. **Utilizar chaves de domínio reverso:** Evite colisão de nomes (ex.: `com.minhaempresa.projeto.version`).
2. **Padronizar labels em toda organização:** Defina um conjunto de labels obrigatórios (ex.: `maintainer`, `version`, `license`).
3. **Documentar labels no README:** Explique o propósito de cada label.
4. **Evitar informações sensíveis:** Nunca incluir segredos ou credenciais.
5. **Atualizar versionamento:** Mantenha o label `version` sincronizado com a tag da imagem.

---

## Exemplo Prático Completo

```
FROM python:3.11-slim

LABEL \
  maintainer="Juliana Gomes Miranda <juliana@exemplo.com>" \
  version="2.3.1" \
  description="Imagem para rodar a API de processamento de dados" \
  org.opencontainers.image.source="https://github.com/minhaorg/api-processamento" \
  org.opencontainers.image.licenses="MIT"

WORKDIR /app
COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["python", "app.py"]

```

---

## Sugestões para Aprofundamento

- Documentação oficial Docker: [`LABEL`](https://docs.docker.com/engine/reference/builder/#label)
- Especificação OCI de Annotations: [https://github.com/opencontainers/image-spec/blob/main/annotations.md](https://github.com/opencontainers/image-spec/blob/main/annotations.md)
- Artigos sobre automação de versionamento com labels em pipelines CI/CD

---

*Documento gerado para explicar detalhadamente o uso da instrução `LABEL` em Dockerfile.*