## Funções de Ordem Superior no Dart

### O que é e para que serve?

Funções de ordem superior são funções que podem receber outras funções como parâmetros e/ou retornar funções como resultado. Esse conceito é fundamental em programação funcional e oferece um alto nível de flexibilidade e reutilização de código. No Dart, funções de ordem superior são amplamente utilizadas para manipulação de coleções, programação assíncrona e para criar abstrações mais elegantes e expressivas.

**Benefícios de usar funções de ordem superior:**
- **Reutilização de código:** Permitem a criação de funções genéricas que podem ser reutilizadas em diferentes contextos.
- **Composição de funções:** Facilita a criação de funções complexas a partir de funções mais simples.
- **Abstração:** Simplifica o código, tornando-o mais legível e manutenível.

### Sintaxe de uso

A sintaxe para definir e utilizar funções de ordem superior no Dart é bastante direta. Aqui estão alguns exemplos:

**1. Função que recebe outra função como parâmetro:**

```dart
void executarFuncao(int a, int b, Function(int, int) operacao) {
  int resultado = operacao(a, b);
  print('Resultado: $resultado');
}

int soma(int x, int y) {
  return x + y;
}

void main() {
  executarFuncao(2, 3, soma); // Resultado: 5
}
```

**2. Função que retorna outra função:**

```dart
Function multiplicador(num fator) {
  return (num valor) => valor * fator;
}

void main() {
  var dobro = multiplicador(2);
  var triplo = multiplicador(3);

  print(dobro(4)); // 8
  print(triplo(4)); // 12
}
```

**3. Uso de funções anônimas como parâmetros:**

```dart
void executarOperacao(Function operacao) {
  operacao();
}

void main() {
  executarOperacao(() {
    print('Operação anônima executada!');
  });
}
```

### Restrições de uso

1. **Tipo das Funções:** É importante especificar o tipo das funções que são passadas como parâmetros para evitar erros de tipo em tempo de execução.
2. **Captura de Variáveis:** Funções anônimas (closures) podem capturar variáveis do escopo externo. Isso pode levar a comportamentos inesperados se não for usado com cuidado.
3. **Performance:** Embora as funções de ordem superior sejam poderosas, o uso excessivo pode impactar a performance, especialmente em loops ou operações críticas de tempo.

### Quando utilizar?

- **Manipulação de Coleções:** Métodos como `map`, `reduce`, `filter` e `forEach` são funções de ordem superior usadas frequentemente com listas.
  
  ```dart
  void main() {
    List<int> numeros = [1, 2, 3, 4, 5];
    var dobro = numeros.map((n) => n * 2);
    print(dobro.toList()); // [2, 4, 6, 8, 10]
  }
  ```

- **Callbacks:** Em programação assíncrona, funções de ordem superior são usadas como callbacks.

  ```dart
  void main() {
    Future.delayed(Duration(seconds: 1), () {
      print('1 segundo depois...');
    });
  }
  ```

- **Composição de Funções:** Para criar funções mais complexas a partir de funções simples.

  ```dart
  Function compose(Function f, Function g) {
    return (x) => f(g(x));
  }

  void main() {
    var dobro = (x) => x * 2;
    var quadrado = (x) => x * x;

    var dobroDoQuadrado = compose(dobro, quadrado);

    print(dobroDoQuadrado(3)); // 18 (3^2 * 2)
  }
  ```

### Informações Adicionais

1. **Closures:** Funções anônimas podem capturar e usar variáveis do escopo onde foram definidas, permitindo criar funções dinâmicas e altamente reutilizáveis.

   ```dart
   Function contador() {
     int contagem = 0;
     return () {
       contagem++;
       return contagem;
     };
   }

   void main() {
     var meuContador = contador();
     print(meuContador()); // 1
     print(meuContador()); // 2
   }
   ```

2. **Funções como Objetos:** Em Dart, funções são cidadãos de primeira classe, o que significa que podem ser atribuídas a variáveis, passadas como parâmetros e retornadas de outras funções.

   ```dart
   void saudacao() {
     print('Olá!');
   }

   void main() {
     var func = saudacao;
     func(); // Olá!
   }
   ```

Funções de ordem superior são um poderoso recurso do Dart que, quando bem utilizado, pode tornar o código mais modular, reutilizável e legível.