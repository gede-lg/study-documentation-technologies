# Manipulação de Diretórios no Go

A manipulação de diretórios é uma parte fundamental do desenvolvimento de aplicações que interagem com o sistema de arquivos. No Go, a biblioteca padrão fornece funções úteis para criar, listar, renomear e remover diretórios. Neste guia, vamos explorar detalhadamente como criar diretórios em Go.

## Criação de Diretórios

### O que é e para que serve?

A criação de diretórios é um processo que permite ao programa gerar novos diretórios no sistema de arquivos. Isso é útil em várias situações, como quando você precisa organizar arquivos de saída, armazenar dados temporários, ou simplesmente estruturar melhor os dados gerados pelo seu aplicativo.

### Como funciona?

Em Go, a criação de diretórios é realizada usando a função `os.Mkdir` para criar um único diretório e `os.MkdirAll` para criar um diretório e qualquer um de seus pais inexistentes. Ambas as funções fazem parte do pacote `os`, que lida com operações de sistema de arquivos.

### Sintaxe de Uso

#### `os.Mkdir`

A função `os.Mkdir` cria um único diretório com as permissões especificadas.

```go
func Mkdir(name string, perm FileMode) error
```

- **name**: Caminho do diretório a ser criado.
- **perm**: Permissões do diretório, especificadas como um valor do tipo `os.FileMode`.

#### Exemplo de Uso:

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    dirName := "exemploDir"
    perm := 0755

    err := os.Mkdir(dirName, os.FileMode(perm))
    if err != nil {
        fmt.Println("Erro ao criar diretório:", err)
    } else {
        fmt.Println("Diretório criado com sucesso:", dirName)
    }
}
```

#### `os.MkdirAll`

A função `os.MkdirAll` cria um diretório e todos os seus pais inexistentes com as permissões especificadas.

```go
func MkdirAll(path string, perm FileMode) error
```

- **path**: Caminho do diretório a ser criado, incluindo todos os diretórios pai necessários.
- **perm**: Permissões do diretório, especificadas como um valor do tipo `os.FileMode`.

#### Exemplo de Uso:

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    dirPath := "path/to/exemploDir"
    perm := 0755

    err := os.MkdirAll(dirPath, os.FileMode(perm))
    if err != nil {
        fmt.Println("Erro ao criar diretórios:", err)
    } else {
        fmt.Println("Diretórios criados com sucesso:", dirPath)
    }
}
```

### Restrições de Uso

- **Permissões**: As permissões são especificadas em octal e podem ser combinadas para definir quem pode ler, escrever ou executar o diretório. Permissões comuns incluem:
  - `0755`: Leitura e execução para todos, escrita apenas para o proprietário.
  - `0700`: Todas as permissões apenas para o proprietário.
  - `0777`: Todas as permissões para todos (não recomendado por razões de segurança).

- **Existência Prévia**: 
  - `os.Mkdir` falhará se o diretório já existir.
  - `os.MkdirAll` não falhará se o diretório ou qualquer um dos pais já existirem; ele apenas garante que o caminho completo existe ao final da operação.

- **Erros Comuns**:
  - **Permissão Negada**: O programa não tem permissões suficientes para criar o diretório no local especificado.
  - **Sistema de Arquivos Somente Leitura**: Tentativa de criação de diretórios em um sistema de arquivos que não permite escrita.
  - **Caminho Inválido**: Especificar um caminho que não é válido para o sistema de arquivos do SO.

### Boas Práticas

- **Verificação de Erros**: Sempre verifique e trate os erros retornados pelas funções `os.Mkdir` e `os.MkdirAll` para garantir que seu programa pode lidar adequadamente com situações inesperadas.
- **Uso de Constantes**: Defina permissões como constantes para facilitar a leitura e a manutenção do código.
- **Caminhos Relativos vs. Absolutos**: Prefira caminhos absolutos para evitar confusões sobre o local onde os diretórios serão criados, especialmente em aplicações complexas.

### Conclusão

A criação de diretórios no Go é um processo simples e direto, facilitado pelo pacote `os`. Com as funções `os.Mkdir` e `os.MkdirAll`, você pode criar diretórios de forma eficiente e segura, controlando as permissões de acesso conforme necessário. Sempre verifique erros e siga boas práticas para garantir que sua aplicação manipule o sistema de arquivos corretamente e com segurança.