# Manipulação de Diretórios no Go

## O que é e para que serve?

Manipulação de diretórios em Go envolve operações como criação, remoção, leitura e navegação entre diretórios. Isso é fundamental para muitas aplicações que precisam gerenciar arquivos e diretórios de maneira programática, como aplicativos de backup, ferramentas de linha de comando, servidores de arquivos, entre outros.

## Tópicos Importantes sobre Manipulação de Diretórios

### 1. Criação de Diretórios

#### `os.Mkdir`
Cria um único diretório especificado.

**Sintaxe:**
```go
func Mkdir(name string, perm FileMode) error
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    err := os.Mkdir("meu_diretorio", 0755)
    if err != nil {
        log.Fatal(err)
    }
}
```

#### `os.MkdirAll`
Cria um diretório e todos os diretórios pais necessários.

**Sintaxe:**
```go
func MkdirAll(path string, perm FileMode) error
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    err := os.MkdirAll("meu_diretorio/sub_diretorio", 0755)
    if err != nil {
        log.Fatal(err)
    }
}
```

### 2. Remoção de Diretórios

#### `os.Remove`
Remove um único arquivo ou diretório vazio.

**Sintaxe:**
```go
func Remove(name string) error
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    err := os.Remove("meu_diretorio")
    if err != nil {
        log.Fatal(err)
    }
}
```

#### `os.RemoveAll`
Remove um caminho de diretório e todos os seus conteúdos.

**Sintaxe:**
```go
func RemoveAll(path string) error
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    err := os.RemoveAll("meu_diretorio")
    if err != nil {
        log.Fatal(err)
    }
}
```

### 3. Leitura de Diretórios

#### `os.Open`
Abre um diretório para leitura.

**Sintaxe:**
```go
func Open(name string) (*File, error)
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    dir, err := os.Open(".")
    if err != nil {
        log.Fatal(err)
    }
    defer dir.Close()
}
```

#### `File.Readdir`
Lê o conteúdo de um diretório.

**Sintaxe:**
```go
func (f *File) Readdir(n int) ([]FileInfo, error)
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    dir, err := os.Open(".")
    if err != nil {
        log.Fatal(err)
    }
    defer dir.Close()

    files, err := dir.Readdir(-1)
    if err != nil {
        log.Fatal(err)
    }

    for _, file := range files {
        log.Println(file.Name())
    }
}
```

#### `os.ReadDir`
Lê o conteúdo de um diretório, retornando uma lista de entradas de diretório.

**Sintaxe:**
```go
func ReadDir(name string) ([]os.DirEntry, error)
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    entries, err := os.ReadDir(".")
    if err != nil {
        log.Fatal(err)
    }

    for _, entry := range entries {
        log.Println(entry.Name())
    }
}
```

### 4. Obtenção de Informações sobre Diretórios

#### `os.Stat`
Obtém informações sobre um arquivo ou diretório.

**Sintaxe:**
```go
func Stat(name string) (FileInfo, error)
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    info, err := os.Stat("meu_diretorio")
    if err != nil {
        log.Fatal(err)
    }

    log.Printf("Nome: %s\nTamanho: %d bytes\nPermissões: %s\n",
        info.Name(), info.Size(), info.Mode())
}
```

### 5. Navegação entre Diretórios

#### `os.Chdir`
Muda o diretório de trabalho atual.

**Sintaxe:**
```go
func Chdir(dir string) error
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    err := os.Chdir("meu_diretorio")
    if err != nil {
        log.Fatal(err)
    }

    cwd, err := os.Getwd()
    if err != nil {
        log.Fatal(err)
    }

    log.Println("Diretório de trabalho atual:", cwd)
}
```

### 6. Outros Comandos Úteis

#### `os.Getwd`
Obtém o diretório de trabalho atual.

**Sintaxe:**
```go
func Getwd() (dir string, err error)
```

**Exemplo:**
```go
package main

import (
    "log"
    "os"
)

func main() {
    cwd, err := os.Getwd()
    if err != nil {
        log.Fatal(err)
    }

    log.Println("Diretório de trabalho atual:", cwd)
}
```

#### `filepath.Walk`
Percorre um diretório e suas subdiretórios, executando uma função em cada arquivo ou diretório encontrado.

**Sintaxe:**
```go
func Walk(root string, walkFn WalkFunc) error
```

**Exemplo:**
```go
package main

import (
    "log"
    "path/filepath"
)

func main() {
    err := filepath.Walk(".", func(path string, info os.FileInfo, err error) error {
        if err != nil {
            return err
        }
        log.Println(path)
        return nil
    })
    if err != nil {
        log.Fatal(err)
    }
}
```

### 7. Exemplo Completo: Gerenciador de Diretórios Simples

Aqui está um exemplo de um gerenciador de diretórios simples que cria um diretório, lista seu conteúdo e depois o remove:

```go
package main

import (
    "log"
    "os"
    "path/filepath"
)

func main() {
    // Criação de um diretório
    err := os.Mkdir("meu_diretorio", 0755)
    if err != nil {
        log.Fatal(err)
    }

    // Navegação para o diretório criado
    err = os.Chdir("meu_diretorio")
    if err != nil {
        log.Fatal(err)
    }

    // Criação de um subdiretório
    err = os.Mkdir("sub_diretorio", 0755)
    if err != nil {
        log.Fatal(err)
    }

    // Listagem do conteúdo do diretório
    entries, err := os.ReadDir(".")
    if err != nil {
        log.Fatal(err)
    }

    for _, entry := range entries {
        log.Println(entry.Name())
    }

    // Voltar para o diretório pai
    err = os.Chdir("..")
    if err != nil {
        log.Fatal(err)
    }

    // Remoção do diretório e seu conteúdo
    err = os.RemoveAll("meu_diretorio")
    if err != nil {
        log.Fatal(err)
    }
}
```

## Conclusão

A manipulação de diretórios em Go é uma parte essencial do desenvolvimento de muitas aplicações. Com as funções fornecidas pelo pacote `os` e `path/filepath`, você pode criar, remover, ler e navegar entre diretórios de forma eficiente. Utilizando os exemplos e práticas descritas, você será capaz de gerenciar diretórios de forma programática em suas aplicações Go.