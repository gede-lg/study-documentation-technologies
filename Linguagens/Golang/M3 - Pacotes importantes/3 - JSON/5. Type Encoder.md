
### O que é e para que serve?
`Encoder` é um tipo definido no pacote `encoding/json` do Go que facilita a codificação de valores Go em JSON e a escrita desses valores diretamente em um `io.Writer`. Este tipo é útil quando você precisa serializar dados em JSON e escrever esses dados em um destino específico, como um arquivo ou uma resposta HTTP.

### Sintaxe de Uso
Para criar um `Encoder`, você deve utilizar a função `NewEncoder` fornecida pelo pacote `encoding/json`.

### Exemplo de Código

```go
import (
    "encoding/json"
    "os"
)

func main() {
    file, _ := os.Create("output.json")
    defer file.Close()

    encoder := json.NewEncoder(file)
    data := map[string]string{"name": "John", "age": "30"}

    err := encoder.Encode(data)
    if err != nil {
        // lidar com o erro
    }
}
```

### Restrições de Uso

`Encoder` deve ser usado com um tipo que implementa a interface `io.Writer`. Ele não é adequado para codificação em strings ou buffers que não implementam essa interface.

### Quando Utilizar?

Use `Encoder` quando você precisa serializar dados em JSON e enviar esses dados diretamente para uma saída que implementa a interface `io.Writer`, como arquivos, conexões de rede ou respostas HTTP.

> [!NOTE] Método
> # NewEncoder

### O que é e para que serve?

A função `NewEncoder` cria um novo `Encoder` que escreve a codificação JSON em um `io.Writer` especificado. É o ponto de partida para usar o tipo `Encoder`.

### Sintaxe de Uso

```go
func NewEncoder(w io.Writer) *Encoder
```

### Exemplo de Código

```go
import (
    "encoding/json"
    "os"
)

func main() {
    file, _ := os.Create("output.json")
    defer file.Close()

    encoder := json.NewEncoder(file)
    data := map[string]string{"name": "John", "age": "30"}

    err := encoder.Encode(data)
    if err != nil {
        // lidar com o erro
    }
}
```

### Restrições de Uso

O parâmetro `w` deve implementar a interface `io.Writer`. Não pode ser usado com tipos que não implementam essa interface.

### Quando Utilizar?

Use `NewEncoder` quando você precisar criar um `Encoder` para escrever JSON diretamente em um destino específico como arquivos ou conexões de rede.

> [!NOTE] Método
> # Encode

### O que é e para que serve?

A função `Encode` do tipo `Encoder` serializa o valor fornecido em JSON e escreve o resultado no `io.Writer` associado ao `Encoder`. Ela é usada para converter dados de estruturas Go em formato JSON.

### Sintaxe de Uso

```go
func (enc *Encoder) Encode(v any) error
```

### Exemplo de Código

```go
import (
    "encoding/json"
    "os"
)

func main() {
    file, _ := os.Create("output.json")
    defer file.Close()

    encoder := json.NewEncoder(file)
    data := map[string]string{"name": "John", "age": "30"}

    err := encoder.Encode(data)
    if err != nil {
        // lidar com o erro
    }
}
```

### Restrições de Uso

O valor `v` deve ser serializável em JSON. Tipos que contêm canais, funções ou tipos não exportados (em um contexto de exportação de pacotes) não podem ser serializados.

### Quando Utilizar?

Use `Encode` sempre que precisar converter uma estrutura de dados Go em JSON e escrever essa representação JSON diretamente em um `io.Writer`.

> [!NOTE] Método
> # SetEscapeHTML

### O que é e para que serve?

A função `SetEscapeHTML` do tipo `Encoder` define se os caracteres HTML no JSON de saída devem ser escapados. Por padrão, caracteres como `<`, `>`, e `&` são escapados para garantir que o JSON possa ser inserido em HTML sem quebrar a estrutura HTML.

### Sintaxe de Uso

```go
func (enc *Encoder) SetEscapeHTML(on bool)
```

### Exemplo de Código

```go
import (
    "encoding/json"
    "os"
)

func main() {
    file, _ := os.Create("output.json")
    defer file.Close()

    encoder := json.NewEncoder(file)
    encoder.SetEscapeHTML(false) // Desativa a escapação de HTML

    data := map[string]string{"name": "John & Jane"}
    err := encoder.Encode(data)
    if err != nil {
        // lidar com o erro
    }
}
```

### Restrições de Uso

Usar `SetEscapeHTML(false)` pode tornar o JSON vulnerável a injeções de código HTML/JavaScript se não for tratado corretamente. Use com cuidado, especialmente ao gerar JSON para ser embutido em HTML.

### Quando Utilizar?

Use `SetEscapeHTML` quando você precisar controlar a escapação de caracteres HTML no JSON de saída. Desative a escapação apenas se você tiver certeza de que o JSON resultante não será inserido diretamente em HTML ou se estiver seguro contra injeções.

> [!NOTE] Método
> # SetIndent

### O que é e para que serve?

A função `SetIndent` do tipo `Encoder` define um prefixo e uma string de indentação para formatar o JSON de saída. Isso é útil para gerar JSON legível por humanos, com indentação apropriada.

### Sintaxe de Uso

```go
func (enc *Encoder) SetIndent(prefix, indent string)
```

### Exemplo de Código

```go
import (
    "encoding/json"
    "os"
)

func main() {
    file, _ := os.Create("output.json")
    defer file.Close()

    encoder := json.NewEncoder(file)
    encoder.SetIndent("", "  ") // Define uma indentação de dois espaços

    data := map[string]string{"name": "John", "age": "30"}
    err := encoder.Encode(data)
    if err != nil {
        // lidar com o erro
    }
}
```

### Restrições de Uso

A configuração de indentação pode aumentar o tamanho do JSON de saída, o que pode ser uma consideração em ambientes onde o desempenho e a eficiência de armazenamento são críticos.

### Quando Utilizar?

Use `SetIndent` quando você precisar de um JSON de saída que seja legível por humanos, como em arquivos de configuração, logs ou para depuração.


---
## Conclusão

O pacote `encoding/json` do Go fornece uma maneira poderosa e flexível de trabalhar com JSON. O tipo `Encoder` e suas funções associadas permitem a serialização de dados Go em JSON de maneira eficiente e com controle sobre a formatação e a escapação de caracteres. Utilizar essas ferramentas corretamente pode facilitar muito a manipulação e o armazenamento de dados em JSON.