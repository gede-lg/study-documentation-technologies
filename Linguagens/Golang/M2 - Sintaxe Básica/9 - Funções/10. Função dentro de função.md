
## O que é e para que serve?

Declaração de funções dentro de funções, também conhecidas como funções aninhadas ou funções internas, é a prática de definir uma função dentro do corpo de outra função. Em Go, funções internas são usadas para encapsular lógica específica que não precisa ser acessível fora do escopo da função externa. Elas são úteis para organizar o código, reduzir a repetição e melhorar a legibilidade.

### Para que serve?

- **Encapsulamento:** Funções internas ajudam a encapsular a lógica que só é relevante para a função externa, mantendo o escopo limpo.
- **Organização:** Melhoram a organização do código ao agrupar lógica relacionada.
- **Redução de Repetição:** Evitam a duplicação de código ao permitir a reutilização de lógica dentro do escopo da função externa.

## Quando utilizar?

Utilize funções dentro de funções quando:

- **A lógica é específica para uma única função:** A função interna não será útil em outro lugar do código.
- **Deseja-se melhorar a clareza:** Encapsular partes do código dentro de uma função interna pode tornar a função externa mais legível.
- **Redução de duplicação:** Se você encontra repetição de código dentro da função, pode movê-lo para uma função interna.

## Sintaxe de uso

A sintaxe para declarar uma função dentro de outra função é direta. Aqui está a estrutura básica:

```go
func externa() {
    func interna(param1 tipo1, param2 tipo2) tipo3 {
        // corpo da função interna
    }
    // chamada para a função interna
}
```

### Detalhamento da Sintaxe

- **func:** Palavra-chave usada para definir uma função.
- **interna:** Nome da função interna.
- **param1, param2:** Nomes dos parâmetros da função interna.
- **tipo1, tipo2:** Tipos dos parâmetros da função interna.
- **tipo3:** Tipo de retorno da função interna.

### Exemplo

Aqui está um exemplo de uma função que define uma função interna para verificar se um número é par ou ímpar:

```go
func verificarNumeros(numeros []int) {
    ehPar := func(n int) bool {
        return n%2 == 0
    }

    for _, numero := range numeros {
        if ehPar(numero) {
            fmt.Println(numero, "é par")
        } else {
            fmt.Println(numero, "é ímpar")
        }
    }
}

func main() {
    numeros := []int{1, 2, 3, 4, 5}
    verificarNumeros(numeros)
}
```

Neste exemplo:

- A função `verificarNumeros` recebe um slice de inteiros.
- Dentro de `verificarNumeros`, a função `ehPar` é definida para verificar se um número é par.
- A função interna `ehPar` é chamada dentro do loop `for` para verificar cada número no slice.

## Restrições de uso

- **Escopo:** Funções internas só podem ser chamadas dentro do escopo da função externa. Elas não são acessíveis fora da função onde foram definidas.
- **Reusabilidade:** Funções internas não são reutilizáveis fora do contexto da função externa. Se a lógica precisa ser reutilizada em várias partes do código, considere movê-la para uma função separada.
- **Complexidade:** Muitas funções internas podem tornar o código mais difícil de seguir. Use com moderação para evitar aumentar a complexidade do código.

### Exemplo de Restrição

Aqui está um exemplo mostrando que a função interna não pode ser chamada fora da função externa:

```go
func externa() {
    interna := func(msg string) {
        fmt.Println(msg)
    }

    interna("Chamando função interna dentro de externa")
}

func main() {
    externa()
    // interna("Tentando chamar função interna fora de externa") // Erro: undefined: interna
}
```

Neste exemplo, a função `interna` é acessível apenas dentro da função `externa` e não pode ser chamada diretamente no `main`.

## Conclusão

Declaração de funções dentro de funções no Go é uma técnica poderosa para encapsular lógica específica e melhorar a organização do código. Ao entender como e quando utilizar funções internas, você pode criar programas mais legíveis e modulares. No entanto, use esta técnica com moderação para evitar adicionar complexidade desnecessária ao seu código.