
## O que é e para que serve?

Uma função anônima em Go, também conhecida como literal de função, é uma função sem nome que pode ser definida dentro de outra função, atribuída a uma variável ou passada como argumento para outras funções. Funções anônimas são úteis para criar funções rápidas e descartáveis que são usadas apenas uma vez ou para encapsular lógica específica sem a necessidade de nomeá-la.

### Para que serve?

- **Encapsulamento:** Permite encapsular a lógica dentro de uma função local sem expô-la globalmente.
- **Flexibilidade:** Pode ser passada como argumento para outras funções, retornada de funções ou atribuída a variáveis.
- **Manutenção:** Facilita a manutenção do código ao manter a lógica relacionada junta, especialmente em callbacks e funções de alto nível.

## Quando utilizar?

Utilize funções anônimas quando:

- **Necessidade de funções locais:** Quando uma função é necessária apenas dentro de outra função e não precisa ser acessível em outros lugares.
- **Uso em callbacks:** Para definir funções de callback diretamente em chamadas de funções de alto nível (e.g., manipuladores de eventos, goroutines).
- **Para melhorar a legibilidade:** Quando a lógica é pequena e autoexplicativa, tornando o código mais legível ao evitar definições de funções adicionais fora do contexto onde são usadas.

## Sintaxe de uso

A sintaxe para definir uma função anônima em Go é a seguinte:

```go
func(param1 tipo1, param2 tipo2) tipoRetorno {
    // corpo da função
}
```

### Detalhamento da Sintaxe

- **func:** Palavra-chave usada para definir a função.
- **param1, param2:** Nomes dos parâmetros. Pode haver um ou mais parâmetros, separados por vírgulas.
- **tipo1, tipo2:** Tipos dos parâmetros. Cada parâmetro deve ter um tipo especificado.
- **tipoRetorno:** Tipo do valor retornado pela função. Pode ser omitido se a função não retornar um valor.
- **corpo da função:** Bloco de código que será executado quando a função for chamada.

### Exemplo

#### Atribuição a uma variável

```go
func main() {
    somar := func(a, b int) int {
        return a + b
    }

    resultado := somar(3, 4)
    fmt.Println("Resultado:", resultado)
}
```

Neste exemplo:

- A função anônima `func(a, b int) int { return a + b }` é atribuída à variável `somar`.
- A função é então chamada através da variável `somar` com os argumentos `3` e `4`, e o resultado é impresso.

#### Execução imediata

Funções anônimas também podem ser executadas imediatamente após serem definidas:

```go
func main() {
    resultado := func(a, b int) int {
        return a + b
    }(3, 4)

    fmt.Println("Resultado:", resultado)
}
```

Neste exemplo:

- A função anônima é definida e imediatamente chamada com os argumentos `3` e `4`.
- O resultado da função é atribuído à variável `resultado` e impresso.

## Restrições de uso

- **Escopo:** Funções anônimas têm acesso ao escopo da função onde foram definidas, incluindo variáveis locais. No entanto, elas não podem ser reutilizadas fora desse escopo, a menos que sejam retornadas ou passadas como parâmetros.
- **Recursão:** Embora possível, a recursão com funções anônimas é menos comum e pode ser menos legível do que usar funções nomeadas.
- **Leitura e Manutenção:** Para funções complexas ou longas, é geralmente melhor usar funções nomeadas para melhorar a legibilidade e manutenção do código.

### Exemplo de uso com escopo

```go
func main() {
    x := 10
    func() {
        fmt.Println("x dentro da função anônima:", x)
    }()
}
```

Neste exemplo:

- A função anônima acessa e imprime a variável `x` definida no escopo da função `main`.

### Exemplo de função anônima como callback

```go
func executar(callback func(int, int) int, a, b int) {
    resultado := callback(a, b)
    fmt.Println("Resultado:", resultado)
}

func main() {
    executar(func(a, b int) int {
        return a * b
    }, 3, 4)
}
```

Neste exemplo:

- A função `executar` recebe uma função de callback como parâmetro e a executa com os argumentos `a` e `b`.
- Uma função anônima que multiplica dois números é passada como argumento para `executar`.

## Conclusão

Funções anônimas em Go são uma ferramenta poderosa para encapsular lógica específica, criar callbacks e melhorar a modularidade do código. Elas permitem definir funções locais de forma concisa e flexível, facilitando a escrita de código claro e manutenível. Entender como e quando utilizar funções anônimas é essencial para aproveitar ao máximo suas capacidades no desenvolvimento de software.