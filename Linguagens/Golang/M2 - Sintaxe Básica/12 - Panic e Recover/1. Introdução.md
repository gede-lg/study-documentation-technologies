
## O que é e para que serve?

### Panic
O `panic` em Go é um mecanismo para interromper o fluxo normal de execução de um programa. Quando uma função chama `panic`, a execução da função é interrompida, todas as funções em execução são interrompidas e suas chamadas empilhadas são desfeitas (stack unwinding). Eventualmente, o programa será finalizado e exibirá uma mensagem de erro, incluindo o valor passado para `panic`.

O `panic` é geralmente utilizado em situações inesperadas e de erro grave das quais o programa não pode se recuperar. Exemplos incluem erros de programação, como tentativa de acessar um índice fora dos limites de um array ou tentativas de divisão por zero.

### Recover
O `recover` é usado para recuperar de um estado de pânico. Ele impede que o pânico interrompa a execução do programa, permitindo que o programa continue a execução normal. O `recover` só pode ser utilizado dentro de uma função chamada por `defer`, o que significa que ele é geralmente usado em conjunto com a instrução `defer`.

## Sintaxe de Uso

### Panic
```go
func main() {
    panic("Algo deu errado!")
}
```

### Recover
```go
func main() {
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("Recuperado do pânico:", r)
        }
    }()
    panic("Algo deu errado!")
}
```

## Restrições de Uso

### Panic
- **Uso Excessivo**: Utilizar `panic` excessivamente pode tornar o código difícil de entender e manter. É recomendado usá-lo apenas em situações de erro grave.
- **Impacto na Performance**: Chamar `panic` e `recover` frequentemente pode impactar a performance do programa, pois envolve a manipulação da pilha de chamadas.

### Recover
- **Contexto de Uso**: `recover` só funciona se chamado dentro de uma função deferida. Fora desse contexto, ele não pode interceptar um pânico.
- **Tratamento Inadequado**: Utilizar `recover` sem um tratamento adequado pode mascarar erros e levar a comportamentos inesperados.

## Quando Utilizar?

### Panic
- **Erros Irrecuperáveis**: Quando o programa encontra uma situação da qual não pode se recuperar e deve parar imediatamente.
- **Verificações de Programação**: Em situações onde há violação de contratos ou invariantes no código, como tentativa de acessar um índice fora dos limites de um array.

### Recover
- **Recuperação Controlada**: Quando há uma necessidade de recuperar o controle do programa após um pânico, geralmente para liberar recursos, registrar um erro ou reiniciar um processo.
- **Servidores e Goroutines**: Em servidores web ou em aplicações que utilizam goroutines, `recover` pode ser usado para evitar que um pânico em uma goroutine interrompa todo o servidor.

## Exemplos de Código

### Exemplo com Panic
```go
package main

import (
    "fmt"
)

func main() {
    fmt.Println("Início do programa")
    panic("Erro inesperado")
    fmt.Println("Isso não será impresso")
}
```

### Exemplo com Recover
```go
package main

import (
    "fmt"
)

func main() {
    fmt.Println("Início do programa")
    defer func() {
        if r := recover(); r != nil {
            fmt.Println("Recuperado do pânico:", r)
        }
    }()
    panic("Erro inesperado")
    fmt.Println("Isso não será impresso")
}
```

### Exemplo Avançado com Goroutines
```go
package main

import (
    "fmt"
)

func main() {
    go func() {
        defer func() {
            if r := recover(); r != nil {
                fmt.Println("Recuperado do pânico na goroutine:", r)
            }
        }()
        panic("Pânico na goroutine")
    }()
    
    // Dormir por um curto período para permitir que a goroutine termine
    select{}
}
```

## Conclusão

O `panic` e `recover` são mecanismos poderosos em Go que permitem o controle do fluxo de execução em situações de erro grave. Enquanto `panic` é usado para sinalizar erros irrecuperáveis, `recover` permite a recuperação desses erros de maneira controlada. Usados com moderação e de forma adequada, esses mecanismos podem melhorar a robustez e a resiliência do seu código.