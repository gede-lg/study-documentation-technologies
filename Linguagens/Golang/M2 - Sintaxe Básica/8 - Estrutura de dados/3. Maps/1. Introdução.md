# Maps no Go

## O que é e para que serve?

Um **map** em Go é uma estrutura de dados que associa chaves a valores. Ele é implementado como uma tabela de hash, onde cada chave única está mapeada para um valor. Maps são extremamente úteis quando você precisa de acesso rápido a dados baseados em uma chave única, como dicionários, índices ou contadores.

### Finalidade
- **Armazenar e Recuperar Dados Rápido**: A principal vantagem de um map é o tempo de acesso rápido, geralmente O(1), para recuperar valores com base em suas chaves.
- **Associar Chaves a Valores**: Você pode associar qualquer tipo de dados às chaves, o que torna os maps versáteis para muitos casos de uso, como caching, contagem de ocorrências, indexação por chave, etc.

## Sintaxe de Uso

#### Declaração

```go
var myMap map[string]int
```
Isto declara um map que associa chaves do tipo `string` a valores do tipo `int`. No entanto, o map ainda não foi inicializado.

#### Inicialização

Para inicializar um map, você pode usar a função `make`:

```go
myMap = make(map[string]int)
```

Ou você pode declarar e inicializar ao mesmo tempo:

```go
myMap := make(map[string]int)
```

#### Inicialização com Valores

Você também pode inicializar um map com valores:

```go
myMap := map[string]int{
    "foo": 1,
    "bar": 2,
}
```

## Restrições de Uso

- **Chaves Imutáveis**: O tipo das chaves deve ser comparável. Isso significa que tipos como slices, maps e funções não podem ser usados como chaves, pois não são comparáveis.
- **Desempenho e Espaço**: Maps consomem mais memória em comparação com algumas outras estruturas de dados devido ao armazenamento das tabelas de hash. Em cenários onde a memória é crítica, isso pode ser um fator a considerar.
- **Concorrência**: Maps não são seguros para uso concorrente. Se múltiplas goroutines precisarem acessar e modificar um map simultaneamente, é necessário sincronizar o acesso usando mecanismos como mutexes do pacote `sync`.

### Casos de Uso Típicos

- **Indexação**: Quando você precisa indexar dados por chaves únicas, como nomes, IDs, ou outros identificadores únicos.
- **Contadores**: Para contar a frequência de ocorrências de itens, como contagem de palavras em um texto.
- **Cachê**: Implementação de caches simples onde você precisa armazenar e recuperar dados rapidamente.
- **Dicionários**: Quando você precisa de uma associação chave-valor, como em traduções ou lookup tables.

### Exemplos de Código

#### Contagem de Palavras

Aqui está um exemplo de como você pode usar um map para contar a frequência de palavras em um texto:

```go
package main

import (
    "fmt"
    "strings"
)

func main() {
    text := "hello world hello"
    words := strings.Fields(text)

    wordCount := make(map[string]int)
    for _, word := range words {
        wordCount[word]++
    }

    for word, count := range wordCount {
        fmt.Println(word, count)
    }
}
```

#### Lookup Table

Exemplo de um map usado como uma tabela de lookup:

```go
package main

import (
    "fmt"
)

func main() {
    lookup := map[string]string{
        "NY": "New York",
        "CA": "California",
        "TX": "Texas",
    }

    fmt.Println("NY stands for", lookup["NY"])
}
```

## Conclusão

Maps são uma poderosa estrutura de dados em Go, proporcionando acesso rápido a dados através de chaves únicas. Sua sintaxe é simples e direta, mas seu uso correto e eficiente pode fazer uma grande diferença no desempenho e clareza do código. Ao utilizar maps, é importante estar ciente das restrições, especialmente em cenários de concorrência, e aplicar as melhores práticas para garantir a segurança e eficiência do código.