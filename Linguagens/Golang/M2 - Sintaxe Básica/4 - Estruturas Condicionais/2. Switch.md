# Estruturas de Controle no Go: `switch`

## O que é e para que serve?

O `switch` é uma estrutura de controle que permite selecionar uma dentre várias alternativas com base no valor de uma expressão. Ele substitui a sequência de declarações `if-else` quando há múltiplas condições para verificar, tornando o código mais legível e organizado.

### Para que serve?
- Simplificar a lógica de múltiplas condições.
- Melhorar a legibilidade do código.
- Agrupar casos que executam o mesmo bloco de código.

## Sintaxe de Uso

A sintaxe básica do `switch` em Go é a seguinte:

```go
switch expressão {
case valor1:
    // bloco de código para valor1
case valor2:
    // bloco de código para valor2
default:
    // bloco de código padrão
}
```

### Componentes da Sintaxe
1. **switch expressão**: A expressão que será avaliada.
2. **case valor**: O valor que a expressão será comparada.
3. **default**: (Opcional) O bloco de código que será executado se nenhum dos casos corresponder.

### Exemplos de Uso

#### Exemplo 1: Uso Básico
```go
package main

import "fmt"

func main() {
    dia := "segunda"

    switch dia {
    case "segunda":
        fmt.Println("Hoje é segunda-feira.")
    case "terça":
        fmt.Println("Hoje é terça-feira.")
    default:
        fmt.Println("Não é segunda nem terça.")
    }
}
```

#### Exemplo 2: Múltiplos Valores por Case
```go
package main

import "fmt"

func main() {
    dia := "sábado"

    switch dia {
    case "segunda", "terça", "quarta", "quinta", "sexta":
        fmt.Println("Dia útil.")
    case "sábado", "domingo":
        fmt.Println("Final de semana.")
    default:
        fmt.Println("Dia inválido.")
    }
}
```

#### Exemplo 3: Switch sem Expressão
Um `switch` pode ser usado sem uma expressão específica. Nesse caso, ele age como uma série de `if-else`.
```go
package main

import "fmt"

func main() {
    idade := 21

    switch {
    case idade < 18:
        fmt.Println("Menor de idade.")
    case idade >= 18 && idade < 65:
        fmt.Println("Adulto.")
    default:
        fmt.Println("Idoso.")
    }
}
```

## Restrições de Uso

1. **Tipos Compatíveis**: Os tipos dos valores em cada `case` devem ser compatíveis com o tipo da expressão avaliada no `switch`.
2. **Comparação de Valores**: Cada valor em um `case` deve ser uma constante ou uma expressão que resulte em um valor comparável.
3. **Escopo**: As variáveis declaradas dentro de um `case` estão limitadas ao escopo daquele `case`.

### Restrições em Detalhe

- **Constantes e Literais**: Os valores dos casos devem ser constantes ou literais.
- **Comparação Exata**: O `switch` faz comparações exatas, o que significa que o valor da expressão deve corresponder exatamente a um valor de `case` para que o bloco de código seja executado.

## Quando Utilizar?

### Casos Comuns de Uso

- **Quando há Múltiplas Condições**: Utilize `switch` quando você tem várias condições para verificar que estão relacionadas à mesma variável ou expressão.
- **Melhoria de Legibilidade**: Prefira `switch` sobre `if-else` aninhados para melhorar a legibilidade e organização do código.
- **Casos Exclusivos**: Use `switch` quando cada condição deve ser tratada de forma exclusiva.

### Exemplo de Caso Real

Suponha que você esteja escrevendo uma função que retorna uma mensagem baseada no status de um pedido:

```go
package main

import "fmt"

func obterMensagemStatus(status string) string {
    switch status {
    case "pendente":
        return "Seu pedido está pendente."
    case "processando":
        return "Seu pedido está sendo processado."
    case "completo":
        return "Seu pedido foi completado."
    case "cancelado":
        return "Seu pedido foi cancelado."
    default:
        return "Status desconhecido."
    }
}

func main() {
    fmt.Println(obterMensagemStatus("processando"))
}
```

Neste exemplo, o uso do `switch` simplifica a seleção da mensagem apropriada com base no status do pedido.

## Dicas Adicionais

1. **Fallthrough**: Em Go, os `case` não caem automaticamente para o próximo `case` como em algumas outras linguagens. Se você deseja que a execução continue no próximo `case`, use a palavra-chave `fallthrough`.

```go
   switch i {
   case 1:
       fmt.Println("1")
       fallthrough
   case 2:
       fmt.Println("2")
   }
```
   
1. **Performance**: Em muitos casos, o `switch` pode ser mais eficiente do que múltiplos `if-else` porque o compilador pode otimizar a execução.

2. **Expressões Complexas**: Use `switch` sem expressão quando precisar de condições mais complexas ou múltiplas variáveis:
   ```go
   switch {
   case x > y:
       fmt.Println("x é maior que y")
   case x < y:
       fmt.Println("x é menor que y")
   default:
       fmt.Println("x é igual a y")
   }
   ```

Ao entender e aplicar o `switch` corretamente, você pode escrever código Go mais claro, eficiente e organizado.