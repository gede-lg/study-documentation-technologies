# SnackbarAction no Flutter

## Introdução

No desenvolvimento de aplicativos Flutter, fornecer feedback imediato e interativo para o usuário é fundamental para uma experiência de uso fluida e intuitiva. Um dos componentes que facilitam essa comunicação são os **SnackBars**. Dentro dos SnackBars, a **SnackbarAction** desempenha um papel crucial ao permitir que os usuários executem ações rápidas diretamente a partir do próprio SnackBar. Este guia detalhado explora o que é a SnackbarAction, como ela funciona, sua sintaxe de uso, restrições, melhores práticas de utilização, propriedades, métodos principais e sua categorização dentro dos widgets Flutter.

## Sumário

1. [O que é e para que serve?](#o-que-é-e-para-que-serve)
2. [Como funciona?](#como-funciona)
3. [Sintaxe de uso](#sintaxe-de-uso)
4. [Restrições de uso](#restrições-de-uso)
5. [Quando utilizar?](#quando-utilizar)
6. [Propriedades do SnackbarAction](#propriedades-do-snackbaraction)
7. [Principais Métodos do SnackbarAction](#principais-métodos-do-snackbaraction)
8. [Categorias de Widgets que mais se encaixa](#categorias-de-widgets-que-mais-se-encaixa)
9. [Exemplos Práticos](#exemplos-práticos)
10. [Melhores Práticas](#melhores-práticas)
11. [Considerações Finais](#considerações-finais)

## O que é e para que serve?

A **SnackbarAction** é uma configuração utilizada dentro de um **SnackBar** no Flutter que adiciona um botão de ação ao SnackBar. Esse botão permite que o usuário realize uma ação rápida em resposta à mensagem exibida, como desfazer uma operação, reintentar uma ação ou navegar para uma outra parte do aplicativo.

**Principais usos da SnackbarAction:**

- **Desfazer ações:** Por exemplo, desfazer a exclusão de um item.
- **Reexecutar operações:** Como tentar novamente o download de um arquivo.
- **Navegação rápida:** Direcionar o usuário para outra tela ou funcionalidade.

Ao integrar a SnackbarAction, você melhora a interatividade e a responsividade do aplicativo, proporcionando uma experiência de usuário mais dinâmica e controlada.

## Como funciona?

A **SnackbarAction** é utilizada dentro da propriedade `action` de um **SnackBar**. Quando um SnackBar é exibido, ele aparece temporariamente na parte inferior da tela com uma mensagem informativa e, opcionalmente, um botão de ação. Esse botão é definido pela SnackbarAction e executa uma função específica quando pressionado.

O fluxo básico de funcionamento é:

1. **Criação do SnackBar:** Define-se a mensagem e a ação (SnackbarAction).
2. **Exibição do SnackBar:** Utiliza-se o método `ScaffoldMessenger.of(context).showSnackBar`.
3. **Interação do Usuário:** O usuário pode ler a mensagem e, se desejar, pressionar a ação definida.
4. **Execução da Ação:** Ao pressionar o botão, a função associada à SnackbarAction é executada.

## Sintaxe de uso

Para utilizar a **SnackbarAction**, você deve criar um **SnackBar** e definir a propriedade `action` com uma instância de **SnackBarAction**. A seguir, apresentamos a sintaxe básica:

```dart
ScaffoldMessenger.of(context).showSnackBar(
  SnackBar(
    content: Text('Item excluído'),
    action: SnackBarAction(
      label: 'Desfazer',
      onPressed: () {
        // Lógica para desfazer a exclusão
      },
      textColor: Colors.yellow, // Opcional
      disabledTextColor: Colors.grey, // Opcional
    ),
    duration: Duration(seconds: 3), // Opcional
  ),
);
```

**Explicação dos componentes:**

- **SnackBar:** Widget que exibe uma mensagem temporária.
- **content:** Conteúdo principal do SnackBar, geralmente um widget Text.
- **action:** Definição da SnackbarAction, incluindo o rótulo do botão e a função a ser executada.
- **duration:** Tempo que o SnackBar ficará visível.

## Restrições de uso

Embora a **SnackbarAction** seja uma ferramenta poderosa para interatividade, há algumas restrições e considerações a serem levadas em conta:

1. **Tempo Limitado:** SnackBars são temporários. A SnackbarAction deve executar ações que possam ser concluídas rapidamente.
2. **Contexto Adequado:** A função `ScaffoldMessenger.of(context)` deve ser chamada dentro de um contexto que contenha um Scaffold.
3. **Usabilidade:** Evite sobrecarregar o SnackBar com muitas ações ou informações complexas. Mantenha a simplicidade para não confundir o usuário.
4. **Acessibilidade:** As ações devem ser claramente identificáveis e acessíveis para todos os usuários, incluindo aqueles que utilizam leitores de tela.

## Quando utilizar?

A **SnackbarAction** deve ser utilizada em situações onde:

- **Desfazer ações recentes:** Como deletar um item ou cancelar uma operação.
- **Fornecer feedback adicional:** Informar o usuário sobre o status de uma operação com a possibilidade de interagir.
- **Melhorar a interatividade:** Permitir que o usuário execute ações rápidas sem sair do fluxo atual.
- **Evitar diálogos intrusivos:** Em vez de usar diálogos que interrompem o fluxo, um SnackBar com ação pode ser menos intrusivo.

**Exemplos de uso:**

- Após excluir um e-mail, oferecer uma opção para desfazer a exclusão.
- Após enviar uma mensagem, permitir que o usuário a edite ou exclua.
- Após realizar uma ação que requer confirmação rápida, como salvar um documento.

## Propriedades do SnackbarAction

A seguir, apresentamos uma tabela com todas as propriedades da classe **SnackBarAction**, suas descrições e sintaxes de uso:

| Propriedade            | Descrição                                                                                      | Sintaxe de Uso                                         |
|------------------------|------------------------------------------------------------------------------------------------|--------------------------------------------------------|
| `label`                | Rótulo do botão de ação. Geralmente uma palavra ou frase curta que descreve a ação.           | `label: 'Desfazer',`                                   |
| `onPressed`            | Função callback que será executada quando o botão de ação for pressionado.                    | `onPressed: () { /* ação */ },`                       |
| `textColor`            | Cor do texto do botão de ação.                                                                 | `textColor: Colors.yellow,`                            |
| `disabledTextColor`    | Cor do texto do botão quando a ação está desativada.                                           | `disabledTextColor: Colors.grey,`                      |
| `isExtended`           | Se verdadeiro, o botão de ação ocupará toda a largura disponível. (Introduzido no Flutter 2.5) | `isExtended: true,`                                    |
| `backgroundColor`      | Cor de fundo do botão de ação. (Disponível a partir de versões específicas do Flutter)          | `backgroundColor: Colors.blueAccent,`                  |
| `disabled`             | Se verdadeiro, desativa o botão de ação, impedindo interações.                                | `disabled: false,`                                      |
| `tooltip`              | Texto exibido quando o usuário pressiona e segura o botão de ação. (Acessibilidade)           | `tooltip: 'Desfazer a última ação',`                    |

> **Nota:** Algumas propriedades, como `backgroundColor` e `disabled`, podem não estar disponíveis em todas as versões do Flutter. Verifique a documentação oficial para compatibilidade.

## Principais Métodos do SnackbarAction

A classe **SnackBarAction** é um componente de configuração e, portanto, não possui métodos próprios. No entanto, interage diretamente com o **SnackBar** e, por consequência, com os métodos associados à exibição de SnackBars. A seguir, apresentamos uma tabela com os principais métodos relacionados:

| Método                         | Descrição                                                                                               | Sintaxe de Uso                                |
|--------------------------------|---------------------------------------------------------------------------------------------------------|-----------------------------------------------|
| `ScaffoldMessenger.of(context).showSnackBar` | Exibe um SnackBar na tela.                                                                           | `ScaffoldMessenger.of(context).showSnackBar(SnackBar(...));` |
| `ScaffoldMessenger.of(context).hideCurrentSnackBar` | Esconde o SnackBar atualmente exibido.                                                               | `ScaffoldMessenger.of(context).hideCurrentSnackBar();` |
| `ScaffoldMessenger.of(context).removeCurrentSnackBar` | Remove o SnackBar atualmente exibido sem animação.                                                    | `ScaffoldMessenger.of(context).removeCurrentSnackBar();` |

**Explicação dos métodos:**

- **showSnackBar:** Exibe um SnackBar na interface.
- **hideCurrentSnackBar:** Esconde o SnackBar atual, permitindo que outro SnackBar seja exibido.
- **removeCurrentSnackBar:** Remove o SnackBar atual imediatamente, sem animação.

## Em quais categoria de widget mais se encaixa

A **SnackbarAction** está relacionada a várias categorias de widgets no Flutter, proporcionando interatividade e feedback ao usuário. A seguir, listamos as categorias mais relevantes:

- **Material Components:** SnackBars são parte integrante dos componentes de Material Design, fornecendo feedback breve e ações rápidas.
- **Interaction Models:** Permite que o usuário interaja com feedbacks passivos através de ações.
- **Async:** Pode ser utilizado para informar sobre operações assíncronas e permitir ações como cancelamento ou retomada.
- **Accessibility:** Quando bem configurada, a SnackbarAction melhora a acessibilidade ao fornecer feedback e ações claras.
- **Styling:** Permite personalizar a aparência das ações dentro do SnackBar para manter a consistência visual do aplicativo.

## Exemplos Práticos

A seguir, apresentamos exemplos práticos de como utilizar a **SnackbarAction** no Flutter.

### Exemplo 1: SnackBar com Ação de Desfazer

Este exemplo demonstra como exibir um SnackBar com uma ação que permite desfazer a exclusão de um item.

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Exemplo de SnackbarAction',
      home: HomePage(),
    );
  }
}

class HomePage extends StatefulWidget {
  @override
  _HomePageState createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  List<String> _items = ['Item 1', 'Item 2', 'Item 3'];
  String? _recentlyDeletedItem;
  int? _recentlyDeletedItemIndex;

  void _deleteItem(int index) {
    setState(() {
      _recentlyDeletedItem = _items[index];
      _recentlyDeletedItemIndex = index;
      _items.removeAt(index);
    });

    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
        content: Text('$_recentlyDeletedItem foi excluído'),
        action: SnackBarAction(
          label: 'Desfazer',
          onPressed: _undoDelete,
          textColor: Colors.yellow,
        ),
        duration: Duration(seconds: 5),
      ),
    );
  }

  void _undoDelete() {
    if (_recentlyDeletedItem != null && _recentlyDeletedItemIndex != null) {
      setState(() {
        _items.insert(_recentlyDeletedItemIndex!, _recentlyDeletedItem!);
      });
      _recentlyDeletedItem = null;
      _recentlyDeletedItemIndex = null;
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        appBar: AppBar(
          title: Text('Lista de Itens'),
        ),
        body: ListView.builder(
          itemCount: _items.length,
          itemBuilder: (context, index) {
            return ListTile(
              title: Text(_items[index]),
              trailing: IconButton(
                icon: Icon(Icons.delete, color: Colors.red),
                onPressed: () => _deleteItem(index),
              ),
            );
          },
        ));
  }
}
```

**Explicação:**

- **Lista de Itens:** Exibe uma lista simples de itens com um botão de exclusão.
- **Excluir Item:** Ao pressionar o botão de exclusão, o item é removido da lista e um SnackBar é exibido.
- **SnackbarAction (Desfazer):** O botão 'Desfazer' permite que o usuário recupere o item excluído.

### Exemplo 2: SnackBar com Ação de Reintentar

Este exemplo mostra como utilizar a **SnackbarAction** para permitir que o usuário reexecute uma operação falhada, como o download de um arquivo.

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Exemplo de Reintentar com SnackBar',
      home: DownloadPage(),
    );
  }
}

class DownloadPage extends StatefulWidget {
  @override
  _DownloadPageState createState() => _DownloadPageState();
}

class _DownloadPageState extends State<DownloadPage> {
  bool _isDownloading = false;

  Future<void> _startDownload() async {
    setState(() {
      _isDownloading = true;
    });

    try {
      // Simula um download com erro
      await Future.delayed(Duration(seconds: 2));
      throw Exception('Erro no download');
    } catch (e) {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('Falha ao realizar download'),
          action: SnackBarAction(
            label: 'Reintentar',
            onPressed: _startDownload,
            textColor: Colors.blue,
          ),
          duration: Duration(seconds: 4),
        ),
      );
    } finally {
      setState(() {
        _isDownloading = false;
      });
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        appBar: AppBar(
          title: Text('Página de Download'),
        ),
        body: Center(
          child: _isDownloading
              ? CircularProgressIndicator()
              : ElevatedButton(
                  onPressed: _startDownload,
                  child: Text('Iniciar Download'),
                ),
        ));
  }
}
```

**Explicação:**

- **Iniciar Download:** Ao pressionar o botão, tenta-se realizar um download simulado que falha.
- **SnackbarAction (Reintentar):** Quando ocorre um erro, exibe-se um SnackBar com a opção de reexecutar o download.

### Exemplo 3: SnackBar com Múltiplas Ações

Embora não seja comum, é possível adicionar múltiplas ações em um SnackBar utilizando widgets personalizados. A seguir, um exemplo ilustrativo:

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'SnackBar com Múltiplas Ações',
      home: MultiActionPage(),
    );
  }
}

class MultiActionPage extends StatelessWidget {
  void _firstAction() {
    print('Primeira ação executada');
  }

  void _secondAction() {
    print('Segunda ação executada');
  }

  void _showMultiActionSnackBar(BuildContext context) {
    final snackBar = SnackBar(
      content: Text('Escolha uma ação'),
      duration: Duration(seconds: 5),
      action: SnackBarAction(
        label: 'Ação 1',
        onPressed: _firstAction,
        textColor: Colors.green,
      ),
    );

    ScaffoldMessenger.of(context).showSnackBar(snackBar);

    // Adicionando uma segunda ação após um pequeno atraso
    Future.delayed(Duration(milliseconds: 500), () {
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text('Escolha uma ação'),
          duration: Duration(seconds: 5),
          action: SnackBarAction(
            label: 'Ação 2',
            onPressed: _secondAction,
            textColor: Colors.red,
          ),
        ),
      );
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
        appBar: AppBar(
          title: Text('Múltiplas Ações no SnackBar'),
        ),
        body: Center(
          child: ElevatedButton(
            onPressed: () => _showMultiActionSnackBar(context),
            child: Text('Mostrar SnackBar com Ações'),
          ),
        ));
  }
}
```

**Observação:** Este exemplo não adiciona múltiplas ações simultaneamente devido às limitações do SnackBar, mas ilustra como sequenciar ações.

## Melhores Práticas

Para otimizar o uso da **SnackbarAction** em seu aplicativo Flutter, considere as seguintes melhores práticas:

1. **Clareza nas Ações:** Utilize rótulos claros e concisos para as ações, garantindo que o usuário compreenda imediatamente o que a ação fará.
2. **Evite Excesso de Ações:** Limite o número de ações no SnackBar a uma única ação para manter a interface limpa e evitar confusão.
3. **Feedback Adequado:** Certifique-se de que as ações forneçam feedback imediato ao serem executadas, seja atualizando a interface ou exibindo mensagens adicionais.
4. **Consistência Visual:** Mantenha a consistência nas cores e estilos das ações para alinhamento com o tema geral do aplicativo.
5. **Considerações de Acessibilidade:** Utilize propriedades como `tooltip` para melhorar a acessibilidade e garantir que usuários com necessidades especiais possam interagir facilmente.
6. **Gerenciamento de Estado:** Ao utilizar SnackBars em conjunto com ações que alteram o estado da aplicação, assegure-se de gerenciar o estado de forma eficiente para evitar inconsistências.
7. **Evite Ações Complexas:** As ações devem ser rápidas e diretas, evitando operações que possam levar tempo ou requerer múltiplas interações.
8. **Teste em Diferentes Cenários:** Verifique como os SnackBars e suas ações se comportam em diferentes dispositivos e situações, garantindo uma experiência consistente.

## Considerações Finais

A **SnackbarAction** é uma ferramenta poderosa no arsenal de desenvolvimento Flutter, permitindo interações rápidas e eficientes entre o usuário e o aplicativo. Ao integrar ações diretas nos SnackBars, você pode melhorar significativamente a usabilidade e a responsividade de suas aplicações.

**Pontos chave a lembrar:**

- **Interatividade:** Forneça ações que complementem a mensagem do SnackBar, oferecendo soluções rápidas ou correções.
- **Simplicidade:** Mantenha as ações simples e diretas para não sobrecarregar o usuário.
- **Consistência:** Alinhe as ações com o design e tema geral do aplicativo para uma experiência de usuário harmoniosa.
- **Acessibilidade:** Garanta que todas as ações sejam acessíveis a todos os usuários, incluindo aqueles que dependem de tecnologias assistivas.

Ao seguir as melhores práticas e compreender profundamente as funcionalidades da **SnackbarAction**, você estará apto a criar interfaces mais interativas, amigáveis e eficientes, elevando a qualidade geral de seus aplicativos Flutter.