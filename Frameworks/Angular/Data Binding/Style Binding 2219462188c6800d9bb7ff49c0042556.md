# Style Binding

**1. Introdução**

O *Style Binding* no Angular é o mecanismo que permite vincular dinamicamente estilos CSS a elementos do template, ajustando propriedades como cores, larguras, margens etc., de forma reativa ao estado da aplicação.

- **Relevância**: permite criar UIs mais flexíveis e interativas sem manipular o DOM manualmente.
- **Conceitos Fundamentais**:
    - **Tema Principal**: *Style Binding* – como ligar propriedades CSS diretamente a expressões do componente.
    - **Subtemas**:
        1. **Binding de propriedades individuais** (`[style.prop]`)
        2. **Binding de múltiplos estilos** (`[ngStyle]`)
    - **Finalidade**: aplicar estilos de maneira condicionada, reativa e segura, segundo o estado do componente ou de variáveis.

---

**2. Sumário**

1. Introdução
2. Sumário
3. Conteúdo Detalhado
    1. Sintaxe e Estrutura
    2. Componentes Principais e Associados
    3. Restrições de Uso
4. Exemplos de Código Otimizados
5. Informações Adicionais
6. Referências para Estudo Independente

---

## 3. Conteúdo Detalhado

### 3.1. Sintaxe e Estrutura

- **Vinculação de propriedade única**
    
    ```html
    <div [style.background-color]="isActive ? 'green' : 'red'">
      Status: {{ isActive ? 'Ativo' : 'Inativo' }}
    </div>
    
    ```
    
    - `[style.<nome-da-propriedade>]` aceita qualquer propriedade CSS em camelCase ou kebab-case (note que em kebab-case deve-se usar aspas: `[style.'font-size']`).
    - O valor da expressão pode ser string (cores, unidades) ou número (para propriedades que aceitam valores numéricos, que automaticamente recebem `px`).
- **Vinculação de múltiplos estilos**
    
    ```html
    <div [ngStyle]="{
        'font-weight': isBold ? 'bold' : 'normal',
        'font-size.px': fontSize,
        'opacity': 0.8
      }">
      Texto estilizado
    </div>
    
    ```
    
    - `[ngStyle]` recebe um objeto cujas chaves são nomes de propriedades CSS (em string) e valores as expressões.
    - Para especificar unidade diferente de `px`, use o sufixo no nome da chave, por exemplo `'width.%'`.

### 3.2. Componentes Principais e Associados

- **Diretivas de binding**
    - **`[style.prop]`**
        - Altera diretamente uma única propriedade CSS.
        - Bom para casos simples e de única responsabilidade.
    - **`[ngStyle]`**
        - Diretiva que recebe um objeto de estilos.
        - Ideal quando há múltiplas propriedades relacionadas ou quando o conjunto de estilos é construído dinamicamente no componente.
- **Interação com Componentes**
    - No **component.ts**, defina propriedades reativas (por exemplo, em resposta a eventos ou estados de serviço) que alimentem o binding no template:
        
        ```
        export class MeuComponente {
          isActive = false;
          fontSize = 14;
          toggle() {
            this.isActive = !this.isActive;
            this.fontSize += 2;
          }
        }
        
        ```
        
    - No **template**, a vinculação reflete imediatamente mudanças de `isActive` e `fontSize`.

### 3.3. Restrições de Uso

- **Sanitização**: o Angular sanitiza automaticamente valores de URLs e estilos potencialmente perigosos; ainda assim, evite inserir CSS arbitrário de fontes não confiáveis.
- **Performance**: alterações em muitos bindings individuais podem impactar a performance; considere usar `[ngClass]` ou classes CSS pré-definidas quando possível.
- **Unidades**: se omitir unidade em `[style.prop]` com número, o Angular assume `px`. Para outras unidades, especifique no binding ou use `[ngStyle]`.

---

## 4. Exemplos de Código Otimizados

### 4.1. Uso Básico

```html
<!-- app.component.html -->
<button (click)="toggle()">
  {{ isActive ? 'Desativar' : 'Ativar' }}
</button>

<div
  [style.background-color]="isActive ? 'lightgreen' : 'lightcoral'"
  [style.color]="isActive ? 'darkgreen' : 'darkred'"
  style="padding: 1rem; border-radius: 0.5rem;"
>
  Componente está {{ isActive ? 'Ativo' : 'Inativo' }}
</div>

```

```
// app.component.ts
export class AppComponent {
  isActive = false;
  toggle() { this.isActive = !this.isActive; }
}

```

> Por que otimizado:
> 
> - Evita manipulação direta do DOM.
> - Usa estilos inline para propriedades estáticas.
> - Mantém lógica de estado no TypeScript.

### 4.2. Uso Avançado com ngStyle e Responsividade

```html
<!-- card.component.html -->
<div [ngStyle]="getCardStyles()">
  <h3>{{ title }}</h3>
  <p>{{ content }}</p>
</div>

```

```
// card.component.ts
@Component({ /* ... */ })
export class CardComponent {
  @Input() title = '';
  @Input() content = '';
  @Input() highlighted = false;

  getCardStyles() {
    return {
      'border': this.highlighted ? '2px solid #005f99' : '1px solid #ccc',
      'padding.px': 16,
      'background-color': this.highlighted ? '#e6f7ff' : '#fff',
      'box-shadow': this.highlighted
        ? '0 2px 8px rgba(0,95,153,0.2)'
        : 'none'
    };
  }
}

```

> Casos de uso reais:
> 
> - Componentes de card que mudam visual quando “destacados”.
> - Geração de estilos dinâmicos baseados em inputs, mantendo template limpo.

---

## 5. Informações Adicionais

- **Binding versus Classes CSS**: para estados binários (activado/desativado), usar `[ngClass]` pode ser mais performático e legível que `[style]`.
- **Responsividade e Media Queries**: estilos estáticos via CSS externo ainda são melhores para media queries; reserve *Style Binding* para alterações reativas em runtime.
- **Host Binding**: em componentes, é possível usar `@HostBinding('style.backgroundColor') bgColor = 'blue';` para vincular estilo diretamente ao host.

---

## 6. Referências para Estudo Independente

- [Angular—Style Binding (oficial)](https://angular.io/guide/style-binding)
- [Angular—ngStyle API](https://angular.io/api/common/NgStyle)
- Livro *ng-book: The Complete Guide to Angular* (Capítulo “Templates & Data Binding”)
- Artigo “Mastering Angular Dynamic Styles” (Site Scotch.io)
- Tutorial “Angular Reactive UI Patterns” (Site DigitalOcean)