# ng run

## Título

**Execução de Targets de Architect com `ng run` no Angular CLI**

---

## Introdução

O `ng run` é um comando avançado do Angular CLI que permite invocar diretamente *builders* (alvos do Architect) definidos no arquivo de configuração do *workspace* (`angular.json`). Ao contrário de comandos dedicados como `ng build` ou `ng serve`, o `ng run` dá acesso a qualquer *target* personalizado, oferecendo máxima flexibilidade para tarefas de construção, teste, linting ou qualquer processo definido pelo usuário. ([angular.dev](https://angular.dev/cli/run?utm_source=chatgpt.com))

---

## Sumário

1. [Conceitos Fundamentais](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
2. [Sintaxe e Uso](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
3. [Restrições de Uso](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
4. [Argumentos](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
5. [Opções](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
6. [Melhores Práticas e Casos de Uso](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
7. [Exemplos Completos](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)
8. [Tópicos Relacionados](ng%20run%2021d9462188c6800a85a7e67340592fe1.md)

---

## Conceitos Fundamentais

- **Architect:** motor interno do CLI responsável por executar tarefas complexas (build, serve, test, lint etc.), segundo definições em `angular.json`.
- **Target:** nome lógico de uma tarefa no Architect (por exemplo, `build`, `test` ou um *builder* customizado).
- **Configurações:** cada target pode ter uma configuração padrão (`options`) e configurações alternativas nomeadas (`configurations`), que permitem adaptar parâmetros (por exemplo, `production`, `staging`).
- **angular.json:** arquivo central de configuração de *workspace*, onde são definidos projetos, targets e suas opções. ([angular.dev](https://angular.dev/cli/run?utm_source=chatgpt.com))

---

## Sintaxe e Uso

```bash
ng run <project:target[:configuration]> [--help] [--<builder-option>=<value>...]

```

- `<project:target[:configuration]>`:
    - `project` – nome do projeto conforme em `angular.json`.
    - `target` – o nome do target no bloco `architect`.
    - `configuration` (opcional) – nome de uma configuração alternativa em `architect.[target].configurations`.
- Qualquer opção adicional (`-prod`, `-outputPath`, etc.) será repassada diretamente ao *builder* correspondente. ([angular.dev](https://angular.dev/cli/run?utm_source=chatgpt.com))

---

## Restrições de Uso

- **Fluxos Comuns:** para tarefas padrão, prefira comandos diretos (`ng build`, `ng serve`, `ng test`).
- **Legibilidade:** `ng run` requer conhecer a estrutura de `angular.json`; para equipes não familiarizadas, pode gerar confusão.
- **Compatibilidade de Scripts:** configurações nomeadas embutidas em `<target>:<configuration>` podem não aceitar `-configuration` conforme esperado em algumas versões (Issue #10569). ([github.com](https://github.com/angular/angular-cli/issues/10569?utm_source=chatgpt.com))
- **Uso em CI:** evite `ng run` em pipelines automatizados se o *builder* tiver wrapper dedicado (ex.: `ng lint` em vez de `ng run my-app:lint`).

---

## Argumentos

| Argumento | Tipo | Descrição |
| --- | --- | --- |
| `<project:target[:configuration]>` | String | Projeto e target a executar, no formato `meu-app:build[:production]`. Configuração opcional dentro do mesmo alvo. ([angular.dev](https://angular.dev/cli/run?utm_source=chatgpt.com)) |

---

## Opções

| Opção | Alias | Tipo | Descrição |
| --- | --- | --- | --- |
| `--help` | — | boolean | Exibe mensagem de ajuda detalhada para o comando `ng run`.                                                               ([angular.dev](https://angular.dev/cli/run?utm_source=chatgpt.com)) |
| `--configuration=<name>` | `-c` | string | Identifica uma configuração alternativa definida no bloco `configurations` de `angular.json`.                             ([blog.adglob.in](https://blog.adglob.in/angular-cli-ng-run-command/?utm_source=chatgpt.com)) |
| `--<builder-option>=<value>` | — | — | Qualquer opção suportada pelo *builder* do target (por exemplo, `--outputPath`, `--watch`, `--aot`, etc.). |

---

## Melhores Práticas e Casos de Uso

- **Automatização de Pipelines:** use `ng run` para targets não expostos diretamente no CLI padrão (por exemplo, pré-renderização de rotas com `app-shell`).
- **Builders Customizados:** ao criar *builders* próprios, teste sua invocação via `ng run <project:meu-builder>`.
- **Estrutura Monorepo:** em workspaces com múltiplos projetos, especifique sempre o projeto para evitar ambiguidade.
- **Passing Through de Opções:** aproveite `ng run` para encaminhar flags específicas, sem necessidade de scripts adicionais no `package.json`.

---

## Exemplos Completos

### 1. Executando build de aplicação

```bash
# Build padrão (configuração 'development')
ng run my-app:build

# Build para produção usando configuração nomeada
ng run my-app:build:production

```

```
// trecho relevante de angular.json
{
  "projects": {
    "my-app": {
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:browser",
          "options": { /* opções padrão */ },
          "configurations": {
            "production": { /* otimizações de produção */ }
          }
        }
      }
    }
  }
}

```

*Output:* gera os artefatos em `dist/my-app` ([tutorialspoint.com](https://www.tutorialspoint.com/angular_cli/angular_cli_ng_run.htm?utm_source=chatgpt.com))

---

### 2. Invocando um *builder* customizado

Suponha um *builder* registrado como `@meu-org:meu-builder`:

```bash
ng run my-lib:meu-builder --verbose --outputPath=custom-dist

```

Nesse caso, todas as opções após `--` são encaminhadas ao *builder* definido em `angular.json`.

---

## Tópicos Relacionados

- **Angular Builders:** criação e uso de *builders* customizados
- **angular.json:** estruturação avançada de *workspace*
- **ng generate:** geração de código via *schematics*
- **ng deploy:** automação de deployment usando *deployers* oficiais e customizados
- **Customização de Configurações de Build**

Espero que esta explicação ajude a compreender em profundidade o `ng run` e como integrá-lo eficientemente em seus fluxos de trabalho com o Angular CLI!