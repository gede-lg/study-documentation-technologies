# script

## Título

**Autocompletion Avançado com `ng completion script` no Angular CLI**

---

## Introdução

O Angular CLI inclui o comando `ng completion` para habilitar o autocompletar de comandos e opções diretamente no seu shell. Ao pressionar `<TAB>` durante a digitação, o terminal sugere os comandos e argumentos disponíveis, tornando a experiência de uso da CLI muito mais produtiva e reduzindo a necessidade de memorizar toda a sintaxe ([angular.dev](https://angular.dev/cli/completion)).

---

## Sumário

1. [Conceitos Fundamentais](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#1-conceitos-fundamentais)
2. [Sintaxe e Uso](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#2-sintaxe-e-uso)
3. [Restrições de Uso](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#3-restri%C3%A7%C3%B5es-de-uso)
4. [Argumentos](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#4-argumentos)
5. [Opções](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#5-op%C3%A7%C3%B5es)
6. [Melhores Práticas e Casos de Uso](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#6-melhores-pr%C3%A1ticas-e-casos-de-uso)
7. [Exemplos Completos](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#7-exemplos-completos)
8. [Tópicos Adicionais](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#8-t%C3%B3picos-adicionais)
9. [Sugestões de Tópicos Relacionados](https://chatgpt.com/c/685bd1e4-9d88-8013-9f64-1ff6bede9ffc#9-sugest%C3%B5es-de-t%C3%B3picos-relacionados)

---

## 1. Conceitos Fundamentais

- **Autocompletar de Shell**: recurso que, ao pressionar `<TAB>`, propõe comandos e opções válidas para o contexto atual.
- **Integração com Angular CLI**: o `ng completion` gera um script que, ao ser carregado no shell, intermedeia chamadas ao CLI para fornecer sugestões em tempo real ([angular.dev](https://angular.dev/cli/completion)).
- **Benefícios**: descoberta rápida de comandos, redução de erros de digitação e aumento de eficiência no fluxo de trabalho ([tutorialspoint.com](https://www.tutorialspoint.com/angular_cli/angular_cli_ng_completion.htm?utm_source=chatgpt.com)).

---

## 2. Sintaxe e Uso

O comando base é:

```bash
ng completion [options]

```

Para gerar o script (Bash/Zsh) em tempo real use:

```bash
ng completion script

```

**Automated setup**

Na primeira execução do `ng serve` (v14+), a CLI pergunta:

```bash
Would you like to enable autocompletion? (Modifies ~/.bashrc, ~/.zshrc…)

```

Basta responder “Yes” e o Angular adiciona:

```bash
source <(ng completion script)

```

ao seu arquivo de configuração de shell ([angular.dev](https://angular.dev/cli/completion)).

**Manual setup**

Para maior controle, insira você mesmo no seu `~/.bashrc` ou `~/.zshrc`:

```bash
# Angular CLI autocompletion
source <(ng completion script)

```

Depois, reinicie o terminal ou execute diretamente ([angular.dev](https://angular.dev/cli/completion)):

```bash
source <(ng completion script)

```

---

## 3. Restrições de Uso

- **Shells suportados**: Bash e Zsh no macOS e Linux. No Windows, use Git Bash ou WSL com Bash/Zsh ([angular.dev](https://angular.dev/cli/completion)).
- **Fish (ainda não oficial)**: atualmente não há suporte nativo para o Fish Shell; requer workarounds ou aguardar futuras atualizações ([github.com](https://github.com/angular/angular-cli/issues/23993?utm_source=chatgpt.com)).
- **PowerShell/CMD**: não suportados diretamente, pois não possuem o mecanismo de autocompletion compatível com o script gerado.

---

## 4. Argumentos

O `ng completion` **não aceita argumentos posicionais** além do opcional sub-comando `script`. Todo o seu comportamento é definido pelas *options*. ([tutorialspoint.com](https://www.tutorialspoint.com/angular_cli/angular_cli_ng_completion.htm?utm_source=chatgpt.com))

---

## 5. Opções

| Opção | Descrição |
| --- | --- |
| `--help` | Exibe a mensagem de ajuda do comando. |
| `--all` | Gera script de autocompletar para **todos** os shells disponíveis. |
| `--bash` | Gera script específico para o **Bash**. |
| `--zsh` | Gera script específico para o **Zsh**. |
| `--fish` | (Não oficial) Gera script para **Fish Shell**, via workaround. |

> Observação: o sub-comando script gera automaticamente o autocompletion em Bash e Zsh em tempo real. (tutorialspoint.com)
> 

---

## 6. Melhores Práticas e Casos de Uso

- **Configuração Única**: execute `ng completion` apenas uma vez por ambiente. Depois, mantenha o trecho no seu `~/.bashrc` ou no repositório de dotfiles controlado.
- **Ambientes Personalizados**: em setups corporativos ou com múltiplos shells, prefira o *manual setup* para garantir localização e versionamento do script.
- **Scripts de CI/CD**: evite carregar autocompletion dentro de pipelines automatizados; mantenha-o apenas em terminais interativos.
- **Oh-My-Zsh**: use o plugin `ng` do Oh-My-Zsh para simplificar o processo de carregamento do `ng completion` sem edição direta de arquivos.

---

## 7. Exemplos Completos

```bash
# Instalar globalmente (se necessário)
npm install -g @angular/cli

# Executar pela primeira vez no projeto
cd meu-projeto
ng completion      # Pergunta para habilitar
# Responda 'Yes' para que o .bashrc seja alterado

# Ou manualmente:
echo 'source <(ng completion script)' >> ~/.bashrc
source ~/.bashrc

# Teste:
ng serv<TAB>      # Completa para 'ng serve'
ng generate comp<TAB>  # Mostra opções de geração de componente

```

```
# No ~/.zshrc, certifique-se de ter:
source <(ng completion script)

# Ou, se usar Oh-My-Zsh:
plugins+=(ng)
# E garanta plugin ng instalado em ~/.oh-my-zsh/plugins/ng

# Depois:
source ~/.zshrc
ng upd<TAB>      # Completa para 'ng update'

```

---

## 8. Tópicos Adicionais

- **Customizando Autocomplete**: estenda o script para incluir aliases próprios.
- **Performance de Shell**: monitore o tempo de inicialização; comentários excessivos podem retardar o carregamento (`terminal hangs`).
- **Depuração**: se o terminal “travar” no startup, comente temporariamente a linha de `source <(ng completion script)` e reinicie o shell ([stackoverflow.com](https://stackoverflow.com/questions/75059198/terminal-hangs-on-ng-completion-script-from-angular-cli?utm_source=chatgpt.com)).

---

## 9. Sugestões de Tópicos Relacionados

- Fundamentos de autocompletar em Bash e Zsh
- Plugins Oh-My-Zsh para Angular e Node.js
- Escrita de scripts de shell robustos
- Integração do Angular CLI com ambientes Windows via WSL
- Personalização avançada de CLI no ecossistema JavaScript

---

**Pronto!** Esta explicação cobre em profundidade o `ng completion script` no Angular CLI, desde conceitos básicos até exemplos práticos e melhores práticas.