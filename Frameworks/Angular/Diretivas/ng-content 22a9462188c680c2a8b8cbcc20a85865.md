# ng-content

E aí, Gedê\! Beleza? Compreendi que você precisa de uma explicação detalhada sobre `ng-content` no Angular. Como um desenvolvedor Backend Java em transição para Go, sei que entender esses fundamentos do frontend é super importante. A Ju, como fisioterapeuta, talvez não lide com isso no dia a dia, mas para nós, desenvolvedores, é essencial\!

Vamos lá, A.R.I.A vai te ajudar a desmistificar o `ng-content` de uma forma clara e prática.

---

# Entendendo `ng-content` no Angular: Reutilização e Composição de Componentes

O `ng-content` é uma diretiva fundamental no Angular que permite a **transclusão** de conteúdo, ou seja, a capacidade de projetar conteúdo de um componente pai em um componente filho. Em termos mais simples, ele funciona como um "placeholder" dentro do template de um componente, onde o conteúdo que você passa para esse componente a partir de seu pai será renderizado.

A relevância do `ng-content` no desenvolvimento Angular é imensa, pois ele é a base para a criação de **componentes altamente reutilizáveis e flexíveis**. Pense em componentes como cards, modais ou painéis; eles geralmente possuem uma estrutura visual comum, mas o conteúdo interno pode variar bastante. Em vez de criar um componente diferente para cada variação de conteúdo, você pode usar `ng-content` para permitir que o componente pai "projete" o conteúdo específico para dentro do componente filho. Isso promove a **composição de componentes**, tornando seu código mais modular, legível e fácil de manter.

## O que é `ng-content` e Para que Serve?

`ng-content` é uma diretiva do Angular usada para **inserir dinamicamente conteúdo em um componente**. Ela serve para criar componentes que agem como "envolvedores" ou "containers" para outros elementos ou componentes. Imagine que você está construindo um `CardComponent`. A estrutura visual do card (bordas, sombra, etc.) é sempre a mesma, mas o título, a imagem e o texto dentro do card mudam. O `ng-content` permite que o `CardComponent` defina onde esse conteúdo variável deve ser inserido.

---

# Sumário

1. **Introdução ao `ng-content`**
2. **Sintaxe e Estrutura**
    - Projeção de Conteúdo Simples
    - Projeção de Conteúdo com Seletores (`select`)
3. **Componentes Principais e Associados**
    - Múltiplos Slots de Conteúdo
    - Ordem de Projeção
    - Conteúdo Padrão (Fallback)
4. **Restrições de Uso**
5. **Exemplos de Código Otimizados**
    - Exemplo Básico: Card Genérico
    - Exemplo Avançado: Modal com Slots Nomeados
6. **Informações Adicionais**
    - `ng-content` vs. `@Input()`
    - Impacto no Ciclo de Vida do Componente
7. **Referências para Estudo Independente**

---

# Conteúdo Detalhado

## Sintaxe e Estrutura

### Projeção de Conteúdo Simples

A forma mais básica de usar `ng-content` é sem nenhum seletor. Nesse caso, todo o conteúdo que é passado para o componente filho é projetado em um único local.

**Exemplo de Declaração:**

Considere um `CardComponent`:

```tsx
// src/app/card/card.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-card',
  templateUrl: './card.component.html',
  styleUrls: ['./card.component.css']
})
export class CardComponent { }

```

**Exemplo de Utilização (`card.component.html`):**

```html
<div class="card">
  <div class="card-header">
    <h2>Este é o Cabeçalho Fixo do Card</h2>
  </div>
  <div class="card-content">
    <ng-content></ng-content> </div>
  <div class="card-footer">
    <p>Este é o Rodapé Fixo do Card</p>
  </div>
</div>

```

**Exemplo de Utilização (`app.component.html` - componente pai):**

```html
<app-card>
  <p>Este é o conteúdo **dinâmico** que será inserido dentro do `ng-content`.</p>
  <button>Clique aqui</button>
</app-card>

```

Quando o `AppComponent` renderizar o `app-card`, o `<p>` e o `<button>` serão projetados onde o `<ng-content></ng-content>` está no `CardComponent`.

### Projeção de Conteúdo com Seletores (`select`)

Para ter mais controle sobre qual conteúdo é projetado em qual local, você pode usar o atributo `select` com um seletor CSS. Isso permite definir múltiplos "slots" de conteúdo dentro de um componente filho.

**Exemplo de Utilização (`card.component.html` com seletores):**

```html
<div class="card">
  <div class="card-header">
    <ng-content select="[card-title]"></ng-content> </div>
  <div class="card-content">
    <ng-content></ng-content> </div>
  <div class="card-actions">
    <ng-content select=".card-actions"></ng-content> </div>
</div>

```

**Exemplo de Utilização (`app.component.html` - componente pai com slots nomeados):**

```html
<app-card>
  <h3 card-title>Meu Título Importante</h3> <p>Este é o parágrafo principal do meu card.</p> <button class="card-actions">Ação Principal</button> <a href="#" class="card-actions">Link Secundário</a>
</app-card>

```

No exemplo acima, o `<h3>` será projetado no primeiro `ng-content` (com `select="[card-title]"`), o `<p>` no `ng-content` sem seletor, e os elementos com a classe `card-actions` no último `ng-content`.

## Componentes Principais e Associados

O `ng-content` em si é uma diretiva estrutural, e sua principal "associação" é com o template do componente onde ele é utilizado.

### Múltiplos Slots de Conteúdo

Como visto no exemplo anterior, podemos ter múltiplos elementos `<ng-content>` em um mesmo template de componente. Cada um pode ter um seletor diferente (`select="seletor-css"`), permitindo que o componente pai envie diferentes blocos de conteúdo para locais específicos dentro do componente filho.

### Ordem de Projeção

A ordem em que você define os `ng-content` no template do componente filho é a ordem em que eles esperam o conteúdo. No entanto, o conteúdo enviado pelo pai será projetado nos respectivos slots **independentemente da ordem em que são declarados no pai**, desde que correspondam aos seletores. O conteúdo que não corresponde a nenhum seletor de `ng-content` será projetado no `ng-content` **sem seletor** (o slot padrão). Se não houver um `ng-content` sem seletor, o conteúdo não correspondente não será exibido.

### Conteúdo Padrão (Fallback)

Você pode fornecer conteúdo padrão para um `ng-content`. Esse conteúdo será exibido apenas se o componente pai não fornecer nenhum conteúdo para aquele slot específico.

**Exemplo:**

```html
<button>
  <ng-content>Salvar</ng-content> </button>

```

**Uso no pai:**

```html
<app-my-button></app-my-button> <app-my-button>Enviar</app-my-button> ```

## Restrições de Uso

* **Apenas no Template do Componente:** `ng-content` só pode ser usado dentro do template (`.html`) de um componente Angular. Não pode ser usado em serviços, módulos ou diretamente em diretivas que não sejam componentes.
* **Conteúdo HTML/Template:** O `ng-content` é projetado para lidar com conteúdo de template (HTML, outros componentes, texto). Ele não lida com dados JavaScript diretamente. Para passar dados, use `@Input()`.
* **Não Manipulável Diretamente:** O conteúdo projetado via `ng-content` é gerenciado pelo Angular. Você não deve tentar manipulá-lo diretamente via `ViewChild` ou `ContentChild` de forma a alterar o DOM que foi projetado, a menos que seja para consultar o conteúdo. Se precisar de manipulação, é provável que um `@Input()` ou um `@ContentChildren` seja mais apropriado.

---

# Exemplos de Código Otimizados

## Exemplo Básico: Card Genérico

Este é um exemplo clássico para um componente `CardComponent` que pode ser usado para exibir diversos tipos de conteúdo.

```typescript
// src/app/card/card.component.ts
import { Component, Input } from '@angular/core';

@Component({
  selector: 'app-card',
  template: `
    <div class="card">
      <div class="card-header">
        <ng-content select="[card-header]"></ng-content>
      </div>
      <div class="card-body">
        <ng-content></ng-content>
      </div>
      <div class="card-footer">
        <ng-content select="[card-footer]"></ng-content>
      </div>
    </div>
  `,
  styles: [`
    .card {
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin: 16px;
      padding: 16px;
      background-color: white;
    }
    .card-header {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 8px;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }
    .card-body {
      margin-bottom: 8px;
    }
    .card-footer {
      font-size: 0.9em;
      color: #666;
      border-top: 1px solid #eee;
      padding-top: 8px;
      text-align: right;
    }
  `]
})
export class CardComponent {
  @Input() title: string = ''; // Exemplo de input para um título simples, se preferir
}

```

**Uso:**

```html
<app-card>
  <div card-header>
    <h1>Notícia do Dia</h1>
  </div>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
  <ul>
    <li>Item 1</li>
    <li>Item 2</li>
  </ul>
  <div card-footer>
    <small>Publicado em: 08/07/2025</small>
  </div>
</app-card>

<app-card>
  <h2 card-header>Produto em Destaque</h2>
  <img src="<https://via.placeholder.com/150>" alt="Placeholder" style="max-width: 100%; height: auto;">
  <p>Confira nosso novo produto revolucionário!</p>
</app-card>

```

Este exemplo mostra a flexibilidade de um `CardComponent` que pode exibir diferentes layouts de cabeçalho, corpo e rodapé, tornando-o extremamente reutilizável em uma aplicação.

## Exemplo Avançado: Modal com Slots Nomeados

Um modal é um ótimo caso de uso para `ng-content`, pois ele geralmente tem uma estrutura fixa (cabeçalho, corpo, rodapé com botões), mas o conteúdo de cada seção é altamente variável.

```tsx
// src/app/modal/modal.component.ts
import { Component, EventEmitter, Output } from '@angular/core';

@Component({
  selector: 'app-modal',
  template: `
    <div class="modal-overlay" (click)="close.emit()"></div>
    <div class="modal-container">
      <div class="modal-header">
        <ng-content select="[modal-header]"></ng-content>
        <button class="close-button" (click)="close.emit()">X</button>
      </div>
      <div class="modal-body">
        <ng-content></ng-content>
      </div>
      <div class="modal-footer">
        <ng-content select="[modal-footer]"></ng-content>
      </div>
    </div>
  `,
  styles: [`
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      width: 500px;
      max-width: 90%;
      z-index: 1001;
      position: relative; /* Para o botão de fechar */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
      margin-bottom: 15px;
    }
    .modal-body {
      margin-bottom: 15px;
    }
    .modal-footer {
      border-top: 1px solid #eee;
      padding-top: 10px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    .close-button {
      background: none;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
    }
  `]
})
export class ModalComponent {
  @Output() close = new EventEmitter<void>();
}

```

**Uso:**

```html
<button (click)="isModalOpen = true">Abrir Modal de Confirmação</button>

<app-modal *ngIf="isModalOpen" (close)="isModalOpen = false">
  <h2 modal-header>Confirmação Necessária</h2>
  <p>Você tem certeza que deseja prosseguir com esta ação irreversível?</p>
  <div modal-footer>
    <button (click)="isModalOpen = false">Cancelar</button>
    <button class="primary-button" (click)="confirmAction()">Confirmar</button>
  </div>
</app-modal>

<script>
  // Exemplo de como você controlaria a visibilidade do modal no TypeScript
  // import { Component } from '@angular/core';
  // @Component({ ... })
  // export class AppComponent {
  //   isModalOpen = false;
  //   confirmAction() {
  //     alert('Ação confirmada!');
  //     this.isModalOpen = false;
  //   }
  // }
</script>

```

Este modal permite que o conteúdo do cabeçalho, corpo e rodapé seja completamente personalizado pelo componente pai, tornando-o um componente de UI extremamente flexível.

---

# Informações Adicionais

## `ng-content` vs. `@Input()`

É uma dúvida comum saber quando usar `ng-content` e quando usar `@Input()`.

- **`@Input()`:** Use `@Input()` quando você precisa passar **dados** para um componente filho. Por exemplo, passar uma string para um título, um número para uma quantidade, ou um objeto para exibir detalhes. O `@Input()` é ideal para dados estruturados e tipados.
- **`ng-content`:** Use `ng-content` quando você precisa passar **fragmentos de template (HTML)** para um componente filho. É ideal para criar componentes que agem como "containers" e que precisam renderizar conteúdo complexo ou elementos interativos diretamente do pai, sem que o componente filho precise saber sobre a estrutura interna desse conteúdo.

Pense assim: `@Input()` é para "o quê" (os dados), e `ng-content` é para "onde" (a projeção do template).

## Impacto no Ciclo de Vida do Componente

Quando o conteúdo é projetado via `ng-content`, ele faz parte do template do componente pai e é compilado no contexto do pai. No entanto, ele é *renderizado* dentro do componente filho.

- Os componentes ou diretivas dentro do conteúdo projetado (`<ng-content>`) são inicializados e seus ciclos de vida (`OnInit`, `OnDestroy`, etc.) são gerenciados pelo Angular normalmente.
- Se você precisar interagir com o conteúdo projetado a partir do componente filho, você pode usar `@ContentChild()` ou `@ContentChildren()` para acessar esses elementos ou componentes projetados. Isso é diferente de `@ViewChild()` que acessa elementos definidos no *próprio* template do componente.

---

# Referências para Estudo Independente

Para aprofundar seus conhecimentos em `ng-content` e composição de componentes no Angular, recomendo os seguintes recursos:

- **Documentação Oficial do Angular - Content Projection:**
    - [Angular.io - Content Projection](https://angular.io/guide/content-projection)
    - Esta é a fonte mais confiável e completa, cobrindo todos os aspectos da projeção de conteúdo, incluindo `ng-content` e os seletores.
- **Artigos e Tutoriais (Busca por "Angular ng-content"):**
    - Há diversos artigos e tutoriais excelentes em blogs como [Netanel Basal](https://netbasal.com/), [Indepth.dev](https://www.google.com/search?q=https://indepth.dev/tutorials/angular/angular-content-projection-using-ng-content), e outros. Procure por exemplos práticos e explicações mais detalhadas sobre cenários de uso específicos.
- **Vídeos no YouTube:**
    - Canais como "Academind" (Maximilian Schwarzmüller), "Fireship" e o próprio canal oficial do Angular costumam ter vídeos explicando `ng-content` de forma visual e prática.

Espero que esta explicação detalhada tenha sido útil para você, Gedê\! Se tiver mais alguma dúvida, pode mandar\!