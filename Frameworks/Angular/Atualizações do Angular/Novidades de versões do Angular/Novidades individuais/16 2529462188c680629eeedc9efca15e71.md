# 16

Perfeito, Ju! Vamos dissecar o **Angular 16** (16.0, 16.1 e 16.2), focando no que importa para quem desenvolve. Em cada versão eu marco **Estável (GA)** vs **Experimental/Developer Preview**, e também anoto quando algo “graduou” dentro da própria 16.x.

> ⚠️ Referências oficiais no fim de cada bloco — priorizei o post de lançamento do time do Angular e a doc nova do angular.dev.
> 

---

# Angular 16.0 (lançado em 03/05/2023)

## Estável (GA)

- **Interop RxJS + Angular**
    - `@angular/core/rxjs-interop` com utilidades para integrar Observables e o novo modelo reativo:
        - `toSignal()` para converter `Observable` → *signal* (ex.: evitar `async` pipe). ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
        - **`takeUntilDestroyed()`** para “amarrar” o ciclo de vida do `Observable` ao do componente/serviço, sem precisar manter `Subject`/`ngOnDestroy`. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d), [angular.dev](https://angular.dev/api/core/rxjs-interop/takeUntilDestroyed?utm_source=chatgpt.com))
    - **`DestroyRef`**: provedor injetável que permite registrar callbacks de limpeza no *scope* de destruição atual (component/directive/EnvironmentInjector). Útil inclusive junto com `takeUntilDestroyed()`. ([angular.dev](https://angular.dev/api/core/DestroyRef?utm_source=chatgpt.com))
- **Router → Inputs (binding automático)**
    - Nova opção **`withComponentInputBinding()`** em `provideRouter(...)` para repassar **route data, path params e query params** diretamente para `@Input()` do componente roteado — reduz `ActivatedRoute` boilerplate. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **`@Input({ required: true })`**
    - Inputs **obrigatórios** com checagem de *compile time* (sem custo em runtime). ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **CSP para estilos inline gerados pelo Angular**
    - Suporte oficial a **nonces** em estilos inline do framework via atributo **`ngCspNonce`** no host *e/ou* via token **`CSP_NONCE`** no *bootstrap* (inclui integração em Core/CLI/Material). ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **Standalone de ponta a ponta**
    - *Schematics* de migração (`ng generate @angular/core:standalone`) e **`ng new --standalone`** (Coleção Standalone) p/ novos projetos já sem `NgModule`. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
    - Possibilidade de configurar Zone.js no *bootstrap* com **`provideZoneChangeDetection({ eventCoalescing: true, ... })`**. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d), [angular.dev](https://angular.dev/api/core/provideZoneChangeDetection?utm_source=chatgpt.com))
- **Compatibilidade de plataforma**
    - **TypeScript 5.0** suportado (e suporte a **ECMAScript decorators**). Para 16.0.x a faixa prática foi `>=4.9.3 <5.1.0`; em 16.1/16.2 evoluiu para `<5.2.0`. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d), [angular.dev](https://angular.dev/reference/versions))
- **Linguagem/Produtividade**
    - **Auto-import** de componentes e *pipes* no template (Angular Language Service). ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **Remoções/limpezas**
    - **Adeus `ngcc`** (Angular Compatibility Compiler). Com isso, libs só View Engine deixaram de funcionar em 16+; foco total em Ivy/Partial Ivy. (O time cita “removendo o overhead do ngcc” no anúncio.) ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))

### Experimental / Developer Preview

- **Signals (novo modelo reativo)**
    - Primeira **developer preview** do pacote de *signals* em `@angular/core` (com `signal`, `computed`, `effect`) — interoperável com o modelo atual; a integração plena no framework viria depois. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **SSR + Non-destructive Hydration**
    - Hidratação **não-destrutiva de app completo** (DP): o cliente **reutiliza** o DOM servido e apenas anexa *listeners*, evitando *flicker* e melhorando LCP/INP. Ativa-se com **`provideClientHydration()`**. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **CLI/Build**
    - **Builder baseado em esbuild** em **developer preview**; **Vite** como *dev server* em `ng serve`; *builds* frios com ganhos relevantes. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **Testes**
    - **Suporte experimental a Jest** no CLI (`@angular-devkit/build-angular:jest`), com estratégia futura de mover projetos de Karma para Web Test Runner. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))

---

# Angular 16.1

## Estável (GA)

- **Transforms em `@Input`**
    - Novo **`@Input({ transform })`** para normalizar valores de *template* (e.g. `booleanAttribute`, `numberAttribute`) sem *getters/setters* manuais; ótimo p/ diretivas de atributo e compatibilidade de tipos em *bindings*. (Introduzido em **16.1**.) ([Ninja Squad](https://blog.ninja-squad.com/2023/06/14/what-is-new-angular-16.1/?utm_source=chatgpt.com))
- **Compatibilidade**
    - Suporte a **TypeScript 5.1** na linha 16.1.x. ([angular.dev](https://angular.dev/reference/versions))

## Experimental / Developer Preview

- **HTTP Client (fetch) – opt-in**
    - Backend baseado em **Fetch API** disponível como opt-in via `provideHttpClient(withFetch())` (útil para SSR/Hydration; ainda experimental nesta linha). ([Medium](https://medium.com/%40navneetskahlon/whats-new-in-angular-16-1-typescript-5-1-support-and-exciting-features-2013da6801dd?utm_source=chatgpt.com))

---

# Angular 16.2

## Estável (GA)

- **`NgComponentOutlet` com *input binding***
    - Dá para passar `@Input()` diretamente para componentes dinâmicos criados por `NgComponentOutlet`, reduzindo *workarounds* com `ComponentRef`. ([gitclear.com](https://www.gitclear.com/open_repos/angular/angular/release/16.2.0?utm_source=chatgpt.com))

## Experimental / Developer Preview

- **Novos *lifecycle functions* de renderização**
    - **`afterNextRender(...)`** (uma vez, após o próximo render) e **`afterRender(...)`** (após **cada** render) — *browser-only* — para ler/escrever DOM com segurança (especialmente em SSR/hidratação). Foram introduzidos como **developer preview** na 16.2. ([Ninja Squad](https://blog.ninja-squad.com/2023/08/09/what-is-new-angular-16.2/?utm_source=chatgpt.com), [angular.dev](https://angular.dev/api/core/afterNextRender?utm_source=chatgpt.com))
- **CLI / esbuild & SSR (incrementos)**
    - Melhorias no **builder esbuild** (hints de *preload*, build do *server bundle*) e **suporte experimental** para servir SSR com o **dev-server baseado em Vite**. ([blog3.ninja-squad.com](https://blog3.ninja-squad.com/2023/08/09/what-is-new-angular-16.2?utm_source=chatgpt.com))

---

## Notas de adoção e dicas práticas

- **Signals em 16.x**
    
    Use **signals** de forma localizada (estado de UI, *computed* pesadas) e **interop** (`toSignal`) para *Observables* já existentes; o ecossistema de *inputs/outputs* baseados em signal só estabilizaria mais adiante (v18). ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
    
- **Hydration**
    
    Se você usa SSR/Prerender, experimente **`provideClientHydration()`** e corrija acessos diretos ao DOM ou marque componentes com `ngSkipHydration` quando necessário. Ganhos de CWV (LCP/INP) tendem a ser perceptíveis. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
    
- **CSP nonces**
    
    Em ambientes com CSP rigorosa, forneça **`CSP_NONCE`** no *bootstrap* ou injete `ngCspNonce` no host HTML para os estilos inline do Angular. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
    
- **Atualização e *toolchain***
    
    Confirme faixas de **TS/Node** suportadas (16.0.x: TS `<5.1`; 16.1/16.2: TS `<5.2`), e considere migrar para o **builder esbuild** (DP) + Vite no dev para medir ganhos. ([angular.dev](https://angular.dev/reference/versions))
    

---

### Fontes principais

- Post oficial do lançamento do **Angular v16** (Minko/Angular Team): Signals (DP), Hydration (DP), esbuild+Vite (DP), Jest (exp), Required Inputs, Router→Inputs, CSP Nonce, Standalone & Zone config, auto-imports. ([Angular Blog](https://blog.angular.dev/angular-v16-is-here-4d7a28ec680d))
- **Docs**: `DestroyRef` e `takeUntilDestroyed` em `@angular/core/rxjs-interop`. ([angular.dev](https://angular.dev/api/core/DestroyRef?utm_source=chatgpt.com))
- **Docs**: Guia de Hydration. ([angular.dev](https://angular.dev/guide/hydration?utm_source=chatgpt.com))
- **Docs**: `provideZoneChangeDetection`. ([angular.dev](https://angular.dev/api/core/provideZoneChangeDetection?utm_source=chatgpt.com))
- **Compatibilidade** (TS/Node) por versão. ([angular.dev](https://angular.dev/reference/versions))
- **16.1**: `@Input({ transform })` (introdução). ([Ninja Squad](https://blog.ninja-squad.com/2023/06/14/what-is-new-angular-16.1/?utm_source=chatgpt.com))
- **16.2**: Input binding para `NgComponentOutlet`; *lifecycle* `afterNextRender/afterRender` (DP). ([gitclear.com](https://www.gitclear.com/open_repos/angular/angular/release/16.2.0?utm_source=chatgpt.com), [Ninja Squad](https://blog.ninja-squad.com/2023/08/09/what-is-new-angular-16.2/?utm_source=chatgpt.com))
- CLI 16.2: melhorias do *builder* esbuild/SSR. ([blog3.ninja-squad.com](https://blog3.ninja-squad.com/2023/08/09/what-is-new-angular-16.2?utm_source=chatgpt.com))

Se quiser, já posso transformar isso num *checklist* de migração 15→16 com *codemods* e *flags* (ex.: habilitar Router→Inputs, testar Jest, hidratação, CSP nonce etc.).