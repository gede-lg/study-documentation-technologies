# 0 - 13

Gedê, com certeza\! Vamos completar essa enciclopédia do Angular mergulhando nas suas fundações, desde o "Big Bang" que foi o Angular 2 até a versão 13, que consolidou a era moderna do framework.

Prepare-se para uma viagem no tempo, com o mesmo nível de detalhe que você espera.

---

### **O Início: "Versão 0" e o Nascimento do Angular 2 (2014-2016)**

Primeiro, um esclarecimento sobre a "versão 0". Não existiu uma "versão 0" pública do Angular 2. O que tivemos foi um período de desenvolvimento intenso com versões `alpha` e `beta` anunciadas em 2014 e lançadas ao longo de 2015 e 2016. Essa fase foi marcada por uma completa reescrita do AngularJS 1.x, abandonando seus conceitos em favor de uma nova arquitetura. A versão final, **Angular 2.0.0**, foi lançada em setembro de 2016.

### **Angular 2 (Setembro de 2016) - A Grande Reescrita**

Esta versão estabeleceu todos os pilares que conhecemos hoje. Foi uma mudança drástica e necessária para o futuro do framework.

### **1. Arquitetura Baseada em Componentes**

- **O que é?** O conceito de que a aplicação é uma árvore de componentes, onde cada um encapsula seu template (HTML), estilo (CSS) e lógica (TypeScript).
- **Por que é importante?** Tornou as UIs mais reutilizáveis, testáveis e fáceis de entender, em contraste com o "mar de controllers e scopes" do AngularJS 1.x.
- **Exemplo (Um Componente Típico):**
    
    ```tsx
    import { Component } from '@angular/core';
    
    @Component({
      selector: 'app-hero-card', // Como usar no HTML: <app-hero-card></app-hero-card>
      template: `
        <h2>{{ hero.name }}</h2>
        <p>Poder: {{ hero.power }}</p>
      `,
      styles: [`h2 { color: blue; }`]
    })
    export class HeroCardComponent {
      hero = {
        name: 'Super Gedê',
        power: 'Codificar em Go'
      };
    }
    
    ```
    

### **2. Módulos com `@NgModule`**

- **O que é?** A forma de organizar a aplicação em blocos coesos de funcionalidade. Um módulo declara os componentes, diretivas e pipes que possui e importa funcionalidades de outros módulos.
- **Por que é importante?** Permite a organização, encapsulamento e o carregamento tardio (lazy loading) de partes da aplicação.
- **Exemplo (Um Módulo de Funcionalidade):**
    
    ```tsx
    import { NgModule } from '@angular/core';
    import { CommonModule } from '@angular/common'; // Fornece *ngIf, *ngFor, etc.
    
    import { HeroCardComponent } from './hero-card.component';
    
    @NgModule({
      imports: [ CommonModule ],
      declarations: [ HeroCardComponent ], // Componentes pertencentes a este módulo
      exports: [ HeroCardComponent ] // Componentes que outros módulos podem usar
    })
    export class HeroModule {}
    
    ```
    

### **3. `HttpModule` (O Antigo Módulo HTTP)**

- **O que é?** O primeiro serviço do Angular 2 para fazer requisições HTTP.
- **Por que é importante?** Foi a forma inicial de comunicação com APIs. Hoje é considerado obsoleto e foi substituído pelo `HttpClientModule`, mas é crucial conhecer a história.
- **Exemplo (Usando o antigo `Http`):**
    
    ```tsx
    import { Http, Response } from '@angular/http'; // Do pacote @angular/http
    import { Injectable } from '@angular/core';
    import 'rxjs/add/operator/map'; // Operadores do RxJS eram importados assim
    
    @Injectable()
    export class OldDataService {
      constructor(private http: Http) {}
    
      getData() {
        return this.http.get('/api/data')
          .map((res: Response) => res.json()); // Era preciso extrair o JSON manualmente
      }
    }
    
    ```
    

---

### **Angular 4 (Março de 2017) - Performance e Qualidade de Vida**

*(O time pulou a v3 para alinhar a versão de todos os pacotes do monorepo, já que o pacote do roteador estava na v3.x).*

### **1. `ngIf` com `else`**

- **O que é?** Uma melhoria sintática para o `ngIf` que permitiu a referência a um `ng-template` para o caso "falso".
- **Por que é importante?** Simplificou o código de templates, eliminando a necessidade de ter um `ngIf` para a condição verdadeira e um `ngIf` separado para a condição falsa (`ngIf="!condicao"`).
- **Exemplo:**
    
    ```html
    <div *ngIf="user; else guestTemplate">
      Bem-vindo de volta, {{ user.name }}!
    </div>
    
    <ng-template #guestTemplate>
      <p>Por favor, faça o login para continuar.</p>
    </ng-template>
    
    ```
    

### **2. `title` e `meta` Services**

- **O que é?** A introdução dos serviços `Title` e `Meta` para manipular a tag `<title>` e as meta tags do documento.
- **Por que é importante?** Essencial para SEO e para aplicações que usam renderização no lado do servidor (SSR), permitindo que cada página tivesse metadados únicos.
- **Exemplo:**
    
    ```tsx
    import { Component, OnInit } from '@angular/core';
    import { Title } from '@angular/platform-browser';
    
    @Component({ /* ... */ })
    export class ProfilePageComponent implements OnInit {
      constructor(private titleService: Title) {}
    
      ngOnInit() {
        this.titleService.setTitle('Meu Perfil - Gedê');
      }
    }
    
    ```
    

---

### **Angular 5 (Novembro de 2017) - Otimização e HTTP Moderno**

### **1. `HttpClientModule`**

- **O que é?** Um novo e melhorado cliente HTTP que substituiu o antigo `HttpModule`.
- **Por que é importante?** É mais fácil de usar, imutável e introduziu features poderosas como Interceptadores (`HttpInterceptor`) e uma API tipada para respostas, eliminando a necessidade de `res.json()`.
- **Exemplo (`HttpClient` e um Interceptador):**
    
    ```tsx
    // data.service.ts
    import { HttpClient } from '@angular/common/http'; // Do novo pacote
    import { Injectable } from '@angular/core';
    import { Observable } from 'rxjs';
    
    @Injectable()
    export class NewDataService {
      constructor(private http: HttpClient) {}
    
      // A resposta já vem como JSON por padrão e pode ser tipada
      getData(): Observable<any[]> {
        return this.http.get<any[]>('/api/data');
      }
    }
    
    // auth.interceptor.ts
    import { HttpInterceptor, HttpRequest, HttpHandler } from '@angular/common/http';
    
    @Injectable()
    export class AuthInterceptor implements HttpInterceptor {
      intercept(req: HttpRequest<any>, next: HttpHandler) {
        const authToken = 'SEU_TOKEN_AQUI';
        // Clona a requisição para adicionar o header, pois requisições são imutáveis
        const authReq = req.clone({
          headers: req.headers.set('Authorization', `Bearer ${authToken}`)
        });
        return next.handle(authReq);
      }
    }
    
    ```
    

---

### **Angular 6 (Maio de 2018) - O Ecossistema de Ferramentas**

### **1. Comandos `ng update` e `ng add`**

- **O que é?** Novos comandos do CLI. `ng update` atualiza as dependências do seu projeto para uma nova versão do Angular. `ng add` adiciona e configura novas bibliotecas.
- **Por que é importante?** Tornou o processo de atualização e adição de funcionalidades (como PWA ou Angular Material) dramaticamente mais simples e seguro.
- **Exemplo (Uso no Terminal):**
    
    ```bash
    # Para atualizar seu projeto da versão 5 para a 6
    ng update @angular/core @angular/cli
    
    # Para adicionar o Angular Material e configurar tudo automaticamente
    ng add @angular/material
    
    ```
    

### **2. Tree-Shakable Providers**

- **O que é?** Uma nova forma de registrar serviços usando a propriedade `providedIn: 'root'` no decorador `@Injectable`.
- **Por que é importante?** Permite que os serviços que não são usados em lugar nenhum da aplicação sejam removidos do bundle final (processo de "tree-shaking"), resultando em aplicações menores.
- **Exemplo:**
    
    ```tsx
    import { Injectable } from '@angular/core';
    
    // A FORMA ANTIGA (precisava ser adicionado no array 'providers' de um módulo)
    // @Injectable()
    // export class MyOldService {}
    
    // A NOVA FORMA (automagicamente disponível em toda a app e tree-shakeable)
    @Injectable({
      providedIn: 'root'
    })
    export class MyNewService {}
    
    ```
    

### **3. Angular Elements**

- **O que é?** Uma API para empacotar componentes Angular como "Custom Elements" nativos do navegador.
- **Por que é importante?** Permitiu que componentes Angular fossem usados em qualquer página HTML ou em outros frameworks (React, Vue) sem precisar de toda a aplicação Angular rodando.
- **Exemplo:**
    
    ```tsx
    // app.module.ts
    import { createCustomElement } from '@angular/elements';
    
    export class AppModule {
      constructor(private injector: Injector) {
        // Cria um elemento customizado a partir do componente Angular
        const el = createCustomElement(MyComponent, { injector: this.injector });
        // Registra o elemento no navegador para poder ser usado como <my-element></my-element>
        customElements.define('my-element', el);
      }
    }
    
    ```
    

---

### **Angular 8 (Maio de 2019) - O Caminho para Ivy**

*(A v7 foi uma versão menor com melhorias no CDK como Virtual Scrolling e Drag & Drop).*

### **1. Sintaxe de `import()` para Lazy Loading**

- **O que é?** Adoção da sintaxe de `import()` dinâmico do JavaScript moderno para declarar rotas de carregamento tardio.
- **Por que é importante?** Alinhou o Angular com o padrão do ecossistema JavaScript e melhorou o suporte das ferramentas de build e editores de código.
- **Exemplo:**
    
    ```tsx
    const routes: Routes = [
      {
        path: 'admin',
        // A FORMA ANTIGA (string mágica)
        // loadChildren: './admin/admin.module#AdminModule'
    
        // A NOVA FORMA (type-safe e padrão do JS)
        loadChildren: () => import('./admin/admin.module').then(m => m.AdminModule)
      }
    ];
    
    ```
    

### **2. Differential Loading**

- **O que é?** Um processo automático do CLI que gera dois bundles da aplicação: um moderno (ES2015) para navegadores novos, e um legado (ES5) com mais polyfills para navegadores antigos.
- **Por que é importante?** A maioria dos usuários com navegadores modernos recebe uma aplicação significativamente menor e mais rápida, pois não precisa baixar código de compatibilidade desnecessário.

---

### **Angular 9 (Fevereiro de 2020) - Ivy por Padrão**

A versão que ativou o novo compilador e motor de renderização, Ivy, para todos os projetos.

### **1. Ivy como Padrão e Seus Benefícios**

- **O que é?** Ivy é o motor de renderização de nova geração do Angular.
- **Por que é importante?**
    - **Bundles Menores:** Graças a um tree-shaking mais agressivo.
    - **Builds Mais Rápidos:** Especialmente em modo AOT (Ahead-of-Time).
    - **Depuração Melhorada:** Erros nos templates apontam para a linha exata do código e é possível interagir com os componentes no console do navegador (`ng.getComponent(...)`).
    - **Fim do `entryComponents`:** Não era mais necessário declarar componentes carregados dinamicamente em `entryComponents` de um módulo.
- **Exemplo (Depuração com Ivy):**
    
    ```bash
    # No console de Ferramentas de Desenvolvedor do seu navegador
    # Selecione um elemento na aba 'Elements'
    
    # Agora no console, você pode pegar a instância do componente
    ng.getComponent($0)
    
    # E até mesmo chamar seus métodos ou mudar suas propriedades
    ng.getComponent($0).minhaPropriedade = 'novo valor'
    ng.applyChanges($0) # Aplica a detecção de mudanças
    
    ```
    

---

### **Angular 11 (Novembro de 2020) - Melhorias de Build**

*(A v10 foi uma versão menor, com foco em qualidade e um novo seletor de intervalo de datas no Material).*

### **1. Automatic Font Inlining**

- **O que é?** O Angular CLI passa a detectar o uso de fontes (Google Fonts, etc.) no seu CSS e, durante o build de produção, baixa e as embute (inline) no HTML.
- **Por que é importante?** Evita uma requisição de rede extra para buscar o CSS da fonte, melhorando a métrica de performance FCP (First Contentful Paint).

---

### **Angular 12 (Maio de 2021) - Simplificando o Futuro**

### **1. Operador Nullish Coalescing (`??`) nos Templates**

- **O que é?** Suporte para o operador `??` do JavaScript diretamente nos templates HTML.
- **Por que é importante?** Simplifica a exibição de valores padrão. O `??` retorna o valor da direita apenas se o da esquerda for `null` ou `undefined`, diferente do `||` que retorna para qualquer valor "falsy" (como `0` ou `''`).
- **Exemplo:**
    
    ```html
    <p>Pontuação: {{ score || 'Nenhuma' }}</p> <p>Pontuação: {{ score ?? 'Nenhuma' }}</p> ```
    
    ```
    

### **2. Depreciação do View Engine**

- **O que é?** O antigo motor de renderização, View Engine, foi formalmente depreciado.
- **Por que é importante?** Foi o aviso final para que autores de bibliotecas migrassem suas publicações para o formato Ivy, preparando o terreno para a remoção completa do código legado.

---

### **Angular 13 (Novembro de 2021) - Sem Olhar Para Trás**

Esta versão foi sobre remover código legado e abraçar o futuro, resultando em um Angular mais enxuto e rápido.

### **1. Remoção Completa do View Engine**

- **O que é?** Todo o código do View Engine foi removido da base de código do Angular.
- **Por que é importante?** Simplificou o framework, reduziu a complexidade e eliminou a necessidade do `ngcc` (Angular Compatibility Compiler), que era um passo lento no processo de build para compatibilizar bibliotecas antigas.

### **2. Fim do Suporte ao Internet Explorer 11**

- **O que é?** O Angular deixou de incluir polyfills e workarounds específicos para o IE11.
- **Por que é importante?** Permitiu que o framework usasse APIs modernas do navegador (como CSS Variables) nativamente, o que resultou em bundles menores, carregamento mais rápido e um processo de desenvolvimento mais simples.

### **3. API de Criação de Componentes Dinâmicos Simplificada**

- **O que é?** Não era mais necessário injetar o `ComponentFactoryResolver` para criar um componente dinamicamente.
- **Por que é importante?** Reduziu o boilerplate e simplificou uma das APIs mais complexas do framework.
- **Exemplo:**
    
    ```tsx
    @Component({ /* ... */ })
    export class HostComponent {
      @ViewChild('anchor', { read: ViewContainerRef }) anchor!: ViewContainerRef;
    
      constructor() {} // NÃO PRECISA MAIS DE: private factoryResolver: ComponentFactoryResolver
    
      createComponent() {
        this.anchor.clear();
    
        // A FORMA ANTIGA (v12 e anteriores)
        // const factory = this.factoryResolver.resolveComponentFactory(DynamicComponent);
        // this.anchor.createComponent(factory);
    
        // A NOVA FORMA (v13+)
        // O próprio componente é passado diretamente
        this.anchor.createComponent(DynamicComponent);
      }
    }
    
    ```
    

Ufa\! Essa foi a jornada das fundações do Angular moderno. Espero que esta enciclopédia detalhada seja um recurso valioso para você, Gedê\!